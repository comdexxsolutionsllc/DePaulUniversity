<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Horstmann Chapter 3: Second Implementation</title></head><body><table width="100%" class="title"><colgroup><col width="100%"/><col align="left"/></colgroup><tr><td><span style="font-weight: bold; font-size: larger"><a href="../index.html">SE450</a>: <a href="notes-horstmann-03-016.html">Second Implementation</a></span><span style="font-weight: normal"><a href="notes-horstmann-03.html#slide015"> [15/57] </a></span></td><td valign="top"><a href="notes-horstmann-03-014.html"><img border="0" src="../images/prev.gif" alt="Previous page"/></a><a href="notes-horstmann-03-000.html"><img border="0" src="../images/toc.gif" alt="Contents"/></a><a href="notes-horstmann-03-016.html"><img border="0" src="../images/next.gif" alt="Next page"/></a></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>For greater efficiency, use Julian day number </li>
          
          <li>Used in astronomy </li>
          
          <li>Number of days since Jan. 1, 4713 BCE </li>
          
          <li>May 23, 1968 = Julian Day 2,440,000 </li>
          
          <li>Greatly simplifies date arithmetic </li>
          
          
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch03_day2/Day_java.html">file:horstmann/ch03_day2/Day.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch03_day2/Day.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch03_day2/Day.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch03_day2/Day.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch03_day2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Day</span>
<span style="color: #000000">00003:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a day with a given year, month, and day</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">      of the Julian/Gregorian calendar. The Julian calendar</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">      is used for all days before October 15, 1582</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aYear a year != 0</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMonth a month between 1 and 12</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aDate a date between 1 and 31</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aYear<span style="color: #990000">,</span> <span style="color: #009900">int</span> aMonth<span style="color: #990000">,</span> <span style="color: #009900">int</span> aDate<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       julian <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">toJulian</span></span><span style="color: #990000">(</span>aYear<span style="color: #990000">,</span> aMonth<span style="color: #990000">,</span> aDate<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00018:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the year of this day</span></span>
<span style="color: #000000">00019:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the year</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00021:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getYear</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00022:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">)[</span><span style="color: #993399">0</span><span style="color: #990000">];</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> 
<span style="color: #000000">00026:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00027:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the month of this day</span></span>
<span style="color: #000000">00028:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the month</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00030:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getMonth</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00031:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">)[</span><span style="color: #993399">1</span><span style="color: #990000">];</span>
<span style="color: #000000">00033:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> 
<span style="color: #000000">00035:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00036:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the day of the month of this day</span></span>
<span style="color: #000000">00037:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the day of the month</span></span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00039:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getDate</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00040:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">)[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span> 
<span style="color: #000000">00044:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00045:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns a day that is a certain number of days away from</span></span>
<span style="color: #000000">00046:</span> <span style="font-style: italic"><span style="color: #9A1900">      this day</span></span>
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> n the number of days, can be negative</span></span>
<span style="color: #000000">00048:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a day that is n days away from this one</span></span>
<span style="color: #000000">00049:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00050:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Day</span> <span style="font-weight: bold"><span style="color: #000000">addDays</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> n<span style="color: #990000">)</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00052:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span>julian <span style="color: #990000">+</span> n<span style="color: #990000">);</span>
<span style="color: #000000">00053:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00054:</span> 
<span style="color: #000000">00055:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00056:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the number of days between this day and another day.</span></span>
<span style="color: #000000">00057:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> other the other day</span></span>
<span style="color: #000000">00058:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the number of days that this day is away from </span></span>
<span style="color: #000000">00059:</span> <span style="font-style: italic"><span style="color: #9A1900">      the other (&gt;0 if this day comes later)</span></span>
<span style="color: #000000">00060:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00061:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">daysFrom</span></span><span style="color: #990000">(</span><span style="color: #008080">Day</span> other<span style="color: #990000">)</span>
<span style="color: #000000">00062:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00063:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> julian <span style="color: #990000">-</span> other<span style="color: #990000">.</span>julian<span style="color: #990000">;</span>
<span style="color: #000000">00064:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00065:</span> 
<span style="color: #000000">00066:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aJulian<span style="color: #990000">)</span>
<span style="color: #000000">00067:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00068:</span>       julian <span style="color: #990000">=</span> aJulian<span style="color: #990000">;</span>
<span style="color: #000000">00069:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00070:</span> 
<span style="color: #000000">00071:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00072:</span> <span style="font-style: italic"><span style="color: #9A1900">      Computes the Julian day number of the given day.</span></span>
<span style="color: #000000">00073:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> year a year</span></span>
<span style="color: #000000">00074:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> month a month</span></span>
<span style="color: #000000">00075:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> date a day of the month</span></span>
<span style="color: #000000">00076:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> The Julian day number that begins at noon of </span></span>
<span style="color: #000000">00077:</span> <span style="font-style: italic"><span style="color: #9A1900">      the given day</span></span>
<span style="color: #000000">00078:</span> <span style="font-style: italic"><span style="color: #9A1900">      Positive year signifies CE, negative year BCE. </span></span>
<span style="color: #000000">00079:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remember that the year after 1 BCE was 1 CE.</span></span>
<span style="color: #000000">00080:</span> 
<span style="color: #000000">00081:</span> <span style="font-style: italic"><span style="color: #9A1900">      A convenient reference point is that May 23, 1968 noon</span></span>
<span style="color: #000000">00082:</span> <span style="font-style: italic"><span style="color: #9A1900">      is Julian day number 2440000.</span></span>
<span style="color: #000000">00083:</span> 
<span style="color: #000000">00084:</span> <span style="font-style: italic"><span style="color: #9A1900">      Julian day number 0 is a Monday.</span></span>
<span style="color: #000000">00085:</span> 
<span style="color: #000000">00086:</span> <span style="font-style: italic"><span style="color: #9A1900">      This algorithm is from Press et al., Numerical Recipes</span></span>
<span style="color: #000000">00087:</span> <span style="font-style: italic"><span style="color: #9A1900">      in C, 2nd ed., Cambridge University Press 1992</span></span>
<span style="color: #000000">00088:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00089:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">toJulian</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> year<span style="color: #990000">,</span> <span style="color: #009900">int</span> month<span style="color: #990000">,</span> <span style="color: #009900">int</span> date<span style="color: #990000">)</span>
<span style="color: #000000">00090:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00091:</span>       <span style="color: #009900">int</span> jy <span style="color: #990000">=</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00092:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> jy<span style="color: #990000">++;</span>
<span style="color: #000000">00093:</span>       <span style="color: #009900">int</span> jm <span style="color: #990000">=</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00094:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> jm<span style="color: #990000">++;</span>
<span style="color: #000000">00095:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00096:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00097:</span>          jy<span style="color: #990000">--;</span>
<span style="color: #000000">00098:</span>          jm <span style="color: #990000">+=</span> <span style="color: #993399">13</span><span style="color: #990000">;</span>
<span style="color: #000000">00099:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00100:</span>       <span style="color: #009900">int</span> jul <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">floor</span></span><span style="color: #990000">(</span><span style="color: #993399">365.25</span> <span style="color: #990000">*</span> jy<span style="color: #990000">)</span> 
<span style="color: #000000">00101:</span>             <span style="color: #990000">+</span> java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">floor</span></span><span style="color: #990000">(</span><span style="color: #993399">30.6001</span> <span style="color: #990000">*</span> jm<span style="color: #990000">)</span> <span style="color: #990000">+</span> date <span style="color: #990000">+</span> <span style="color: #993399">1720995.0</span><span style="color: #990000">);</span>
<span style="color: #000000">00102:</span> 
<span style="color: #000000">00103:</span>       <span style="color: #009900">int</span> IGREG <span style="color: #990000">=</span> <span style="color: #993399">15</span> <span style="color: #990000">+</span> <span style="color: #993399">31</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span><span style="color: #993399">10</span> <span style="color: #990000">+</span> <span style="color: #993399">12</span> <span style="color: #990000">*</span> <span style="color: #993399">1582</span><span style="color: #990000">);</span>
<span style="color: #000000">00104:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Gregorian Calendar adopted Oct. 15, 1582</span></span>
<span style="color: #000000">00105:</span> 
<span style="color: #000000">00106:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>date <span style="color: #990000">+</span> <span style="color: #993399">31</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span>month <span style="color: #990000">+</span> <span style="color: #993399">12</span> <span style="color: #990000">*</span> year<span style="color: #990000">)</span> <span style="color: #990000">&gt;=</span> IGREG<span style="color: #990000">)</span>
<span style="color: #000000">00107:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Change over to Gregorian calendar</span></span>
<span style="color: #000000">00108:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00109:</span>          <span style="color: #009900">int</span> ja <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.01</span> <span style="color: #990000">*</span> jy<span style="color: #990000">);</span>
<span style="color: #000000">00110:</span>          jul <span style="color: #990000">+=</span> <span style="color: #993399">2</span> <span style="color: #990000">-</span> ja <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> ja<span style="color: #990000">);</span>
<span style="color: #000000">00111:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00112:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> jul<span style="color: #990000">;</span>
<span style="color: #000000">00113:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00114:</span> 
<span style="color: #000000">00115:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00116:</span> <span style="font-style: italic"><span style="color: #9A1900">      Converts a Julian day number to a calendar date.</span></span>
<span style="color: #000000">00117:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span>
<span style="color: #000000">00118:</span> <span style="font-style: italic"><span style="color: #9A1900">      This algorithm is from Press et al., Numerical Recipes</span></span>
<span style="color: #000000">00119:</span> <span style="font-style: italic"><span style="color: #9A1900">      in C, 2nd ed., Cambridge University Press 1992</span></span>
<span style="color: #000000">00120:</span> 
<span style="color: #000000">00121:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> j  the Julian day number</span></span>
<span style="color: #000000">00122:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> an array whose 0 entry is the year, 1 the month,</span></span>
<span style="color: #000000">00123:</span> <span style="font-style: italic"><span style="color: #9A1900">      and 2 the day of the month.</span></span>
<span style="color: #000000">00124:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00125:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">)</span>
<span style="color: #000000">00126:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00127:</span>       <span style="color: #009900">int</span> ja <span style="color: #990000">=</span> j<span style="color: #990000">;</span>
<span style="color: #000000">00128:</span>    
<span style="color: #000000">00129:</span>       <span style="color: #009900">int</span> JGREG <span style="color: #990000">=</span> <span style="color: #993399">2299161</span><span style="color: #990000">;</span>
<span style="color: #000000">00130:</span>          <span style="font-style: italic"><span style="color: #9A1900">// The Julian day number of the adoption of the Gregorian calendar    </span></span>
<span style="color: #000000">00131:</span> 
<span style="color: #000000">00132:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>j <span style="color: #990000">&gt;=</span> JGREG<span style="color: #990000">)</span>
<span style="color: #000000">00133:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Cross-over to Gregorian Calendar produces this correction</span></span>
<span style="color: #000000">00134:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00135:</span>          <span style="color: #009900">int</span> jalpha <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(((</span><span style="color: #009900">float</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>j <span style="color: #990000">-</span> <span style="color: #993399">1867216</span><span style="color: #990000">)</span> <span style="color: #990000">-</span> <span style="color: #993399">0.25</span><span style="color: #990000">)</span> 
<span style="color: #000000">00136:</span>              <span style="color: #990000">/</span> <span style="color: #993399">36524.25</span><span style="color: #990000">);</span>
<span style="color: #000000">00137:</span>          ja <span style="color: #990000">+=</span> <span style="color: #993399">1</span> <span style="color: #990000">+</span> jalpha <span style="color: #990000">-</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> jalpha<span style="color: #990000">);</span>
<span style="color: #000000">00138:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00139:</span>       <span style="color: #009900">int</span> jb <span style="color: #990000">=</span> ja <span style="color: #990000">+</span> <span style="color: #993399">1524</span><span style="color: #990000">;</span>
<span style="color: #000000">00140:</span>       <span style="color: #009900">int</span> jc <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">6680.0</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span><span style="color: #009900">float</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>jb <span style="color: #990000">-</span> <span style="color: #993399">2439870</span><span style="color: #990000">)</span> <span style="color: #990000">-</span> <span style="color: #993399">122.1</span><span style="color: #990000">)</span>
<span style="color: #000000">00141:</span>           <span style="color: #990000">/</span> <span style="color: #993399">365.25</span><span style="color: #990000">);</span>
<span style="color: #000000">00142:</span>       <span style="color: #009900">int</span> jd <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">365</span> <span style="color: #990000">*</span> jc <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> jc<span style="color: #990000">));</span>
<span style="color: #000000">00143:</span>       <span style="color: #009900">int</span> je <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">((</span>jb <span style="color: #990000">-</span> jd<span style="color: #990000">)</span> <span style="color: #990000">/</span> <span style="color: #993399">30.6001</span><span style="color: #990000">);</span>
<span style="color: #000000">00144:</span>       <span style="color: #009900">int</span> date <span style="color: #990000">=</span> jb <span style="color: #990000">-</span> jd <span style="color: #990000">-</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">30.6001</span> <span style="color: #990000">*</span> je<span style="color: #990000">);</span>
<span style="color: #000000">00145:</span>       <span style="color: #009900">int</span> month <span style="color: #990000">=</span> je <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00146:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">12</span><span style="color: #990000">)</span> month <span style="color: #990000">-=</span> <span style="color: #993399">12</span><span style="color: #990000">;</span>
<span style="color: #000000">00147:</span>       <span style="color: #009900">int</span> year <span style="color: #990000">=</span> jc <span style="color: #990000">-</span> <span style="color: #993399">4715</span><span style="color: #990000">;</span>
<span style="color: #000000">00148:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> <span style="color: #990000">--</span>year<span style="color: #990000">;</span>
<span style="color: #000000">00149:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">--</span>year<span style="color: #990000">;</span>
<span style="color: #000000">00150:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> <span style="color: #FF0000">{</span> year<span style="color: #990000">,</span> month<span style="color: #990000">,</span> date <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00151:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00152:</span> 
<span style="color: #000000">00153:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> julian<span style="color: #990000">;</span>
<span style="color: #000000">00154:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00155:</span> 
<span style="color: #000000">00156:</span> 
<span style="color: #000000">00157:</span> 
<span style="color: #000000">00158:</span> 
<span style="color: #000000">00159:</span> 
<span style="color: #000000">00160:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        
      <p><a href="notes-horstmann-03-014.html"><img border="0" src="../images/prev.gif" alt="Previous page"/></a><a href="notes-horstmann-03-000.html"><img border="0" src="../images/toc.gif" alt="Contents"/></a><a href="notes-horstmann-03-016.html"><img border="0" src="../images/next.gif" alt="Next page"/></a></p><script language="JavaScript1.2" type="text/javascript"><!--
        function next () {
          window.location = 'notes-horstmann-03-016.html';
        }
        document.onkeypress = next;
      --></script></body></html>
