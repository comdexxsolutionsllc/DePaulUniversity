<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Horstmann Chapter 3</title></head><body><h1><a href="../index.html">SE450</a>: Horstmann Chapter 3</h1><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-000.html"> [0/57] </a></span></td></tr></table><p> </p><table width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Object-Oriented Design &amp; Patterns</a> [1/57] </td></tr><tr><td><a href="#slide002">Chapter Topics</a> [2/57] </td></tr><tr><td><a href="#slide003">Date Classes in Standard Library</a> [3/57] </td></tr><tr><td><a href="#slide004">Methods of the Date class</a> [4/57] </td></tr><tr><td><a href="#slide005">Methods of the Date class</a> [5/57] </td></tr><tr><td><a href="#slide006">Points in Time</a> [6/57] </td></tr><tr><td><a href="#slide007">The GregorianCalendar Class</a> [7/57] </td></tr><tr><td><a href="#slide008">Date Handling in the Java Library</a> [8/57] </td></tr><tr><td><a href="#slide009">Designing a Day Class</a> [9/57] </td></tr><tr><td><a href="#slide010">Designing a Day Class</a> [10/57] </td></tr><tr><td><a href="#slide011">Designing a Day Class</a> [11/57] </td></tr><tr><td><a href="#slide012">Designing a Day Class</a> [12/57] </td></tr><tr><td><a href="#slide013">Implementing a Day Class</a> [13/57] </td></tr><tr><td><a href="#slide014">Implementing a Day Class</a> [14/57] </td></tr><tr><td><a href="#slide015">Second Implementation</a> [15/57] </td></tr><tr><td><a href="#slide016">Third Implementation</a> [16/57] </td></tr><tr><td><a href="#slide017">The Importance of Encapsulation</a> [17/57] </td></tr><tr><td><a href="#slide018">Accessors and Mutators</a> [18/57] </td></tr><tr><td><a href="#slide019">Don't Supply a Mutator for every Accessor</a> [19/57] </td></tr><tr><td><a href="#slide020">Sharing Mutable References</a> [20/57] </td></tr><tr><td><a href="#slide021">Sharing Mutable References</a> [21/57] </td></tr><tr><td><a href="#slide022">Sharing Mutable References</a> [22/57] </td></tr><tr><td><a href="#slide023">Final Instance Fields</a> [23/57] </td></tr><tr><td><a href="#slide024">Separating Accessors and Mutators</a> [24/57] </td></tr><tr><td><a href="#slide025">Separating Accessors and Mutators</a> [25/57] </td></tr><tr><td><a href="#slide026">Side Effects</a> [26/57] </td></tr><tr><td><a href="#slide027">Side Effects</a> [27/57] </td></tr><tr><td><a href="#slide028">Side Effects</a> [28/57] </td></tr><tr><td><a href="#slide029">Law of Demeter</a> [29/57] </td></tr><tr><td><a href="#slide030">Law of Demeter</a> [30/57] </td></tr><tr><td><a href="#slide031">Quality of Class Interface</a> [31/57] </td></tr><tr><td><a href="#slide032">Cohesion</a> [32/57] </td></tr><tr><td><a href="#slide033">Completeness</a> [33/57] </td></tr><tr><td><a href="#slide034">Convenience</a> [34/57] </td></tr><tr><td><a href="#slide035">Clarity</a> [35/57] </td></tr><tr><td><a href="#slide036">Clarity</a> [36/57] </td></tr><tr><td><a href="#slide037">Consistency</a> [37/57] </td></tr><tr><td><a href="#slide038">Consistency</a> [38/57] </td></tr><tr><td><a href="#slide039">Programming by Contract</a> [39/57] </td></tr><tr><td><a href="#slide040">Preconditions</a> [40/57] </td></tr><tr><td><a href="#slide041">Preconditions</a> [41/57] </td></tr><tr><td><a href="#slide042">Preconditions</a> [42/57] </td></tr><tr><td><a href="#slide043">Circular Array Implementation</a> [43/57] </td></tr><tr><td><a href="#slide044">Inefficient Shifting of Elements</a> [44/57] </td></tr><tr><td><a href="#slide045">A Circular Array</a> [45/57] </td></tr><tr><td><a href="#slide046">Wrapping around the End</a> [46/57] </td></tr><tr><td><a href="#slide047">Preconditions</a> [47/57] </td></tr><tr><td><a href="#slide048">Assertions</a> [48/57] </td></tr><tr><td><a href="#slide049">Assertions</a> [49/57] </td></tr><tr><td><a href="#slide050">Exceptions in the Contract</a> [50/57] </td></tr><tr><td><a href="#slide051">Postconditions</a> [51/57] </td></tr><tr><td><a href="#slide052">Class Invariants</a> [52/57] </td></tr><tr><td><a href="#slide053">Class Invariants</a> [53/57] </td></tr><tr><td><a href="#slide054">Unit Testing</a> [54/57] </td></tr><tr><td><a href="#slide055">JUnit</a> [55/57] </td></tr><tr><td><a href="#slide056">JUnit</a> [56/57] </td></tr><tr><td><a href="#slide057">JUnit</a> [57/57] </td></tr></table><br/><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Object-Oriented Design &amp; Patterns</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-001.html"> [1/57] </a></span></td></tr></table><p> </p>
        
        <h4 xmlns="">Cay S. Horstmann</h4>
        
        <h3 xmlns="">Chapter 3</h3>
        
        <h3 xmlns="">The Object-Oriented Design Process<br xmlns="http://www.w3.org/1999/xhtml"/>
          
        </h3>
        
        <img alt="horstmann-oodp2" src="../images/horstmann-oodp2.jpg" height="500" width="404"/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Chapter Topics</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-002.html"> [2/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>An overview of the Date classes in the Java library </li>
          
          <li>Designing a Day class<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Three implementations of the Day class<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>The importance of encapsulation </li>
          
          <li>Analyzing the quality of an interface </li>
          
          <li>Programming by contract </li>
          
          <li>Unit testing<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Date Classes in Standard Library</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-003.html"> [3/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Many programs manipulate dates such as<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            "Saturday, February 3, 2001" </li>
          
          <li> <tt>Date</tt> class:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">Date now = new Date();<br xmlns="http://www.w3.org/1999/xhtml"/>   // constructs current date/time<br xmlns="http://www.w3.org/1999/xhtml"/>System.out.println(now.toString());<br xmlns="http://www.w3.org/1999/xhtml"/>   // prints date such as <br xmlns="http://www.w3.org/1999/xhtml"/>   // Sat Feb 03 16:34:10 PST 2001<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li><tt>Date</tt> class encapsulates <i>point in time</i> </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Methods of the Date class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-004.html"> [4/57] </a></span></td></tr></table><p> </p>
        
        <table xmlns="" border="1" cellpadding="2" cellspacing="2" width="100%">
          
          <tbody>
            
            <tr>
              
              <td valign="top" rowspan="1" colspan="1"><tt>boolean after(Date other)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
              <td valign="top" rowspan="1" colspan="1">Tests if this date is after the specified date<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
            </tr>
            
            <tr>
              
              <td valign="top" rowspan="1" colspan="1"><tt>boolean before(Date other)</tt></td>
              
              <td valign="top" rowspan="1" colspan="1">Tests if this date is before the specified date</td>
              
            </tr>
            
            <tr>
              
              <td valign="top" rowspan="1" colspan="1"><tt>int compareTo(Date other)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
              <td valign="top" rowspan="1" colspan="1">Tells  which date came before the other<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
            </tr>
            
            <tr>
              
              <td valign="top" rowspan="1" colspan="1"><tt>long getTime()</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
              <td valign="top" rowspan="1" colspan="1">Returns milliseconds since the epoch<br xmlns="http://www.w3.org/1999/xhtml"/>
                
                (1970-01-01 00:00:00 GMT)<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
            </tr>
            
            <tr>
              
              <td valign="top" rowspan="1" colspan="1"><tt>void setTime(long n)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
              <td valign="top" rowspan="1" colspan="1">Sets the date to the given number of
                milliseconds since the epoch<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </td>
              
            </tr>
            
            
          </tbody>
        </table>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Methods of the Date class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-005.html"> [5/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Deprecated methods omitted </li>
          
          <li><tt>Date</tt> class methods supply <i>total ordering</i> on <tt>Date</tt>
            objects </li>
          
          <li>Convert to scalar time measure </li>
          
          <li>Note that <tt>before/after</tt> not strictly necessary<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            (Presumably introduced for convenience) </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Points in Time</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-006.html"> [6/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_01.jpg" height="241" width="1001"/><br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">The GregorianCalendar Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-007.html"> [7/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>The <tt>Date</tt> class doesn't measure months, weekdays, etc. </li>
          
          <li>That's the job of a <i>calendar</i> </li>
          
          <li>A calendar assigns a name to a point in time </li>
          
          <li>Many calendars in use: 
            
            <ul>
              
              <li>Gregorian </li>
              
              <li>Contemporary: Hebrew, Arabic, Chinese<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </li>
              
              <li>Historical: French Revolutionary,  Mayan </li>
              
              
            </ul>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Date Handling in the Java Library</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-008.html"> [8/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_02.jpg" height="348" width="430"/><br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Designing a Day Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-009.html"> [9/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Custom class, for teaching/learning purpose </li>
          
          <li>Use the standard library classes, not this class, in your own
            programs </li>
          
          <li><tt>Day</tt> encapsulates a day in a fixed location </li>
          
          <li>No time, no time zone </li>
          
          <li>Use Gregorian calendar </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Designing a Day Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-010.html"> [10/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Answer questions such as 
            
            <ul>
              
              <li>How many days are there between now and the end of the year? </li>
              
              <li>What day is 100 days from now?<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </li>
              
              
            </ul>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">Designing a Day Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-011.html"> [11/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_unf03.jpg" height="338" width="563"/><br/>
        
        <br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Designing a Day Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-012.html"> [12/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li> <tt>daysFrom</tt> computes number of days between two days:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">int n = today.daysFrom(birthday);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li> <tt>addDays</tt> computes a day that is some days away from a
            given day:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">Day later = today.addDays(999);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Mathematical relationship:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">d.addDays(n).daysFrom(d) == n<br xmlns="http://www.w3.org/1999/xhtml"/>d1.addDays(d2.daysFrom(d1)) == d2<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Clearer when written with "overloaded operators":<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">(d + n) - d == n<br xmlns="http://www.w3.org/1999/xhtml"/>d1 + (d2 - d1) == d2<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Constructor <tt>Date(int year, int month, int date)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li><tt>getYear</tt>, <tt>getMonth</tt>, <tt>getDate</tt> acccesors<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Implementing a Day Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-013.html"> [13/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Straightforward implementation:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">private int year<br xmlns="http://www.w3.org/1999/xhtml"/>private int month<br xmlns="http://www.w3.org/1999/xhtml"/>private int date<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li><tt>addDays</tt>/<tt>daysBetween</tt> tedious to implement 
            
            <ul>
              
              <li>April, June, September, November have 30 days </li>
              
              <li>February has 28 days, except in leap years it has 29 days </li>
              
              <li>All other months have 31 days </li>
              
              <li>Leap years are divisible by 4, except after 1582, years
                divisible by 100 but not 400 are not leap years </li>
              
              <li>There is no year 0; year 1 is preceded by year -1 </li>
              
              <li>In the switchover to the Gregorian calendar, ten days were
                dropped: October 15, 1582 is preceded by October 4 </li>
              
              
            </ul>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Implementing a Day Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-014.html"> [14/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Note private helper methods </li>
          
          <li>Computations are inefficient: a day at a time </li>
          
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch03_day1/Day_java.html">file:horstmann/ch03_day1/Day.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch03_day1/Day.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch03_day1/Day.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch03_day1/Day.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch03_day1<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Day</span>
<span style="color: #000000">00003:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a day with a given year, month, and day</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">      of the Julian/Gregorian calendar. The Julian calendar</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">      is used for all days before October 15, 1582</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aYear a year != 0</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMonth a month between 1 and 12</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aDate a date between 1 and 31</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aYear<span style="color: #990000">,</span> <span style="color: #009900">int</span> aMonth<span style="color: #990000">,</span> <span style="color: #009900">int</span> aDate<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       year <span style="color: #990000">=</span> aYear<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>       month <span style="color: #990000">=</span> aMonth<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>       date <span style="color: #990000">=</span> aDate<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the year of this day</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the year</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00023:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getYear</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> year<span style="color: #990000">;</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the month of this day</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the month</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00032:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getMonth</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00033:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> month<span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> 
<span style="color: #000000">00037:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the day of the month of this day</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the day of the month</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00041:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getDate</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> date<span style="color: #990000">;</span>
<span style="color: #000000">00044:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span> 
<span style="color: #000000">00046:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns a day that is a certain number of days away from</span></span>
<span style="color: #000000">00048:</span> <span style="font-style: italic"><span style="color: #9A1900">      this day</span></span>
<span style="color: #000000">00049:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> n the number of days, can be negative</span></span>
<span style="color: #000000">00050:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a day that is n days away from this one</span></span>
<span style="color: #000000">00051:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00052:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Day</span> <span style="font-weight: bold"><span style="color: #000000">addDays</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> n<span style="color: #990000">)</span>
<span style="color: #000000">00053:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00054:</span>       <span style="color: #008080">Day</span> result <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00055:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>n <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00056:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00057:</span>          result <span style="color: #990000">=</span> result<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextDay</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00058:</span>          n<span style="color: #990000">--;</span>
<span style="color: #000000">00059:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00060:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>n <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00061:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00062:</span>          result <span style="color: #990000">=</span> result<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">previousDay</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00063:</span>          n<span style="color: #990000">++;</span>
<span style="color: #000000">00064:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00065:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> result<span style="color: #990000">;</span>
<span style="color: #000000">00066:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00067:</span> 
<span style="color: #000000">00068:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00069:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the number of days between this day and another</span></span>
<span style="color: #000000">00070:</span> <span style="font-style: italic"><span style="color: #9A1900">      day</span></span>
<span style="color: #000000">00071:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> other the other day</span></span>
<span style="color: #000000">00072:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the number of days that this day is away from </span></span>
<span style="color: #000000">00073:</span> <span style="font-style: italic"><span style="color: #9A1900">      the other (&gt;0 if this day comes later)</span></span>
<span style="color: #000000">00074:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00075:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">daysFrom</span></span><span style="color: #990000">(</span><span style="color: #008080">Day</span> other<span style="color: #990000">)</span>
<span style="color: #000000">00076:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00077:</span>       <span style="color: #009900">int</span> n <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00078:</span>       <span style="color: #008080">Day</span> d <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00079:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span>other<span style="color: #990000">)</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00080:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00081:</span>          d <span style="color: #990000">=</span> d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">previousDay</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00082:</span>          n<span style="color: #990000">++;</span>
<span style="color: #000000">00083:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00084:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span>other<span style="color: #990000">)</span> <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00085:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00086:</span>          d <span style="color: #990000">=</span> d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextDay</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00087:</span>          n<span style="color: #990000">--;</span>
<span style="color: #000000">00088:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00089:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> n<span style="color: #990000">;</span>
<span style="color: #000000">00090:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00091:</span> 
<span style="color: #000000">00092:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00093:</span> <span style="font-style: italic"><span style="color: #9A1900">      Compares this day with another day.</span></span>
<span style="color: #000000">00094:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> other the other day</span></span>
<span style="color: #000000">00095:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a positive number if this day comes after the</span></span>
<span style="color: #000000">00096:</span> <span style="font-style: italic"><span style="color: #9A1900">      other day, a negative number if this day comes before</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">      the other day, and zero if the days are the same</span></span>
<span style="color: #000000">00098:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00099:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span><span style="color: #008080">Day</span> other<span style="color: #990000">)</span>
<span style="color: #000000">00100:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&gt;</span> other<span style="color: #990000">.</span>year<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00102:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;</span> other<span style="color: #990000">.</span>year<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00103:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> other<span style="color: #990000">.</span>month<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00104:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&lt;</span> other<span style="color: #990000">.</span>month<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00105:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> date <span style="color: #990000">-</span> other<span style="color: #990000">.</span>date<span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00107:</span> 
<span style="color: #000000">00108:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00109:</span> <span style="font-style: italic"><span style="color: #9A1900">      Computes the next day.</span></span>
<span style="color: #000000">00110:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the day following this day</span></span>
<span style="color: #000000">00111:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00112:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Day</span> <span style="font-weight: bold"><span style="color: #000000">nextDay</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00113:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00114:</span>       <span style="color: #009900">int</span> y <span style="color: #990000">=</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00115:</span>       <span style="color: #009900">int</span> m <span style="color: #990000">=</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00116:</span>       <span style="color: #009900">int</span> d <span style="color: #990000">=</span> date<span style="color: #990000">;</span>
<span style="color: #000000">00117:</span> 
<span style="color: #000000">00118:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">==</span> GREGORIAN_START_YEAR
<span style="color: #000000">00119:</span>             <span style="color: #990000">&amp;&amp;</span> m <span style="color: #990000">==</span> GREGORIAN_START_MONTH
<span style="color: #000000">00120:</span>             <span style="color: #990000">&amp;&amp;</span> d <span style="color: #990000">==</span> JULIAN_END_DAY<span style="color: #990000">)</span>
<span style="color: #000000">00121:</span>          d <span style="color: #990000">=</span> GREGORIAN_START_DAY<span style="color: #990000">;</span>
<span style="color: #000000">00122:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>d <span style="color: #990000">&lt;</span> <span style="font-weight: bold"><span style="color: #000000">daysPerMonth</span></span><span style="color: #990000">(</span>y<span style="color: #990000">,</span> m<span style="color: #990000">))</span>
<span style="color: #000000">00123:</span>          d<span style="color: #990000">++;</span>
<span style="color: #000000">00124:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00125:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00126:</span>          d <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00127:</span>          m<span style="color: #990000">++;</span>
<span style="color: #000000">00128:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">&gt;</span> DECEMBER<span style="color: #990000">)</span> 
<span style="color: #000000">00129:</span>          <span style="color: #FF0000">{</span> 
<span style="color: #000000">00130:</span>             m <span style="color: #990000">=</span> JANUARY<span style="color: #990000">;</span> 
<span style="color: #000000">00131:</span>             y<span style="color: #990000">++;</span> 
<span style="color: #000000">00132:</span>             <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> y<span style="color: #990000">++;</span>
<span style="color: #000000">00133:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00134:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00135:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span>y<span style="color: #990000">,</span> m<span style="color: #990000">,</span> d<span style="color: #990000">);</span>
<span style="color: #000000">00136:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00137:</span> 
<span style="color: #000000">00138:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00139:</span> <span style="font-style: italic"><span style="color: #9A1900">      Computes the previous day.</span></span>
<span style="color: #000000">00140:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the day preceding this day</span></span>
<span style="color: #000000">00141:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00142:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Day</span> <span style="font-weight: bold"><span style="color: #000000">previousDay</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00143:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00144:</span>       <span style="color: #009900">int</span> y <span style="color: #990000">=</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00145:</span>       <span style="color: #009900">int</span> m <span style="color: #990000">=</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00146:</span>       <span style="color: #009900">int</span> d <span style="color: #990000">=</span> date<span style="color: #990000">;</span>
<span style="color: #000000">00147:</span> 
<span style="color: #000000">00148:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">==</span> GREGORIAN_START_YEAR
<span style="color: #000000">00149:</span>             <span style="color: #990000">&amp;&amp;</span> m <span style="color: #990000">==</span> GREGORIAN_START_MONTH
<span style="color: #000000">00150:</span>             <span style="color: #990000">&amp;&amp;</span> d <span style="color: #990000">==</span> GREGORIAN_START_DAY<span style="color: #990000">)</span>
<span style="color: #000000">00151:</span>          d <span style="color: #990000">=</span> JULIAN_END_DAY<span style="color: #990000">;</span>
<span style="color: #000000">00152:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>d <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">00153:</span>          d<span style="color: #990000">--;</span>
<span style="color: #000000">00154:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00155:</span>       <span style="color: #FF0000">{</span> 
<span style="color: #000000">00156:</span>          m<span style="color: #990000">--;</span>
<span style="color: #000000">00157:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">&lt;</span> JANUARY<span style="color: #990000">)</span> 
<span style="color: #000000">00158:</span>          <span style="color: #FF0000">{</span>             
<span style="color: #000000">00159:</span>             m <span style="color: #990000">=</span> DECEMBER<span style="color: #990000">;</span> 
<span style="color: #000000">00160:</span>             y<span style="color: #990000">--;</span> 
<span style="color: #000000">00161:</span>             <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> y<span style="color: #990000">--;</span>
<span style="color: #000000">00162:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00163:</span>          d <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">daysPerMonth</span></span><span style="color: #990000">(</span>y<span style="color: #990000">,</span> m<span style="color: #990000">);</span>
<span style="color: #000000">00164:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00165:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span>y<span style="color: #990000">,</span> m<span style="color: #990000">,</span> d<span style="color: #990000">);</span>
<span style="color: #000000">00166:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00167:</span> 
<span style="color: #000000">00168:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00169:</span> <span style="font-style: italic"><span style="color: #9A1900">      Gets the days in a given month</span></span>
<span style="color: #000000">00170:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> y the year</span></span>
<span style="color: #000000">00171:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> m the month</span></span>
<span style="color: #000000">00172:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the last day in the given month</span></span>
<span style="color: #000000">00173:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00174:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">daysPerMonth</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> y<span style="color: #990000">,</span> <span style="color: #009900">int</span> m<span style="color: #990000">)</span>
<span style="color: #000000">00175:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00176:</span>       <span style="color: #009900">int</span> days <span style="color: #990000">=</span> DAYS_PER_MONTH<span style="color: #990000">[</span>m <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">];</span>
<span style="color: #000000">00177:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">==</span> FEBRUARY <span style="color: #990000">&amp;&amp;</span> <span style="font-weight: bold"><span style="color: #000000">isLeapYear</span></span><span style="color: #990000">(</span>y<span style="color: #990000">))</span> 
<span style="color: #000000">00178:</span>          days<span style="color: #990000">++;</span>
<span style="color: #000000">00179:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> days<span style="color: #990000">;</span>
<span style="color: #000000">00180:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00181:</span> 
<span style="color: #000000">00182:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00183:</span> <span style="font-style: italic"><span style="color: #9A1900">      Tests if a year is a leap year</span></span>
<span style="color: #000000">00184:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> y the year</span></span>
<span style="color: #000000">00185:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> true if y is a leap year</span></span>
<span style="color: #000000">00186:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00187:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isLeapYear</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> y<span style="color: #990000">)</span>
<span style="color: #000000">00188:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00189:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">%</span> <span style="color: #993399">4</span> <span style="color: #990000">!=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00190:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">&lt;</span> GREGORIAN_START_YEAR<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00191:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>y <span style="color: #990000">%</span> <span style="color: #993399">100</span> <span style="color: #990000">!=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">||</span> <span style="color: #990000">(</span>y <span style="color: #990000">%</span> <span style="color: #993399">400</span> <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00192:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00193:</span> 
<span style="color: #000000">00194:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00195:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00196:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> date<span style="color: #990000">;</span>
<span style="color: #000000">00197:</span> 
<span style="color: #000000">00198:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> DAYS_PER_MONTH 
<span style="color: #000000">00199:</span>          <span style="color: #990000">=</span> <span style="color: #FF0000">{</span> <span style="color: #993399">31</span><span style="color: #990000">,</span> <span style="color: #993399">28</span><span style="color: #990000">,</span> <span style="color: #993399">31</span><span style="color: #990000">,</span> <span style="color: #993399">30</span><span style="color: #990000">,</span> <span style="color: #993399">31</span><span style="color: #990000">,</span> <span style="color: #993399">30</span><span style="color: #990000">,</span> <span style="color: #993399">31</span><span style="color: #990000">,</span> <span style="color: #993399">31</span><span style="color: #990000">,</span> <span style="color: #993399">30</span><span style="color: #990000">,</span> <span style="color: #993399">31</span><span style="color: #990000">,</span> <span style="color: #993399">30</span><span style="color: #990000">,</span> <span style="color: #993399">31</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00200:</span> 
<span style="color: #000000">00201:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> GREGORIAN_START_YEAR <span style="color: #990000">=</span> <span style="color: #993399">1582</span><span style="color: #990000">;</span>
<span style="color: #000000">00202:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> GREGORIAN_START_MONTH <span style="color: #990000">=</span> <span style="color: #993399">10</span><span style="color: #990000">;</span>
<span style="color: #000000">00203:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> GREGORIAN_START_DAY <span style="color: #990000">=</span> <span style="color: #993399">15</span><span style="color: #990000">;</span>
<span style="color: #000000">00204:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> JULIAN_END_DAY <span style="color: #990000">=</span> <span style="color: #993399">4</span><span style="color: #990000">;</span>
<span style="color: #000000">00205:</span> 
<span style="color: #000000">00206:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> JANUARY <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00207:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> FEBRUARY <span style="color: #990000">=</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #000000">00208:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DECEMBER <span style="color: #990000">=</span> <span style="color: #993399">12</span><span style="color: #990000">;</span>
<span style="color: #000000">00209:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00210:</span> 
<span style="color: #000000">00211:</span> 
<span style="color: #000000">00212:</span> 
<span style="color: #000000">00213:</span> 
<span style="color: #000000">00214:</span> 
<span style="color: #000000">00215:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch03_day1/DayTester_java.html">file:horstmann/ch03_day1/DayTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch03_day1/DayTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch03_day1/DayTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch03_day1/DayTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch03_day1<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">DayTester</span>
<span style="color: #000000">00003:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00005:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>       <span style="color: #008080">Day</span> today <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #993399">2001</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// February 3, 2001</span></span>
<span style="color: #000000">00007:</span>       <span style="color: #008080">Day</span> later <span style="color: #990000">=</span> today<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addDays</span></span><span style="color: #990000">(</span><span style="color: #993399">999</span><span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>later<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getYear</span></span><span style="color: #990000">()</span> 
<span style="color: #000000">00009:</span>             <span style="color: #990000">+</span> <span style="color: #FF0000">"-"</span> <span style="color: #990000">+</span> later<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getMonth</span></span><span style="color: #990000">()</span> 
<span style="color: #000000">00010:</span>             <span style="color: #990000">+</span> <span style="color: #FF0000">"-"</span> <span style="color: #990000">+</span> later<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getDate</span></span><span style="color: #990000">());</span> 
<span style="color: #000000">00011:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>later<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">daysFrom</span></span><span style="color: #990000">(</span>today<span style="color: #990000">));</span> <span style="font-style: italic"><span style="color: #9A1900">// Prints 999</span></span>
<span style="color: #000000">00012:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">Second Implementation</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-015.html"> [15/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>For greater efficiency, use Julian day number </li>
          
          <li>Used in astronomy </li>
          
          <li>Number of days since Jan. 1, 4713 BCE </li>
          
          <li>May 23, 1968 = Julian Day 2,440,000 </li>
          
          <li>Greatly simplifies date arithmetic </li>
          
          
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch03_day2/Day_java.html">file:horstmann/ch03_day2/Day.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch03_day2/Day.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch03_day2/Day.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch03_day2/Day.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch03_day2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Day</span>
<span style="color: #000000">00003:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a day with a given year, month, and day</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">      of the Julian/Gregorian calendar. The Julian calendar</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">      is used for all days before October 15, 1582</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aYear a year != 0</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMonth a month between 1 and 12</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aDate a date between 1 and 31</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aYear<span style="color: #990000">,</span> <span style="color: #009900">int</span> aMonth<span style="color: #990000">,</span> <span style="color: #009900">int</span> aDate<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       julian <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">toJulian</span></span><span style="color: #990000">(</span>aYear<span style="color: #990000">,</span> aMonth<span style="color: #990000">,</span> aDate<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00018:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the year of this day</span></span>
<span style="color: #000000">00019:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the year</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00021:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getYear</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00022:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">)[</span><span style="color: #993399">0</span><span style="color: #990000">];</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> 
<span style="color: #000000">00026:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00027:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the month of this day</span></span>
<span style="color: #000000">00028:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the month</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00030:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getMonth</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00031:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">)[</span><span style="color: #993399">1</span><span style="color: #990000">];</span>
<span style="color: #000000">00033:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> 
<span style="color: #000000">00035:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00036:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the day of the month of this day</span></span>
<span style="color: #000000">00037:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the day of the month</span></span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00039:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getDate</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00040:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">)[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span> 
<span style="color: #000000">00044:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00045:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns a day that is a certain number of days away from</span></span>
<span style="color: #000000">00046:</span> <span style="font-style: italic"><span style="color: #9A1900">      this day</span></span>
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> n the number of days, can be negative</span></span>
<span style="color: #000000">00048:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a day that is n days away from this one</span></span>
<span style="color: #000000">00049:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00050:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Day</span> <span style="font-weight: bold"><span style="color: #000000">addDays</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> n<span style="color: #990000">)</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00052:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span>julian <span style="color: #990000">+</span> n<span style="color: #990000">);</span>
<span style="color: #000000">00053:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00054:</span> 
<span style="color: #000000">00055:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00056:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the number of days between this day and another day.</span></span>
<span style="color: #000000">00057:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> other the other day</span></span>
<span style="color: #000000">00058:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the number of days that this day is away from </span></span>
<span style="color: #000000">00059:</span> <span style="font-style: italic"><span style="color: #9A1900">      the other (&gt;0 if this day comes later)</span></span>
<span style="color: #000000">00060:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00061:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">daysFrom</span></span><span style="color: #990000">(</span><span style="color: #008080">Day</span> other<span style="color: #990000">)</span>
<span style="color: #000000">00062:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00063:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> julian <span style="color: #990000">-</span> other<span style="color: #990000">.</span>julian<span style="color: #990000">;</span>
<span style="color: #000000">00064:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00065:</span> 
<span style="color: #000000">00066:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aJulian<span style="color: #990000">)</span>
<span style="color: #000000">00067:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00068:</span>       julian <span style="color: #990000">=</span> aJulian<span style="color: #990000">;</span>
<span style="color: #000000">00069:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00070:</span> 
<span style="color: #000000">00071:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00072:</span> <span style="font-style: italic"><span style="color: #9A1900">      Computes the Julian day number of the given day.</span></span>
<span style="color: #000000">00073:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> year a year</span></span>
<span style="color: #000000">00074:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> month a month</span></span>
<span style="color: #000000">00075:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> date a day of the month</span></span>
<span style="color: #000000">00076:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> The Julian day number that begins at noon of </span></span>
<span style="color: #000000">00077:</span> <span style="font-style: italic"><span style="color: #9A1900">      the given day</span></span>
<span style="color: #000000">00078:</span> <span style="font-style: italic"><span style="color: #9A1900">      Positive year signifies CE, negative year BCE. </span></span>
<span style="color: #000000">00079:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remember that the year after 1 BCE was 1 CE.</span></span>
<span style="color: #000000">00080:</span> 
<span style="color: #000000">00081:</span> <span style="font-style: italic"><span style="color: #9A1900">      A convenient reference point is that May 23, 1968 noon</span></span>
<span style="color: #000000">00082:</span> <span style="font-style: italic"><span style="color: #9A1900">      is Julian day number 2440000.</span></span>
<span style="color: #000000">00083:</span> 
<span style="color: #000000">00084:</span> <span style="font-style: italic"><span style="color: #9A1900">      Julian day number 0 is a Monday.</span></span>
<span style="color: #000000">00085:</span> 
<span style="color: #000000">00086:</span> <span style="font-style: italic"><span style="color: #9A1900">      This algorithm is from Press et al., Numerical Recipes</span></span>
<span style="color: #000000">00087:</span> <span style="font-style: italic"><span style="color: #9A1900">      in C, 2nd ed., Cambridge University Press 1992</span></span>
<span style="color: #000000">00088:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00089:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">toJulian</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> year<span style="color: #990000">,</span> <span style="color: #009900">int</span> month<span style="color: #990000">,</span> <span style="color: #009900">int</span> date<span style="color: #990000">)</span>
<span style="color: #000000">00090:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00091:</span>       <span style="color: #009900">int</span> jy <span style="color: #990000">=</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00092:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> jy<span style="color: #990000">++;</span>
<span style="color: #000000">00093:</span>       <span style="color: #009900">int</span> jm <span style="color: #990000">=</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00094:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> jm<span style="color: #990000">++;</span>
<span style="color: #000000">00095:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00096:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00097:</span>          jy<span style="color: #990000">--;</span>
<span style="color: #000000">00098:</span>          jm <span style="color: #990000">+=</span> <span style="color: #993399">13</span><span style="color: #990000">;</span>
<span style="color: #000000">00099:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00100:</span>       <span style="color: #009900">int</span> jul <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">floor</span></span><span style="color: #990000">(</span><span style="color: #993399">365.25</span> <span style="color: #990000">*</span> jy<span style="color: #990000">)</span> 
<span style="color: #000000">00101:</span>             <span style="color: #990000">+</span> java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">floor</span></span><span style="color: #990000">(</span><span style="color: #993399">30.6001</span> <span style="color: #990000">*</span> jm<span style="color: #990000">)</span> <span style="color: #990000">+</span> date <span style="color: #990000">+</span> <span style="color: #993399">1720995.0</span><span style="color: #990000">);</span>
<span style="color: #000000">00102:</span> 
<span style="color: #000000">00103:</span>       <span style="color: #009900">int</span> IGREG <span style="color: #990000">=</span> <span style="color: #993399">15</span> <span style="color: #990000">+</span> <span style="color: #993399">31</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span><span style="color: #993399">10</span> <span style="color: #990000">+</span> <span style="color: #993399">12</span> <span style="color: #990000">*</span> <span style="color: #993399">1582</span><span style="color: #990000">);</span>
<span style="color: #000000">00104:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Gregorian Calendar adopted Oct. 15, 1582</span></span>
<span style="color: #000000">00105:</span> 
<span style="color: #000000">00106:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>date <span style="color: #990000">+</span> <span style="color: #993399">31</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span>month <span style="color: #990000">+</span> <span style="color: #993399">12</span> <span style="color: #990000">*</span> year<span style="color: #990000">)</span> <span style="color: #990000">&gt;=</span> IGREG<span style="color: #990000">)</span>
<span style="color: #000000">00107:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Change over to Gregorian calendar</span></span>
<span style="color: #000000">00108:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00109:</span>          <span style="color: #009900">int</span> ja <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.01</span> <span style="color: #990000">*</span> jy<span style="color: #990000">);</span>
<span style="color: #000000">00110:</span>          jul <span style="color: #990000">+=</span> <span style="color: #993399">2</span> <span style="color: #990000">-</span> ja <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> ja<span style="color: #990000">);</span>
<span style="color: #000000">00111:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00112:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> jul<span style="color: #990000">;</span>
<span style="color: #000000">00113:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00114:</span> 
<span style="color: #000000">00115:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00116:</span> <span style="font-style: italic"><span style="color: #9A1900">      Converts a Julian day number to a calendar date.</span></span>
<span style="color: #000000">00117:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span>
<span style="color: #000000">00118:</span> <span style="font-style: italic"><span style="color: #9A1900">      This algorithm is from Press et al., Numerical Recipes</span></span>
<span style="color: #000000">00119:</span> <span style="font-style: italic"><span style="color: #9A1900">      in C, 2nd ed., Cambridge University Press 1992</span></span>
<span style="color: #000000">00120:</span> 
<span style="color: #000000">00121:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> j  the Julian day number</span></span>
<span style="color: #000000">00122:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> an array whose 0 entry is the year, 1 the month,</span></span>
<span style="color: #000000">00123:</span> <span style="font-style: italic"><span style="color: #9A1900">      and 2 the day of the month.</span></span>
<span style="color: #000000">00124:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00125:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">)</span>
<span style="color: #000000">00126:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00127:</span>       <span style="color: #009900">int</span> ja <span style="color: #990000">=</span> j<span style="color: #990000">;</span>
<span style="color: #000000">00128:</span>    
<span style="color: #000000">00129:</span>       <span style="color: #009900">int</span> JGREG <span style="color: #990000">=</span> <span style="color: #993399">2299161</span><span style="color: #990000">;</span>
<span style="color: #000000">00130:</span>          <span style="font-style: italic"><span style="color: #9A1900">// The Julian day number of the adoption of the Gregorian calendar    </span></span>
<span style="color: #000000">00131:</span> 
<span style="color: #000000">00132:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>j <span style="color: #990000">&gt;=</span> JGREG<span style="color: #990000">)</span>
<span style="color: #000000">00133:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Cross-over to Gregorian Calendar produces this correction</span></span>
<span style="color: #000000">00134:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00135:</span>          <span style="color: #009900">int</span> jalpha <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(((</span><span style="color: #009900">float</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>j <span style="color: #990000">-</span> <span style="color: #993399">1867216</span><span style="color: #990000">)</span> <span style="color: #990000">-</span> <span style="color: #993399">0.25</span><span style="color: #990000">)</span> 
<span style="color: #000000">00136:</span>              <span style="color: #990000">/</span> <span style="color: #993399">36524.25</span><span style="color: #990000">);</span>
<span style="color: #000000">00137:</span>          ja <span style="color: #990000">+=</span> <span style="color: #993399">1</span> <span style="color: #990000">+</span> jalpha <span style="color: #990000">-</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> jalpha<span style="color: #990000">);</span>
<span style="color: #000000">00138:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00139:</span>       <span style="color: #009900">int</span> jb <span style="color: #990000">=</span> ja <span style="color: #990000">+</span> <span style="color: #993399">1524</span><span style="color: #990000">;</span>
<span style="color: #000000">00140:</span>       <span style="color: #009900">int</span> jc <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">6680.0</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span><span style="color: #009900">float</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>jb <span style="color: #990000">-</span> <span style="color: #993399">2439870</span><span style="color: #990000">)</span> <span style="color: #990000">-</span> <span style="color: #993399">122.1</span><span style="color: #990000">)</span>
<span style="color: #000000">00141:</span>           <span style="color: #990000">/</span> <span style="color: #993399">365.25</span><span style="color: #990000">);</span>
<span style="color: #000000">00142:</span>       <span style="color: #009900">int</span> jd <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">365</span> <span style="color: #990000">*</span> jc <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> jc<span style="color: #990000">));</span>
<span style="color: #000000">00143:</span>       <span style="color: #009900">int</span> je <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">((</span>jb <span style="color: #990000">-</span> jd<span style="color: #990000">)</span> <span style="color: #990000">/</span> <span style="color: #993399">30.6001</span><span style="color: #990000">);</span>
<span style="color: #000000">00144:</span>       <span style="color: #009900">int</span> date <span style="color: #990000">=</span> jb <span style="color: #990000">-</span> jd <span style="color: #990000">-</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">30.6001</span> <span style="color: #990000">*</span> je<span style="color: #990000">);</span>
<span style="color: #000000">00145:</span>       <span style="color: #009900">int</span> month <span style="color: #990000">=</span> je <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00146:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">12</span><span style="color: #990000">)</span> month <span style="color: #990000">-=</span> <span style="color: #993399">12</span><span style="color: #990000">;</span>
<span style="color: #000000">00147:</span>       <span style="color: #009900">int</span> year <span style="color: #990000">=</span> jc <span style="color: #990000">-</span> <span style="color: #993399">4715</span><span style="color: #990000">;</span>
<span style="color: #000000">00148:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> <span style="color: #990000">--</span>year<span style="color: #990000">;</span>
<span style="color: #000000">00149:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">--</span>year<span style="color: #990000">;</span>
<span style="color: #000000">00150:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> <span style="color: #FF0000">{</span> year<span style="color: #990000">,</span> month<span style="color: #990000">,</span> date <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00151:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00152:</span> 
<span style="color: #000000">00153:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> julian<span style="color: #990000">;</span>
<span style="color: #000000">00154:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00155:</span> 
<span style="color: #000000">00156:</span> 
<span style="color: #000000">00157:</span> 
<span style="color: #000000">00158:</span> 
<span style="color: #000000">00159:</span> 
<span style="color: #000000">00160:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">Third Implementation</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-016.html"> [16/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Now constructor, accessors are inefficient </li>
          
          <li>Best of both worlds: Cache known Julian, y/m/d values </li>
          
          
          <li>Which implementation is best? </li>
          
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch03_day3/Day_java.html">file:horstmann/ch03_day3/Day.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch03_day3/Day.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch03_day3/Day.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch03_day3/Day.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch03_day3<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Day</span>
<span style="color: #000000">00003:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a day with a given year, month, and day</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">      of the Julian/Gregorian calendar. The Julian calendar</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">      is used for all days before October 15, 1582</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aYear a year != 0</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMonth a month between 1 and 12</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aDate a date between 1 and 31</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aYear<span style="color: #990000">,</span> <span style="color: #009900">int</span> aMonth<span style="color: #990000">,</span> <span style="color: #009900">int</span> aDate<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       year <span style="color: #990000">=</span> aYear<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>       month <span style="color: #990000">=</span> aMonth<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>       date <span style="color: #990000">=</span> aDate<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>       ymdValid <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>       julianValid <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the year of this day</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the year</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getYear</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureYmd</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00028:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> year<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span> 
<span style="color: #000000">00031:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the month of this day</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the month</span></span>
<span style="color: #000000">00034:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00035:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getMonth</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00036:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureYmd</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00038:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> month<span style="color: #990000">;</span>
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the day of the month of this day</span></span>
<span style="color: #000000">00043:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the day of the month</span></span>
<span style="color: #000000">00044:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00045:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getDate</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00046:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureYmd</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00048:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> date<span style="color: #990000">;</span>
<span style="color: #000000">00049:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span> 
<span style="color: #000000">00051:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00052:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns a day that is a certain number of days away from</span></span>
<span style="color: #000000">00053:</span> <span style="font-style: italic"><span style="color: #9A1900">      this day</span></span>
<span style="color: #000000">00054:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> n the number of days, can be negative</span></span>
<span style="color: #000000">00055:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a day that is n days away from this one</span></span>
<span style="color: #000000">00056:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00057:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Day</span> <span style="font-weight: bold"><span style="color: #000000">addDays</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> n<span style="color: #990000">)</span>
<span style="color: #000000">00058:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureJulian</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00060:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span>julian <span style="color: #990000">+</span> n<span style="color: #990000">);</span>
<span style="color: #000000">00061:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00062:</span> 
<span style="color: #000000">00063:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00064:</span> <span style="font-style: italic"><span style="color: #9A1900">      Returns the number of days between this day and another</span></span>
<span style="color: #000000">00065:</span> <span style="font-style: italic"><span style="color: #9A1900">      day</span></span>
<span style="color: #000000">00066:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> other the other day</span></span>
<span style="color: #000000">00067:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the number of days that this day is away from </span></span>
<span style="color: #000000">00068:</span> <span style="font-style: italic"><span style="color: #9A1900">      the other (&gt;0 if this day comes later)</span></span>
<span style="color: #000000">00069:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00070:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">daysFrom</span></span><span style="color: #990000">(</span><span style="color: #008080">Day</span> other<span style="color: #990000">)</span>
<span style="color: #000000">00071:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00072:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureJulian</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00073:</span>       other<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ensureJulian</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00074:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> julian <span style="color: #990000">-</span> other<span style="color: #990000">.</span>julian<span style="color: #990000">;</span>
<span style="color: #000000">00075:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00076:</span> 
<span style="color: #000000">00077:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Day</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> aJulian<span style="color: #990000">)</span>
<span style="color: #000000">00078:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00079:</span>       julian <span style="color: #990000">=</span> aJulian<span style="color: #990000">;</span>
<span style="color: #000000">00080:</span>       ymdValid <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00081:</span>       julianValid <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00082:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00083:</span> 
<span style="color: #000000">00084:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00085:</span> <span style="font-style: italic"><span style="color: #9A1900">      Computes the Julian day number of this day if </span></span>
<span style="color: #000000">00086:</span> <span style="font-style: italic"><span style="color: #9A1900">      necessary</span></span>
<span style="color: #000000">00087:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00088:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">ensureJulian</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00089:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00090:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>julianValid<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00091:</span>       julian <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">toJulian</span></span><span style="color: #990000">(</span>year<span style="color: #990000">,</span> month<span style="color: #990000">,</span> date<span style="color: #990000">);</span>
<span style="color: #000000">00092:</span>       julianValid <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00093:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00094:</span> 
<span style="color: #000000">00095:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00096:</span> <span style="font-style: italic"><span style="color: #9A1900">      Converts this Julian day mumber to a calendar date if necessary.</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00098:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">ensureYmd</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00099:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00100:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>ymdValid<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00101:</span>       <span style="color: #009900">int</span><span style="color: #990000">[]</span> ymd <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span>julian<span style="color: #990000">);</span>
<span style="color: #000000">00102:</span>       year <span style="color: #990000">=</span> ymd<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">];</span>
<span style="color: #000000">00103:</span>       month <span style="color: #990000">=</span> ymd<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">];</span>
<span style="color: #000000">00104:</span>       date <span style="color: #990000">=</span> ymd<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00105:</span>       ymdValid <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00107:</span> 
<span style="color: #000000">00108:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00109:</span> <span style="font-style: italic"><span style="color: #9A1900">      Computes the Julian day number of the given day day.</span></span>
<span style="color: #000000">00110:</span> 
<span style="color: #000000">00111:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> year a year</span></span>
<span style="color: #000000">00112:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> month a month</span></span>
<span style="color: #000000">00113:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> date a day of the month</span></span>
<span style="color: #000000">00114:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> The Julian day number that begins at noon of </span></span>
<span style="color: #000000">00115:</span> <span style="font-style: italic"><span style="color: #9A1900">      the given day</span></span>
<span style="color: #000000">00116:</span> <span style="font-style: italic"><span style="color: #9A1900">      Positive year signifies CE, negative year BCE. </span></span>
<span style="color: #000000">00117:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remember that the year after 1 BCE is 1 CE.</span></span>
<span style="color: #000000">00118:</span> 
<span style="color: #000000">00119:</span> <span style="font-style: italic"><span style="color: #9A1900">      A convenient reference point is that May 23, 1968 noon</span></span>
<span style="color: #000000">00120:</span> <span style="font-style: italic"><span style="color: #9A1900">      is Julian day number 2440000.</span></span>
<span style="color: #000000">00121:</span> 
<span style="color: #000000">00122:</span> <span style="font-style: italic"><span style="color: #9A1900">      Julian day number 0 is a Monday.</span></span>
<span style="color: #000000">00123:</span> 
<span style="color: #000000">00124:</span> <span style="font-style: italic"><span style="color: #9A1900">      This algorithm is from Press et al., Numerical Recipes</span></span>
<span style="color: #000000">00125:</span> <span style="font-style: italic"><span style="color: #9A1900">      in C, 2nd ed., Cambridge University Press 1992</span></span>
<span style="color: #000000">00126:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00127:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">toJulian</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> year<span style="color: #990000">,</span> <span style="color: #009900">int</span> month<span style="color: #990000">,</span> <span style="color: #009900">int</span> date<span style="color: #990000">)</span>
<span style="color: #000000">00128:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00129:</span>       <span style="color: #009900">int</span> jy <span style="color: #990000">=</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00130:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> jy<span style="color: #990000">++;</span>
<span style="color: #000000">00131:</span>       <span style="color: #009900">int</span> jm <span style="color: #990000">=</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00132:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> jm<span style="color: #990000">++;</span>
<span style="color: #000000">00133:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00134:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00135:</span>          jy<span style="color: #990000">--;</span>
<span style="color: #000000">00136:</span>          jm <span style="color: #990000">+=</span> <span style="color: #993399">13</span><span style="color: #990000">;</span>
<span style="color: #000000">00137:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00138:</span>       <span style="color: #009900">int</span> jul <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">floor</span></span><span style="color: #990000">(</span><span style="color: #993399">365.25</span> <span style="color: #990000">*</span> jy<span style="color: #990000">)</span> 
<span style="color: #000000">00139:</span>             <span style="color: #990000">+</span> java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">floor</span></span><span style="color: #990000">(</span><span style="color: #993399">30.6001</span> <span style="color: #990000">*</span> jm<span style="color: #990000">)</span> <span style="color: #990000">+</span> date <span style="color: #990000">+</span> <span style="color: #993399">1720995.0</span><span style="color: #990000">);</span>
<span style="color: #000000">00140:</span> 
<span style="color: #000000">00141:</span>       <span style="color: #009900">int</span> IGREG <span style="color: #990000">=</span> <span style="color: #993399">15</span> <span style="color: #990000">+</span> <span style="color: #993399">31</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span><span style="color: #993399">10</span> <span style="color: #990000">+</span> <span style="color: #993399">12</span> <span style="color: #990000">*</span> <span style="color: #993399">1582</span><span style="color: #990000">);</span>
<span style="color: #000000">00142:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Gregorian Calendar adopted Oct. 15, 1582</span></span>
<span style="color: #000000">00143:</span> 
<span style="color: #000000">00144:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>date <span style="color: #990000">+</span> <span style="color: #993399">31</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span>month <span style="color: #990000">+</span> <span style="color: #993399">12</span> <span style="color: #990000">*</span> year<span style="color: #990000">)</span> <span style="color: #990000">&gt;=</span> IGREG<span style="color: #990000">)</span>
<span style="color: #000000">00145:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Change over to Gregorian calendar</span></span>
<span style="color: #000000">00146:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00147:</span>          <span style="color: #009900">int</span> ja <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.01</span> <span style="color: #990000">*</span> jy<span style="color: #990000">);</span>
<span style="color: #000000">00148:</span>          jul <span style="color: #990000">+=</span> <span style="color: #993399">2</span> <span style="color: #990000">-</span> ja <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> ja<span style="color: #990000">);</span>
<span style="color: #000000">00149:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00150:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> jul<span style="color: #990000">;</span>
<span style="color: #000000">00151:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00152:</span> 
<span style="color: #000000">00153:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00154:</span> <span style="font-style: italic"><span style="color: #9A1900">      Converts a Julian day number to a calendar date.</span></span>
<span style="color: #000000">00155:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span>
<span style="color: #000000">00156:</span> <span style="font-style: italic"><span style="color: #9A1900">      This algorithm is from Press et al., Numerical Recipes</span></span>
<span style="color: #000000">00157:</span> <span style="font-style: italic"><span style="color: #9A1900">      in C, 2nd ed., Cambridge University Press 1992</span></span>
<span style="color: #000000">00158:</span> 
<span style="color: #000000">00159:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> j  the Julian day number</span></span>
<span style="color: #000000">00160:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> an array whose 0 entry is the year, 1 the month,</span></span>
<span style="color: #000000">00161:</span> <span style="font-style: italic"><span style="color: #9A1900">      and 2 the day of the month.</span></span>
<span style="color: #000000">00162:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00163:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> <span style="font-weight: bold"><span style="color: #000000">fromJulian</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">)</span>
<span style="color: #000000">00164:</span>    <span style="color: #FF0000">{</span>  
<span style="color: #000000">00165:</span>       <span style="color: #009900">int</span> ja <span style="color: #990000">=</span> j<span style="color: #990000">;</span>
<span style="color: #000000">00166:</span>    
<span style="color: #000000">00167:</span>       <span style="color: #009900">int</span> JGREG <span style="color: #990000">=</span> <span style="color: #993399">2299161</span><span style="color: #990000">;</span>
<span style="color: #000000">00168:</span>          <span style="font-style: italic"><span style="color: #9A1900">// The Julian day number of the adoption of the Gregorian calendar    </span></span>
<span style="color: #000000">00169:</span> 
<span style="color: #000000">00170:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>j <span style="color: #990000">&gt;=</span> JGREG<span style="color: #990000">)</span>
<span style="color: #000000">00171:</span>          <span style="font-style: italic"><span style="color: #9A1900">// Cross-over to Gregorian Calendar produces this correction</span></span>
<span style="color: #000000">00172:</span>       <span style="color: #FF0000">{</span>  
<span style="color: #000000">00173:</span>          <span style="color: #009900">int</span> jalpha <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(((</span><span style="color: #009900">float</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>j <span style="color: #990000">-</span> <span style="color: #993399">1867216</span><span style="color: #990000">)</span> <span style="color: #990000">-</span> <span style="color: #993399">0.25</span><span style="color: #990000">)</span> 
<span style="color: #000000">00174:</span>              <span style="color: #990000">/</span> <span style="color: #993399">36524.25</span><span style="color: #990000">);</span>
<span style="color: #000000">00175:</span>          ja <span style="color: #990000">+=</span> <span style="color: #993399">1</span> <span style="color: #990000">+</span> jalpha <span style="color: #990000">-</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> jalpha<span style="color: #990000">);</span>
<span style="color: #000000">00176:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00177:</span>       <span style="color: #009900">int</span> jb <span style="color: #990000">=</span> ja <span style="color: #990000">+</span> <span style="color: #993399">1524</span><span style="color: #990000">;</span>
<span style="color: #000000">00178:</span>       <span style="color: #009900">int</span> jc <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">6680.0</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span><span style="color: #009900">float</span><span style="color: #990000">)</span> <span style="color: #990000">(</span>jb <span style="color: #990000">-</span> <span style="color: #993399">2439870</span><span style="color: #990000">)</span> <span style="color: #990000">-</span> <span style="color: #993399">122.1</span><span style="color: #990000">)</span>
<span style="color: #000000">00179:</span>           <span style="color: #990000">/</span> <span style="color: #993399">365.25</span><span style="color: #990000">);</span>
<span style="color: #000000">00180:</span>       <span style="color: #009900">int</span> jd <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">365</span> <span style="color: #990000">*</span> jc <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #993399">0.25</span> <span style="color: #990000">*</span> jc<span style="color: #990000">));</span>
<span style="color: #000000">00181:</span>       <span style="color: #009900">int</span> je <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">((</span>jb <span style="color: #990000">-</span> jd<span style="color: #990000">)</span> <span style="color: #990000">/</span> <span style="color: #993399">30.6001</span><span style="color: #990000">);</span>
<span style="color: #000000">00182:</span>       <span style="color: #009900">int</span> date <span style="color: #990000">=</span> jb <span style="color: #990000">-</span> jd <span style="color: #990000">-</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> <span style="color: #990000">(</span><span style="color: #993399">30.6001</span> <span style="color: #990000">*</span> je<span style="color: #990000">);</span>
<span style="color: #000000">00183:</span>       <span style="color: #009900">int</span> month <span style="color: #990000">=</span> je <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00184:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">12</span><span style="color: #990000">)</span> month <span style="color: #990000">-=</span> <span style="color: #993399">12</span><span style="color: #990000">;</span>
<span style="color: #000000">00185:</span>       <span style="color: #009900">int</span> year <span style="color: #990000">=</span> jc <span style="color: #990000">-</span> <span style="color: #993399">4715</span><span style="color: #990000">;</span>
<span style="color: #000000">00186:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>month <span style="color: #990000">&gt;</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> <span style="color: #990000">--</span>year<span style="color: #990000">;</span>
<span style="color: #000000">00187:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">--</span>year<span style="color: #990000">;</span>
<span style="color: #000000">00188:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> <span style="color: #FF0000">{</span> year<span style="color: #990000">,</span> month<span style="color: #990000">,</span> date <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00189:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00190:</span> 
<span style="color: #000000">00191:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> year<span style="color: #990000">;</span>
<span style="color: #000000">00192:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> month<span style="color: #990000">;</span>
<span style="color: #000000">00193:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> date<span style="color: #990000">;</span>
<span style="color: #000000">00194:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> julian<span style="color: #990000">;</span>
<span style="color: #000000">00195:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> ymdValid<span style="color: #990000">;</span>
<span style="color: #000000">00196:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> julianValid<span style="color: #990000">;</span>
<span style="color: #000000">00197:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00198:</span> 
<span style="color: #000000">00199:</span> 
<span style="color: #000000">00200:</span> 
<span style="color: #000000">00201:</span> 
<span style="color: #000000">00202:</span> 
<span style="color: #000000">00203:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">The Importance of Encapsulation</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-017.html"> [17/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Even a simple class can benefit from different implementations </li>
          
          <li>Users are unaware of implementation </li>
          
          <li>Public instance variables would have blocked improvement 
            
            <ul>
              
              <li>Can't just use text editor to replace all<br xmlns="http://www.w3.org/1999/xhtml"/>
                
                
                <pre xml:space="preserve">d.year<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
                with<br xmlns="http://www.w3.org/1999/xhtml"/>
                
                
                <pre xml:space="preserve">d.getYear()<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
              </li>
              
              <li>How about<br xmlns="http://www.w3.org/1999/xhtml"/>
                
                
                <pre xml:space="preserve">d.year++?<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
              </li>
              
              <li>
                
                <pre xml:space="preserve">d = new Day(d.getDay(), d.getMonth(), d.getYear() + 1)<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
              </li>
              
              <li>Ugh--that gets really inefficient in Julian representation </li>
              
              
            </ul>
            
          </li>
          
          <li>Don't use public fields, even for "simple" classes </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">Accessors and Mutators</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-018.html"> [18/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Mutator: Changes object state </li>
          
          <li>Accessor: Reads object state without changing it </li>
          
          <li><tt>Day</tt> class has no mutators! </li>
          
          <li>Class without mutators is <i>immutable</i> </li>
          
          <li><tt>String</tt> is immutable </li>
          
          <li><tt>Date</tt> and <tt>GregorianCalendar</tt> are mutable </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Don't Supply a Mutator for every Accessor</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-019.html"> [19/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li><tt>Day</tt> has <tt>getYear</tt>, <tt>getMonth</tt>, <tt>getDate</tt>
            accessors </li>
          
          <li><tt>Day</tt> does <i>not</i> have <tt>setYear</tt>, <tt>setMonth</tt>,<tt>setDate</tt>
            mutators </li>
          
          <li>These mutators would not work well
            
            <ul>
              
              <li>Example:<br xmlns="http://www.w3.org/1999/xhtml"/>
                
                
                <pre xml:space="preserve">Day deadline = new Day(2001, 1, 31);<br xmlns="http://www.w3.org/1999/xhtml"/>deadline.setMonth(2); // ERROR<br xmlns="http://www.w3.org/1999/xhtml"/>deadline.setDate(28);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
              </li>
              
              <li>Maybe we should call <tt>setDate</tt> first?
                
                <pre xml:space="preserve">Day deadline = new Day(2001, 2, 28);<br xmlns="http://www.w3.org/1999/xhtml"/>deadline.setDate(31); // ERROR<br xmlns="http://www.w3.org/1999/xhtml"/>deadline.setMonth(3);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
              </li>
              
              
            </ul>
            
          </li>
          
          <li><tt>GregorianCalendar</tt> implements confusing <i>rollover. </i>
            
            <ul>
              
              <li>Silently gets the wrong result instead of error. </li>
              
              
            </ul>
            
          </li>
          
          <li>Immutability is useful<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">Sharing Mutable References</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-020.html"> [20/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>References to immutable objects can be freely shared </li>
          
          <li>Don't share mutable references </li>
          
          <li>Example<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">class Employee<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>   public String getName() { return name; }<br xmlns="http://www.w3.org/1999/xhtml"/>   public double getSalary() { return salary; }<br xmlns="http://www.w3.org/1999/xhtml"/>   public Date getHireDate() { return hireDate; }<br xmlns="http://www.w3.org/1999/xhtml"/>   private String name;<br xmlns="http://www.w3.org/1999/xhtml"/>   private double salary;<br xmlns="http://www.w3.org/1999/xhtml"/>   private Date hireDate;<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">Sharing Mutable References</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-021.html"> [21/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Pitfall:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">Employee harry = . . .;<br xmlns="http://www.w3.org/1999/xhtml"/>Date d = harry.getHireDate();<br xmlns="http://www.w3.org/1999/xhtml"/>d.setTime(t); // changes Harry's state!!!<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
        <ul xmlns="">
          
          <li>Remedy: Use clone<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">public Date getHireDate() <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   return (Date)hireDate.clone();<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">Sharing Mutable References</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-022.html"> [22/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_03.jpg" height="344" width="880"/><br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">Final Instance Fields</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-023.html"> [23/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Good idea to mark immutable instance fields as <tt>final<br xmlns="http://www.w3.org/1999/xhtml"/>
              
              private final int day;</tt> </li>
          
          <li><tt>final</tt> object reference can still refer to mutating object<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            <tt>private final ArrayList elements;</tt> </li>
          
          <li><tt>elements</tt> can't refer to another array list<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>The contents of the array list can change<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">Separating Accessors and Mutators</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-024.html"> [24/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>If we call a method to access an object, we don't expect the
            object to mutate<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Rule of thumb:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            Mutators should return <tt>void</tt> </li>
          
          <li>Example of violation: <br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">Scanner in = . . .;<br xmlns="http://www.w3.org/1999/xhtml"/>String s = in.next();<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Yields current token <i>and</i> advances iteration </li>
          
          <li>What if I want to read the current token again? </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">Separating Accessors and Mutators</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-025.html"> [25/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Better interface:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">String getCurrent();<br xmlns="http://www.w3.org/1999/xhtml"/>void next();<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Even more convenient:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">String getCurrent();<br xmlns="http://www.w3.org/1999/xhtml"/>String next(); // returns current<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Refine rule of thumb:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            Mutators can return a convenience value, provided there is also an
            accessor to get the same value </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide026">Side Effects</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-026.html"> [26/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Side effect of a method: any observable state change<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Mutator: changes implicit parameter<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Other side effects: change to
            
            <ul>
              
              <li>explicit parameter<br xmlns="http://www.w3.org/1999/xhtml"/>
                
              </li>
              
              <li>static object </li>
              
              
            </ul>
            
          </li>
          
          <li>Avoid these side effects--they confuse users </li>
          
          <li>Good example, no side effect beyond implicit parameter<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">a.addAll(b)<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
            mutates <tt>a</tt> but not <tt>b</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide027">Side Effects</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-027.html"> [27/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Date formatting (basic):<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">SimpleDateFormat formatter = . . .;<br xmlns="http://www.w3.org/1999/xhtml"/>String dateString = "January 11, 2012";<br xmlns="http://www.w3.org/1999/xhtml"/>Date d = formatter.parse(dateString);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Advanced:
            
            <pre xml:space="preserve">FieldPosition position = . . .;<br xmlns="http://www.w3.org/1999/xhtml"/>Date d = formatter.parse(dateString, position);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Side effect: updates <tt>position</tt> parameter<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Design could be better: add position to formatter state </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide028">Side Effects</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-028.html"> [28/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Avoid modifying static objects </li>
          
          <li>Example: <tt>System.out</tt> </li>
          
          <li>Don't print error messages to <tt>System.out</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">if (newMessages.isFull())<br xmlns="http://www.w3.org/1999/xhtml"/>   System.out.println("Sorry--no space");<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Your classes may need to run in an environment without <tt>System.out</tt>
          </li>
          
          <li>Rule of thumb: Minimize side effects beyond implicit parameter<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide029">Law of Demeter</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-029.html"> [29/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Example: Mail system in chapter 2<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            <tt>Mailbox currentMailbox = mailSystem.findMailbox(...);</tt> </li>
          
          <li>Breaks encapsulation </li>
          
          <li>Suppose future version of <tt>MailSystem</tt> uses a database </li>
          
          <li>Then it no longer has mailbox objects<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Common in larger systems </li>
          
          <li>Karl Lieberherr: Law of Demeter </li>
          
          <li>Demeter = Greek goddess of agriculture, sister of Zeus </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide030">Law of Demeter</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-030.html"> [30/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>The law: A method should only use objects that are
            
            <ul>
              
              <li>instance fields of its class </li>
              
              <li>parameters </li>
              
              <li>objects that it constructs with <tt>new</tt> </li>
              
              
            </ul>
            
          </li>
          
          <li>Shouldn't use an object that is returned from a method call </li>
          
          <li>Remedy in mail system: Delegate mailbox methods to mail system<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            <tt>mailSystem.getCurrentMessage(int mailboxNumber);<br xmlns="http://www.w3.org/1999/xhtml"/>
              
              mailSystem.addMessage(int mailboxNumber, Message msg);<br xmlns="http://www.w3.org/1999/xhtml"/>
              
              . . .</tt> </li>
          
          <li>Rule of thumb, not a mathematical law </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide031">Quality of Class Interface</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-031.html"> [31/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Customers: Programmers using the class </li>
          
          <li>Criteria: 
            
            <ul>
              
              <li>Cohesion </li>
              
              <li>Completeness </li>
              
              <li>Convenience </li>
              
              <li>Clarity </li>
              
              <li>Consistency </li>
              
              
            </ul>
            
          </li>
          
          <li>Engineering activity: make tradeoffs </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide032">Cohesion</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-032.html"> [32/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Class describes a <i>single</i> abstraction </li>
          
          <li>Methods should be related to the single abstraction </li>
          
          <li>Bad example:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">public class Mailbox <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public addMessage(Message aMessage) { ... } <br xmlns="http://www.w3.org/1999/xhtml"/>   public Message getCurrentMessage() { ... } <br xmlns="http://www.w3.org/1999/xhtml"/>   public Message removeCurrentMessage() { ... } <br xmlns="http://www.w3.org/1999/xhtml"/>   public void processCommand(String command) { ... } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide033">Completeness</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-033.html"> [33/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Support operations that are well-defined on abstraction </li>
          
          <li>Potentially bad example: <tt>Date<br xmlns="http://www.w3.org/1999/xhtml"/>
              
            </tt>
            
            <pre xml:space="preserve">Date start = new Date();<br xmlns="http://www.w3.org/1999/xhtml"/>// do some work<br xmlns="http://www.w3.org/1999/xhtml"/>Date end = new Date();<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>How many milliseconds have elapsed? </li>
          
          <li>No such operation in <tt>Date</tt> class </li>
          
          <li>Does it fall outside the responsibility? </li>
          
          <li>After all, we have <tt>before</tt>, <tt>after</tt>, <tt>getTime</tt>
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide034">Convenience</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-034.html"> [34/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>A good interface makes all tasks possible . . . and common tasks
            simple </li>
          
          <li>Bad example: Reading from <tt>System.in</tt> before Java 5.0<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">BufferedReader in = new BufferedReader(new<br xmlns="http://www.w3.org/1999/xhtml"/>   InputStreamReader(System.in));<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Why doesn't <tt>System.in</tt> have a <tt>readLine</tt> method?
          </li>
          
          <li>After all, <tt>System.out</tt> has <tt>println</tt>. </li>
          
          <li><tt>Scanner</tt> class fixes inconvenience<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide035">Clarity</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-035.html"> [35/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Confused programmers write buggy code </li>
          
          <li>Bad example: Removing elements from <tt>LinkedList</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Reminder: Standard linked list class<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">LinkedList&lt;String&gt; countries = new LinkedList&lt;String&gt;(); <br xmlns="http://www.w3.org/1999/xhtml"/>countries.add("A"); <br xmlns="http://www.w3.org/1999/xhtml"/>countries.add("B"); <br xmlns="http://www.w3.org/1999/xhtml"/>countries.add("C"); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Iterate through list:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">ListIterator&lt;String&gt; iterator = countries.listIterator(); <br xmlns="http://www.w3.org/1999/xhtml"/>while (iterator.hasNext()) <br xmlns="http://www.w3.org/1999/xhtml"/>   System.out.println(iterator.next()); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide036">Clarity</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-036.html"> [36/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Iterator <i>between</i> elements </li>
          
          <li>Like blinking caret in word processor </li>
          
          <li><tt>add</tt> adds to the left of iterator (like word processor): </li>
          
          <li>Add X before B:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">ListIterator&lt;String&gt; iterator = countries.listIterator(); // |ABC <br xmlns="http://www.w3.org/1999/xhtml"/>iterator.next(); // A|BC <br xmlns="http://www.w3.org/1999/xhtml"/>iterator.add("France"); // AX|BC <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>To remove first two elements, you can't just "backspace" </li>
          
          <li><tt>remove</tt> does <i>not</i> remove element to the left of
            iterator </li>
          
          <li>From API documentation:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            Removes from the list the last element that was returned by next or
            previous. This call can only be made once per call to next or previous.
            It can be made only if add has not been called after the last call to
            next or previous. <br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Huh?<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide037">Consistency</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-037.html"> [37/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Related features of a class should have matching </li>
          
          <li>
            
            <ul>
              
              <li>names </li>
              
              <li>parameters </li>
              
              <li>return values </li>
              
              <li>behavior </li>
              
              
            </ul>
            
          </li>
          
          <li>Bad example:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">new GregorianCalendar(year, month - 1, day)<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Why is <tt>month</tt> 0-based? </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide038">Consistency</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-038.html"> [38/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Bad example: <tt>String</tt> class<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">s.equals(t) / s.equalsIgnoreCase(t)<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>But<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">boolean regionMatches(int toffset, <br xmlns="http://www.w3.org/1999/xhtml"/>   String other, int ooffset, int len) <br xmlns="http://www.w3.org/1999/xhtml"/>boolean regionMatches(boolean ignoreCase, int toffset, <br xmlns="http://www.w3.org/1999/xhtml"/>   String other, int ooffset, int len) <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Why not <tt>regionMatchesIgnoreCase</tt>? </li>
          
          <li>Very common problem in student code </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide039">Programming by Contract</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-039.html"> [39/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Spell out responsibilities 
            
            <ul>
              
              <li>of caller </li>
              
              <li>of implementor </li>
              
              
            </ul>
            
          </li>
          
          <li>Increase reliability </li>
          
          <li>Increase efficiency<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide040">Preconditions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-040.html"> [40/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Caller attempts to remove message from empty <tt>MessageQueue</tt>
          </li>
          
          <li>What should happen? </li>
          
          <li><tt>MessageQueue</tt> can declare this as an error </li>
          
          <li><tt>MessageQueue</tt> can tolerate call and return dummy value </li>
          
          <li>What is better? </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide041">Preconditions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-041.html"> [41/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Excessive error checking is costly </li>
          
          <li>Returning dummy values can complicate testing </li>
          
          <li>Contract metaphor
            
            <ul>
              
              <li>Service provider must <i>specify</i> preconditions </li>
              
              <li>If precondition is fulfilled, service provider must work
                correctly </li>
              
              <li>Otherwise, service provider can do <i>anything</i> </li>
              
              
            </ul>
            
          </li>
          
          <li>When precondition fails, service provider may 
            
            <ul>
              
              <li>throw exception </li>
              
              <li>return false answer </li>
              
              <li>corrupt data </li>
              
              
            </ul>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide042">Preconditions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-042.html"> [42/57] </a></span></td></tr></table><p> </p>
        
        <pre xmlns="" xml:space="preserve">/**<br xmlns="http://www.w3.org/1999/xhtml"/>   Remove message at head<br xmlns="http://www.w3.org/1999/xhtml"/>   @return the message at the head<br xmlns="http://www.w3.org/1999/xhtml"/>   @precondition size() &gt; 0<br xmlns="http://www.w3.org/1999/xhtml"/>*/<br xmlns="http://www.w3.org/1999/xhtml"/>Message remove()<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   return elements.remove(0);<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
        
        <ul xmlns="">
          
          <li>What happens if precondition not fulfilled? </li>
          
          <li><tt>IndexOutOfBoundsException</tt> </li>
          
          <li>Other implementation may have different behavior </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide043">Circular Array Implementation</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-043.html"> [43/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Efficient implementation of bounded queue </li>
          
          <li>Avoids inefficient shifting of elements </li>
          
          <li>Circular: head, tail indexes wrap around </li>
          
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch03_queue/MessageQueue_java.html">file:horstmann/ch03_queue/MessageQueue.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch03_queue/MessageQueue.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch03_queue/MessageQueue.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch03_queue/MessageQueue.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch03_queue<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">    A first-in, first-out bounded collection of messages. </span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span> 
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MessageQueue</span> 
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span> 
<span style="color: #000000">00007:</span>    <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">       Constructs an empty message queue. </span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> capacity the maximum capacity of the queue </span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@precondition</span><span style="font-style: italic"><span style="color: #9A1900"> capacity &gt; 0</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span> 
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> capacity<span style="color: #990000">)</span> 
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00014:</span>       elements <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Message<span style="color: #990000">[</span>capacity<span style="color: #990000">];</span> 
<span style="color: #000000">00015:</span>       count <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> 
<span style="color: #000000">00016:</span>       head <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> 
<span style="color: #000000">00017:</span>       tail <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> 
<span style="color: #000000">00018:</span>    <span style="color: #FF0000">}</span> 
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>    <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">       Remove message at head. </span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the message that has been removed from the queue</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@precondition</span><span style="font-style: italic"><span style="color: #9A1900"> size() &gt; 0 </span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span> 
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">()</span> 
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00027:</span>       <span style="color: #008080">Message</span> r <span style="color: #990000">=</span> elements<span style="color: #990000">[</span>head<span style="color: #990000">];</span> 
<span style="color: #000000">00028:</span>       head <span style="color: #990000">=</span> <span style="color: #990000">(</span>head <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">)</span> <span style="color: #990000">%</span> elements<span style="color: #990000">.</span>length<span style="color: #990000">;</span> 
<span style="color: #000000">00029:</span>       count<span style="color: #990000">--;</span> 
<span style="color: #000000">00030:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> r<span style="color: #990000">;</span> 
<span style="color: #000000">00031:</span>    <span style="color: #FF0000">}</span> 
<span style="color: #000000">00032:</span> 
<span style="color: #000000">00033:</span>    <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00034:</span> <span style="font-style: italic"><span style="color: #9A1900">       Append a message at tail. </span></span>
<span style="color: #000000">00035:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMessage the message to be appended </span></span>
<span style="color: #000000">00036:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@precondition</span><span style="font-style: italic"><span style="color: #9A1900"> !isFull();</span></span>
<span style="color: #000000">00037:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span> 
<span style="color: #000000">00038:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="color: #008080">Message</span> aMessage<span style="color: #990000">)</span> 
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00040:</span>       elements<span style="color: #990000">[</span>tail<span style="color: #990000">]</span> <span style="color: #990000">=</span> aMessage<span style="color: #990000">;</span> 
<span style="color: #000000">00041:</span>       tail <span style="color: #990000">=</span> <span style="color: #990000">(</span>tail <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">)</span> <span style="color: #990000">%</span> elements<span style="color: #990000">.</span>length<span style="color: #990000">;</span> 
<span style="color: #000000">00042:</span>       count<span style="color: #990000">++;</span> 
<span style="color: #000000">00043:</span>    <span style="color: #FF0000">}</span> 
<span style="color: #000000">00044:</span> 
<span style="color: #000000">00045:</span>    <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00046:</span> <span style="font-style: italic"><span style="color: #9A1900">       Get the total number of messages in the queue. </span></span>
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the total number of messages in the queue </span></span>
<span style="color: #000000">00048:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span> 
<span style="color: #000000">00049:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> 
<span style="color: #000000">00050:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00051:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> count<span style="color: #990000">;</span> 
<span style="color: #000000">00052:</span>    <span style="color: #FF0000">}</span> 
<span style="color: #000000">00053:</span> 
<span style="color: #000000">00054:</span>    <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00055:</span> <span style="font-style: italic"><span style="color: #9A1900">       Checks whether this queue is full</span></span>
<span style="color: #000000">00056:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> true if the queue is full</span></span>
<span style="color: #000000">00057:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span> 
<span style="color: #000000">00058:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isFull</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00059:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00060:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> count <span style="color: #990000">==</span> elements<span style="color: #990000">.</span>length<span style="color: #990000">;</span> 
<span style="color: #000000">00061:</span>    <span style="color: #FF0000">}</span> 
<span style="color: #000000">00062:</span> 
<span style="color: #000000">00063:</span>    <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00064:</span> <span style="font-style: italic"><span style="color: #9A1900">       Get message at head. </span></span>
<span style="color: #000000">00065:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the message that is at the head of the queue </span></span>
<span style="color: #000000">00066:</span> <span style="font-style: italic"><span style="color: #9A1900">       </span></span><span style="color: #009900">@precondition</span><span style="font-style: italic"><span style="color: #9A1900"> size() &gt; 0 </span></span>
<span style="color: #000000">00067:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span> 
<span style="color: #000000">00068:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">()</span> 
<span style="color: #000000">00069:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00070:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> elements<span style="color: #990000">[</span>head<span style="color: #990000">];</span> 
<span style="color: #000000">00071:</span>    <span style="color: #FF0000">}</span> 
<span style="color: #000000">00072:</span> 
<span style="color: #000000">00073:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Message<span style="color: #990000">[]</span> elements<span style="color: #990000">;</span> 
<span style="color: #000000">00074:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> head<span style="color: #990000">;</span> 
<span style="color: #000000">00075:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> tail<span style="color: #990000">;</span> 
<span style="color: #000000">00076:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> count<span style="color: #990000">;</span> 
<span style="color: #000000">00077:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00078:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide044">Inefficient Shifting of Elements</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-044.html"> [44/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_04.jpg" height="268" width="401"/><br/>
        
        <br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide045">A Circular Array</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-045.html"> [45/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_05.jpg" height="268" width="207"/><br/>
        
        <br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide046">Wrapping around the End</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-046.html"> [46/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_06.jpg" height="268" width="207"/><br/>
        
        <br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide047">Preconditions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-047.html"> [47/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>In circular array implementation, failure of <tt>remove</tt>
            precondition corrupts queue! </li>
          
          <li>Bounded queue needs precondition for <tt>add</tt> </li>
          
          <li>Naive approach:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            <tt>@precondition size() &lt; elements.length</tt> </li>
          
          <li>Precondition should be checkable by caller </li>
          
          <li>Better:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            <tt>@precondition size() &lt; getCapacity()</tt> </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide048">Assertions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-048.html"> [48/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Mechanism for warning programmers </li>
          
          <li>Can be turned off after testing </li>
          
          <li>Useful for warning programmers about precondition failure </li>
          
          <li>Syntax:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">assert <i>condition</i>;<br xmlns="http://www.w3.org/1999/xhtml"/>assert <i>condition</i> : <i>explanation</i>;<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Throws <tt>AssertionError</tt> if condition false and checking
            enabled </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide049">Assertions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-049.html"> [49/57] </a></span></td></tr></table><p> </p>
        
        <pre xmlns="" xml:space="preserve">public Message remove() <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   assert count &gt; 0 : "violated precondition size() &gt; 0";<br xmlns="http://www.w3.org/1999/xhtml"/>   Message r = elements[head]; <br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
        
        <ul xmlns="">
          
          <li>During testing, run with<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">java -enableassertions MyProg<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Or shorter, <tt>java -ea</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide050">Exceptions in the Contract</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-050.html"> [50/57] </a></span></td></tr></table><p> </p>
        
        <pre xmlns="" xml:space="preserve">/**<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>   @throws NoSuchElementException if queue is empty<br xmlns="http://www.w3.org/1999/xhtml"/>*/<br xmlns="http://www.w3.org/1999/xhtml"/>public Message remove() <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   if (count == 0) <br xmlns="http://www.w3.org/1999/xhtml"/>      throw new NoSuchElementException();<br xmlns="http://www.w3.org/1999/xhtml"/>   Message r = elements[head]; <br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
        
        <ul xmlns="">
          
          <li>Exception throw part of the contract </li>
          
          <li>Caller can <i>rely</i> on behavior </li>
          
          <li>Exception throw <i>not result of precondition violation</i> </li>
          
          <li>This method has <i>no</i> precondition<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide051">Postconditions</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-051.html"> [51/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Conditions that the service provider guarantees </li>
          
          <li>Every method promises description, <tt>@return</tt> </li>
          
          <li>Sometimes, can assert additional useful condition </li>
          
          <li>Example: <tt>add</tt> method<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">@postcondition size() &gt; 0<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>Postcondition of one call can imply precondition of another:<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">q.add(m1);<br xmlns="http://www.w3.org/1999/xhtml"/>m2 = q.remove(); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide052">Class Invariants</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-052.html"> [52/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Condition that is 
            
            <ul>
              
              <li>true after every constructor </li>
              
              <li>preserved by every method<br xmlns="http://www.w3.org/1999/xhtml"/>
                
                (if it's true before the call, it's again true afterwards) </li>
              
              
            </ul>
            
          </li>
          
          <li>Useful for checking validity of operations </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide053">Class Invariants</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-053.html"> [53/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Example: Circular array queue<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">0 &lt;= head &amp;&amp; head &lt; elements.length<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
          <li>First check it's true for constructor 
            
            <ul>
              
              <li>Sets <tt>head = 0</tt> </li>
              
              <li>Need precondition <tt>size &gt; 0</tt>! </li>
              
              
            </ul>
            
          </li>
          
          <li>Check mutators. Start with <tt>remove</tt>
            
            <ul>
              
              <li>Sets <tt>head<sub>new</sub> = (head<sub>old</sub> + 1) %
                  elements.length</tt> </li>
              
              <li>We know <tt>head<sub>old</sub></tt> &gt;= 0 (Why?) </li>
              
              <li> <tt>%</tt> operator property:
                
                <pre xml:space="preserve">0 &lt;= head<sub>new</sub> &amp;&amp; head<sub>new</sub> &lt; elements.length<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
                
              </li>
              
              
            </ul>
            
          </li>
          
          <li>What's the use? Array accesses are correct!<br xmlns="http://www.w3.org/1999/xhtml"/>
            
            
            <pre xml:space="preserve">return elements[head];<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide054">Unit Testing</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-054.html"> [54/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Unit test = test of a single class </li>
          
          <li>Design test cases during implementation<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
          <li>Run tests after every implementation change </li>
          
          <li>When you find a bug, add a test case that catches it<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide055">JUnit</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-055.html"> [55/57] </a></span></td></tr></table><p> </p>
        
        <img alt="." src="../images/horstmann-03_07.jpg" height="483" width="513"/><br/>
        
        <br/>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide056">JUnit</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-056.html"> [56/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Convention: Test class name = tested class name + <tt>Test</tt> </li>
          
          <li>Test methods start with <tt>test</tt> </li>
          
        </ul>
        
        <pre xmlns="" xml:space="preserve">import junit.framework.*;<br xmlns="http://www.w3.org/1999/xhtml"/>public class DayTest extends TestCase<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   public void testAdd() { ... }<br xmlns="http://www.w3.org/1999/xhtml"/>   public void testDaysBetween() { ... }<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
        
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide057">JUnit</a></span><span style="font-weight: normal"><a href="notes-horstmann-03-057.html"> [57/57] </a></span></td></tr></table><p> </p>
        
        <ul xmlns="">
          
          <li>Each test case ends with <tt>assertTrue</tt> method <br xmlns="http://www.w3.org/1999/xhtml"/>
            (or another JUnit assertion method such as <tt>assertEquals</tt>) </li>
          
          <li>Test framework catches assertion failures<br xmlns="http://www.w3.org/1999/xhtml"/>
            
          </li>
          
        </ul>
        
        <pre xmlns="" xml:space="preserve">public void testAdd()<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   Day d1 = new Day(1970, 1, 1);<br xmlns="http://www.w3.org/1999/xhtml"/>   int n = 1000;<br xmlns="http://www.w3.org/1999/xhtml"/>   Day d2 = d1.addDays(n);<br xmlns="http://www.w3.org/1999/xhtml"/>   assertTrue(d2.daysFrom(d1) == n);<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
        
      <hr/><p class="flush">
      Revised: 2007/09/11 16:24</p></body></html>
