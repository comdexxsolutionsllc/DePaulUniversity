<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Horstmann Chapter 10</title></head><body><h1><a href="../index.html">SE450</a>: Horstmann Chapter 10</h1><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-000.html"> [0/55] </a></span></td></tr></table><p> </p><table width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Object-Oriented Design &amp; Patterns</a> [1/55] </td></tr><tr><td><a href="#slide002">Chapter Topics</a> [2/55] </td></tr><tr><td><a href="#slide003">Adapters</a> [3/55] </td></tr><tr><td><a href="#slide004">The ADAPTER Pattern</a> [4/55] </td></tr><tr><td><a href="#slide005">The ADAPTER Pattern</a> [5/55] </td></tr><tr><td><a href="#slide006">The ADAPTER Pattern</a> [6/55] </td></tr><tr><td><a href="#slide007">The ADAPTER Pattern</a> [7/55] </td></tr><tr><td><a href="#slide008">The ADAPTER Pattern</a> [8/55] </td></tr><tr><td><a href="#slide009">The ADAPTER Pattern</a> [9/55] </td></tr><tr><td><a href="#slide010">User Interface Actions</a> [10/55] </td></tr><tr><td><a href="#slide011">User Interface Actions</a> [11/55] </td></tr><tr><td><a href="#slide012">The Action Interface Type</a> [12/55] </td></tr><tr><td><a href="#slide013">The Action Interface Type</a> [13/55] </td></tr><tr><td><a href="#slide014">Action Example</a> [14/55] </td></tr><tr><td><a href="#slide015">The COMMAND Pattern</a> [15/55] </td></tr><tr><td><a href="#slide016">The COMMAND Pattern</a> [16/55] </td></tr><tr><td><a href="#slide017">The COMMAND Pattern</a> [17/55] </td></tr><tr><td><a href="#slide018">The COMMAND Pattern</a> [18/55] </td></tr><tr><td><a href="#slide019">Factory Methods</a> [19/55] </td></tr><tr><td><a href="#slide020">The FACTORY METHOD Pattern</a> [20/55] </td></tr><tr><td><a href="#slide021">The FACTORY METHOD Pattern</a> [21/55] </td></tr><tr><td><a href="#slide022">The FACTORY METHOD Pattern</a> [22/55] </td></tr><tr><td><a href="#slide023">The FACTORY METHOD Pattern</a> [23/55] </td></tr><tr><td><a href="#slide024">Not a FACTORY METHOD</a> [24/55] </td></tr><tr><td><a href="#slide025">Proxies</a> [25/55] </td></tr><tr><td><a href="#slide026">Deferred Image Loading</a> [26/55] </td></tr><tr><td><a href="#slide027">Deferred Image Loading</a> [27/55] </td></tr><tr><td><a href="#slide028">Proxies</a> [28/55] </td></tr><tr><td><a href="#slide029">The PROXY Pattern</a> [29/55] </td></tr><tr><td><a href="#slide030">The PROXY Pattern</a> [30/55] </td></tr><tr><td><a href="#slide031">The PROXY Pattern</a> [31/55] </td></tr><tr><td><a href="#slide032">The PROXY Pattern</a> [32/55] </td></tr><tr><td><a href="#slide033">Singletons</a> [33/55] </td></tr><tr><td><a href="#slide034">Random Number Generator Singleton</a> [34/55] </td></tr><tr><td><a href="#slide035">The SINGLETON Pattern</a> [35/55] </td></tr><tr><td><a href="#slide036">The SINGLETON Pattern</a> [36/55] </td></tr><tr><td><a href="#slide037">Not a SINGLETON</a> [37/55] </td></tr><tr><td><a href="#slide038">Inflexible Hierarchies</a> [38/55] </td></tr><tr><td><a href="#slide039">Inflexible Hierarchies</a> [39/55] </td></tr><tr><td><a href="#slide040">Visitors</a> [40/55] </td></tr><tr><td><a href="#slide041">Visitors</a> [41/55] </td></tr><tr><td><a href="#slide042">Visitors</a> [42/55] </td></tr><tr><td><a href="#slide043">Double Dispatch</a> [43/55] </td></tr><tr><td><a href="#slide044">Visitor Example</a> [44/55] </td></tr><tr><td><a href="#slide045">Visitor Example</a> [45/55] </td></tr><tr><td><a href="#slide046">Visitor Example</a> [46/55] </td></tr><tr><td><a href="#slide047">Visitor Example</a> [47/55] </td></tr><tr><td><a href="#slide048">Double Dispatch Example</a> [48/55] </td></tr><tr><td><a href="#slide049">Double Dispatch Example</a> [49/55] </td></tr><tr><td><a href="#slide050">The VISITOR Pattern</a> [50/55] </td></tr><tr><td><a href="#slide051">The VISITOR Pattern</a> [51/55] </td></tr><tr><td><a href="#slide052">The VISITOR Pattern</a> [52/55] </td></tr><tr><td><a href="#slide053">The VISITOR Pattern</a> [53/55] </td></tr><tr><td><a href="#slide054">Other Design Patterns</a> [54/55] </td></tr><tr><td><a href="#slide055">Conclusion: What You Learned</a> [55/55] </td></tr></table><br/><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Object-Oriented Design &amp; Patterns</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-001.html"> [1/55] </a></span></td></tr></table><p> </p>
        <h4 xmlns="">Cay S. Horstmann</h4>
        <h3 xmlns="">Chapter 10<br xmlns="http://www.w3.org/1999/xhtml"/>
        </h3>
        <h3 xmlns="">More Design Patterns<br xmlns="http://www.w3.org/1999/xhtml"/>
        </h3>
        <img alt="horstmann-oodp2" src="../images/horstmann-oodp2.jpg" height="500" width="404"/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Chapter Topics</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-002.html"> [2/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>The ADAPTER Pattern </li>
          <li>Actions and the COMMAND Pattern  <br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The FACTORY METHOD Pattern </li>
          <li>The PROXY Pattern </li>
          <li>The SINGLETON Pattern </li>
          <li>The VISITOR Pattern </li>
          <li>Other Design Patterns </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Adapters</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-003.html"> [3/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Cable adapter: adapts plug to foreign wall outlet </li>
          <li>OO Programming; Want to adapt class to foreign interface type </li>
          <li>Example: Add <tt>CarIcon</tt> to container </li>
          <li>Problem: Containers take components, not icons </li>
          <li>Solution: Create an adapter that adapts <tt>Icon</tt> to <tt>Component</tt>
          </li>
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_adapter/IconAdapter_java.html">file:horstmann/ch10_adapter/IconAdapter.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_adapter/IconAdapter.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_adapter/IconAdapter.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_adapter/IconAdapter.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_adapter<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   An adapter that turns an icon into a JComponent.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">IconAdapter</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> JComponent
<span style="color: #000000">00009:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a JComponent that displays a given icon.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> icon the icon to display</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">IconAdapter</span></span><span style="color: #990000">(</span><span style="color: #008080">Icon</span> icon<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>icon <span style="color: #990000">=</span> icon<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paintComponent</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span>
<span style="color: #000000">00020:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>       icon<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">paintIcon</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">,</span> g<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span> 
<span style="color: #000000">00024:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Dimension</span> <span style="font-weight: bold"><span style="color: #000000">getPreferredSize</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00025:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00026:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Dimension</span></span><span style="color: #990000">(</span>icon<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getIconWidth</span></span><span style="color: #990000">(),</span>
<span style="color: #000000">00027:</span>             icon<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getIconHeight</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00028:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span> 
<span style="color: #000000">00030:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Icon</span> icon<span style="color: #990000">;</span>
<span style="color: #000000">00031:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_adapter/IconAdapterTester_java.html">file:horstmann/ch10_adapter/IconAdapterTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_adapter/IconAdapterTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_adapter/IconAdapterTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_adapter/IconAdapterTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_adapter<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   This program demonstrates how an icon is adapted to</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   a component. The component is added to a frame.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">IconAdapterTester</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00012:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>       <span style="color: #008080">Icon</span> icon <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CarIcon</span></span><span style="color: #990000">(</span><span style="color: #993399">300</span><span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>       <span style="color: #008080">JComponent</span> component <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IconAdapter</span></span><span style="color: #990000">(</span>icon<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span>       <span style="color: #008080">JFrame</span> frame <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JFrame</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>component<span style="color: #990000">,</span> BorderLayout<span style="color: #990000">.</span>CENTER<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setDefaultCloseOperation</span></span><span style="color: #990000">(</span>JFrame<span style="color: #990000">.</span>EXIT_ON_CLOSE<span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">pack</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00020:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setVisible</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00021:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">The ADAPTER Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-004.html"> [4/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Context</h3>
        <ol xmlns="">
          <li>You want to use an existing class (adaptee) without modifying it.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The context in which you want to use the class requires target
            interface that is different from that of the adaptee.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The target interface and the adaptee interface are conceptually
            related. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">The ADAPTER Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-005.html"> [5/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Solution</h3>
        <ol xmlns="">
          <li>Define an adapter class that implements the target interface.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The adapter class holds a reference to the adaptee. It translates
            target methods to adaptee methods.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The client wraps the adaptee into an adapter class object. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">The ADAPTER Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-006.html"> [6/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_un01.jpg" height="461" width="782"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">The ADAPTER Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-007.html"> [7/55] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Actual Name
                (Icon-&gt;Component)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Adaptee<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Icon<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Target<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                JComponent<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Adapter<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                IconAdapter<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Client<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">The class that wants to add
                icons into a container<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                targetMethod()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                paintComponent(), getPreferredSize()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                adapteeMethod()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                paintIcon(), getIconWidth(), getIconHeight()</td>
            </tr>
          </tbody>
        </table>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">The ADAPTER Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-008.html"> [8/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>In stream library </li>
          <li>Input streams read bytes </li>
          <li>Readers read characters </li>
          <li>Non-ASCII encoding: multiple bytes per char </li>
          <li>System.in is a stream </li>
          <li>What if you want to read characters? </li>
          <li>Adapt stream to reader </li>
          <li><tt>InputStreamReader</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">The ADAPTER Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-009.html"> [9/55] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Actual Name
                (Stream-&gt;Reader)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Adaptee<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                InputStream</td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Target<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Reader</td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Adapter<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                InputStreamReader</td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Client<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">The class that wants to read
                text from an input stream<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                targetMethod()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">read
                (reading a character)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                adapteeMethod()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">read
                (reading a byte)</td>
            </tr>
          </tbody>
        </table>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">User Interface Actions</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-010.html"> [10/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Multiple routes to the same action </li>
          <li>Example: Cut a block of text
            
            <ul>
              <li>Select Edit-&gt;Cut from menu </li>
              <li>Click toolbar button </li>
              <li>Hit Ctrl+X </li>
            </ul>
          </li>
          <li>Action can be disabled (if nothing is selected) </li>
          <li>Action has <i>state</i> </li>
          <li>Action should be an <i>object</i> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">User Interface Actions</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-011.html"> [11/55] </a></span></td></tr></table><p> </p>
        <img alt="" src="../images/horstmann-10_01.png" height="242" width="442"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">The Action Interface Type</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-012.html"> [12/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Extends <tt>ActionListener</tt> </li>
          <li>Can be enabled/disabled </li>
          <li>Additional state, including
            
            <ul>
              <li>Action name </li>
            </ul>
            <ul>
              <li>Icon </li>
            </ul>
          </li>
          <li style="font-family: monospace;">helloAction.putValue(Action.NAME,
            "Hello"); </li>
          <li><tt>menu.add(helloAction);</tt> </li>
          <li>Extend <tt>AbstractAction</tt> convenience class </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">The Action Interface Type</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-013.html"> [13/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_02.jpg" height="497" width="166"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Action Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-014.html"> [14/55] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_command/CommandTester_java.html">file:horstmann/ch10_command/CommandTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_command/CommandTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_command/CommandTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_command/CommandTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_command<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   This program demonstrates action objects. Two actions</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   insert greetings into a text area. Each action can be</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">   triggered by a menu item or toolbar button. When an</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">   action is carried out, the opposite action becomes enabled.</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CommandTester</span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>       <span style="color: #008080">JFrame</span> frame <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JFrame</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00016:</span>       <span style="color: #008080">JMenuBar</span> bar <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JMenuBar</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setJMenuBar</span></span><span style="color: #990000">(</span>bar<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>       <span style="color: #008080">JMenu</span> menu <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JMenu</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Say"</span><span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>       bar<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>menu<span style="color: #990000">);</span>
<span style="color: #000000">00020:</span>       <span style="color: #008080">JToolBar</span> toolBar <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JToolBar</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00021:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>toolBar<span style="color: #990000">,</span> BorderLayout<span style="color: #990000">.</span>NORTH<span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>       <span style="color: #008080">JTextArea</span> textArea <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JTextArea</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">,</span> <span style="color: #993399">40</span><span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>textArea<span style="color: #990000">,</span> BorderLayout<span style="color: #990000">.</span>CENTER<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span> 
<span style="color: #000000">00025:</span>       <span style="color: #008080">GreetingAction</span> helloAction <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">GreetingAction</span></span><span style="color: #990000">(</span>
<span style="color: #000000">00026:</span>             <span style="color: #FF0000">"Hello, World"</span><span style="color: #990000">,</span> textArea<span style="color: #990000">);</span>
<span style="color: #000000">00027:</span>       helloAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">putValue</span></span><span style="color: #990000">(</span>Action<span style="color: #990000">.</span>NAME<span style="color: #990000">,</span> <span style="color: #FF0000">"Hello"</span><span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>       helloAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">putValue</span></span><span style="color: #990000">(</span>Action<span style="color: #990000">.</span>SMALL_ICON<span style="color: #990000">,</span>
<span style="color: #000000">00029:</span>          <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ImageIcon</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"hello.png"</span><span style="color: #990000">));</span>
<span style="color: #000000">00030:</span> 
<span style="color: #000000">00031:</span>       <span style="color: #008080">GreetingAction</span> goodbyeAction <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">GreetingAction</span></span><span style="color: #990000">(</span>
<span style="color: #000000">00032:</span>             <span style="color: #FF0000">"Goodbye, World"</span><span style="color: #990000">,</span> textArea<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>       goodbyeAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">putValue</span></span><span style="color: #990000">(</span>Action<span style="color: #990000">.</span>NAME<span style="color: #990000">,</span> <span style="color: #FF0000">"Goodbye"</span><span style="color: #990000">);</span>
<span style="color: #000000">00034:</span>       goodbyeAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">putValue</span></span><span style="color: #990000">(</span>Action<span style="color: #990000">.</span>SMALL_ICON<span style="color: #990000">,</span>
<span style="color: #000000">00035:</span>             <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ImageIcon</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"goodbye.png"</span><span style="color: #990000">));</span>
<span style="color: #000000">00036:</span> 
<span style="color: #000000">00037:</span>       helloAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setOpposite</span></span><span style="color: #990000">(</span>goodbyeAction<span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>       goodbyeAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setOpposite</span></span><span style="color: #990000">(</span>helloAction<span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>       goodbyeAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setEnabled</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>       menu<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>helloAction<span style="color: #990000">);</span>
<span style="color: #000000">00042:</span>       menu<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>goodbyeAction<span style="color: #990000">);</span>
<span style="color: #000000">00043:</span> 
<span style="color: #000000">00044:</span>       toolBar<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>helloAction<span style="color: #990000">);</span>
<span style="color: #000000">00045:</span>       toolBar<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>goodbyeAction<span style="color: #990000">);</span>
<span style="color: #000000">00046:</span> 
<span style="color: #000000">00047:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setDefaultCloseOperation</span></span><span style="color: #990000">(</span>JFrame<span style="color: #990000">.</span>EXIT_ON_CLOSE<span style="color: #990000">);</span>
<span style="color: #000000">00048:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">pack</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00049:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setVisible</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00050:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00051:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_command/GreetingAction_java.html">file:horstmann/ch10_command/GreetingAction.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_command/GreetingAction.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_command/GreetingAction.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_command/GreetingAction.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_command<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>event<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   This action places a greeting into a text field </span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   and afterwards disables itself and enables its </span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">   opposite action.</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">GreetingAction</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> AbstractAction
<span style="color: #000000">00011:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a greeting action.</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> greeting the string to add to the text area</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> textArea the text area to which to add the greeting</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>      
<span style="color: #000000">00017:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">GreetingAction</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> greeting<span style="color: #990000">,</span> <span style="color: #008080">JTextArea</span> textArea<span style="color: #990000">)</span>
<span style="color: #000000">00018:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>greeting <span style="color: #990000">=</span> greeting<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>textArea <span style="color: #990000">=</span> textArea<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">      Sets the opposite action.</span></span>
<span style="color: #000000">00025:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> action the action to be enabled after this action was</span></span>
<span style="color: #000000">00026:</span> <span style="font-style: italic"><span style="color: #9A1900">      carried out</span></span>
<span style="color: #000000">00027:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00028:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setOpposite</span></span><span style="color: #990000">(</span><span style="color: #008080">Action</span> action<span style="color: #990000">)</span>
<span style="color: #000000">00029:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>       oppositeAction <span style="color: #990000">=</span> action<span style="color: #990000">;</span>
<span style="color: #000000">00031:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> 
<span style="color: #000000">00033:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">actionPerformed</span></span><span style="color: #990000">(</span><span style="color: #008080">ActionEvent</span> event<span style="color: #990000">)</span>
<span style="color: #000000">00034:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>       textArea<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>greeting<span style="color: #990000">);</span>
<span style="color: #000000">00036:</span>       textArea<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>oppositeAction <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00038:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>          <span style="font-weight: bold"><span style="color: #000000">setEnabled</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00040:</span>          oppositeAction<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setEnabled</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00041:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span> 
<span style="color: #000000">00044:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> greeting<span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">JTextArea</span> textArea<span style="color: #990000">;</span>
<span style="color: #000000">00046:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Action</span> oppositeAction<span style="color: #990000">;</span>
<span style="color: #000000">00047:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">The COMMAND Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-015.html"> [15/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Context</h3>
        <ol xmlns="">
          <li>You want to implement commands that behave like objects<br xmlns="http://www.w3.org/1999/xhtml"/>
            <ul>
              <li>because you need to store additional information with
                commands </li>
              <li>because you want to collect commands.  <br xmlns="http://www.w3.org/1999/xhtml"/>
              </li>
            </ul>
          </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">The COMMAND Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-016.html"> [16/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Solution</h3>
        <ol xmlns="">
          <li>Define a command interface type with a method to execute the
            command.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Supply methods in the command interface type to manipulate the
            state of command objects.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Each concrete command class implements the command interface type.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>To invoke the command, call the execute method. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">The COMMAND Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-017.html"> [17/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_un02.jpg" height="397" width="510"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">The COMMAND Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-018.html"> [18/55] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Actual Name
                (Swing actions)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Command<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1"><tt>Action</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                ConcreteCommand<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">subclass of <tt>AbstractAction</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                execute()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1"><tt>actionPerformed()</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> state<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1"><tt>name</tt> and <tt>icon</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
          </tbody>
        </table>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Factory Methods</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-019.html"> [19/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Every collection can produce an iterator<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Iterator iter = list.iterator()</tt> </li>
          <li>Why not use constructors?<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Iterator iter = new LinkedListIterator(list);</tt> </li>
          <li>Drawback: not generic<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Collection coll = ...;</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Iterator iter = new ???(coll);</tt> </li>
          <li>Factory method works for all collections<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Iterator iter = coll.iterator();</tt> </li>
          <li>Polymorphism! </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">The FACTORY METHOD Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-020.html"> [20/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Context</h3>
        <ol xmlns="">
          <li>A type (the creator) creates objects of another type (the
            product).<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Subclasses of the creator type need to create different kinds of
            product objects.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Clients do not need to know the exact type of product objects. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">The FACTORY METHOD Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-021.html"> [21/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Solution</h3>
        <ol xmlns="">
          <li>Define a creator type that expresses the commonality of all
            creators.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Define a product type that expresses the commonality of all
            products.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Define a method, called the factory method, in the creator type.<br xmlns="http://www.w3.org/1999/xhtml"/>
            The factory method yields a product object.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Each concrete creator class implements the factory method so that
            it returns an object of a concrete product class. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">The FACTORY METHOD Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-022.html"> [22/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_un03.jpg" height="380" width="593"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">The FACTORY METHOD Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-023.html"> [23/55] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Actual Name
                (iterator)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Creator<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                Collection<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                ConcreteCreator<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">A subclass of <tt>Collection</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                factoryMethod()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                iterator()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Product<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Iterator<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                ConcreteProduct<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">A subclass of <tt>Iterator</tt>
                (which is often anonymous)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
          </tbody>
        </table>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">Not a FACTORY METHOD</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-024.html"> [24/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Not all "factory-like" methods are instances of this pattern </li>
          <li>Create <tt>DateFormat</tt> instances<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>DateFormat formatter = DateFormat.getDateInstance();</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Date now = new Date();</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>String formattedDate = formatter.format(now);</tt> </li>
          <li><tt>getDateInstance</tt> is a <i>static</i> method </li>
          <li>No polymorphic creation </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">Proxies</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-025.html"> [25/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Proxy: a person who is authorized to act on another person s
            behalf </li>
          <li>Example: Delay instantiation of object </li>
          <li>Expensive to load image </li>
          <li>Not necessary to load image that user doesn't look at </li>
          <li>Proxy defers loading until user clicks on tab<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide026">Deferred Image Loading</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-026.html"> [26/55] </a></span></td></tr></table><p> </p>
        <img alt="" src="../images/horstmann-10_03.png" height="302" width="502"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide027">Deferred Image Loading</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-027.html"> [27/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Normally, programmer uses image for label:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>JLabel label = new JLabel(new ImageIcon(imageName));</tt> </li>
          <li>Use proxy instead:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>JLabel label = new JLabel(new ImageProxy(imageName));</tt> </li>
          <li><tt>paintIcon</tt> loads image if not previously loaded<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public void paintIcon(Component c, Graphics g, int x, int y)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>{</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   if (image == null) image = new ImageIcon(name);</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   image.paintIcon(c, g, x, y);</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>}</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide028">Proxies</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-028.html"> [28/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>"Every problem in computer science can be solved by an additional
            level of indirection" </li>
          <li>Another use for proxies: remote method invocation </li>
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_proxy/ImageProxy_java.html">file:horstmann/ch10_proxy/ImageProxy.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_proxy/ImageProxy.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_proxy/ImageProxy.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_proxy/ImageProxy.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_proxy<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   A proxy for delayed loading of image icons.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ImageProxy</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Icon
<span style="color: #000000">00009:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a proxy for delayed loading of an image file.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> name the file name</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">ImageProxy</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>name <span style="color: #990000">=</span> name<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>       image <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paintIcon</span></span><span style="color: #990000">(</span><span style="color: #008080">Component</span> c<span style="color: #990000">,</span> <span style="color: #008080">Graphics</span> g<span style="color: #990000">,</span> <span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span>
<span style="color: #000000">00021:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureImageLoaded</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>       image<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">paintIcon</span></span><span style="color: #990000">(</span>c<span style="color: #990000">,</span> g<span style="color: #990000">,</span> x<span style="color: #990000">,</span> y<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> 
<span style="color: #000000">00026:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getIconWidth</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00027:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureImageLoaded</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00029:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> image<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getIconWidth</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00030:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> 
<span style="color: #000000">00032:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getIconHeight</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00033:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>       <span style="font-weight: bold"><span style="color: #000000">ensureImageLoaded</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00035:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> image<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getIconHeight</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00036:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00037:</span> 
<span style="color: #000000">00038:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">      Loads the image if it hasn't been loaded yet. Prints</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">      a message when the image is loaded.</span></span>
<span style="color: #000000">00041:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00042:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">ensureImageLoaded</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00043:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>image <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00045:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00046:</span>          System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Loading "</span> <span style="color: #990000">+</span> name<span style="color: #990000">);</span>
<span style="color: #000000">00047:</span>          image <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ImageIcon</span></span><span style="color: #990000">(</span>name<span style="color: #990000">);</span>
<span style="color: #000000">00048:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00049:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span> 
<span style="color: #000000">00051:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> name<span style="color: #990000">;</span>
<span style="color: #000000">00052:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">ImageIcon</span> image<span style="color: #990000">;</span>
<span style="color: #000000">00053:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00054:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_proxy/ProxyTester_java.html">file:horstmann/ch10_proxy/ProxyTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_proxy/ProxyTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_proxy/ProxyTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_proxy/ProxyTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_proxy<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   This program demonstrates the use of the image proxy.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   Images are only loaded when you press on a tab.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ProxyTester</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00012:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>       <span style="color: #008080">JTabbedPane</span> tabbedPane <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JTabbedPane</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00014:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">String</span> name <span style="color: #990000">:</span> imageNames<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>          <span style="color: #008080">JLabel</span> label <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JLabel</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ImageProxy</span></span><span style="color: #990000">(</span>name<span style="color: #990000">));</span>
<span style="color: #000000">00017:</span>          tabbedPane<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>name<span style="color: #990000">,</span> label<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>       <span style="color: #008080">JFrame</span> frame <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JFrame</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00021:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>tabbedPane<span style="color: #990000">);</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setSize</span></span><span style="color: #990000">(</span>FRAME_WIDTH<span style="color: #990000">,</span> FRAME_HEIGHT<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setDefaultCloseOperation</span></span><span style="color: #990000">(</span>JFrame<span style="color: #990000">.</span>EXIT_ON_CLOSE<span style="color: #990000">);</span>
<span style="color: #000000">00025:</span>       frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setVisible</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String<span style="color: #990000">[]</span> imageNames <span style="color: #990000">=</span>
<span style="color: #000000">00029:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>       <span style="color: #FF0000">"devonian.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00031:</span>       <span style="color: #FF0000">"permian.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00032:</span>       <span style="color: #FF0000">"jurassic1.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00033:</span>       <span style="color: #FF0000">"jurassic2.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00034:</span>       <span style="color: #FF0000">"cretaceous1.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00035:</span>       <span style="color: #FF0000">"cretaceous2.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00036:</span>       <span style="color: #FF0000">"cretaceous3.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00037:</span>       <span style="color: #FF0000">"eocene1.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00038:</span>       <span style="color: #FF0000">"eocene2.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00039:</span>       <span style="color: #FF0000">"oligocene.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00040:</span>       <span style="color: #FF0000">"miocene.gif"</span><span style="color: #990000">,</span>
<span style="color: #000000">00041:</span>       <span style="color: #FF0000">"pleistocene.gif"</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00043:</span> 
<span style="color: #000000">00044:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> FRAME_WIDTH <span style="color: #990000">=</span> <span style="color: #993399">500</span><span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> FRAME_HEIGHT <span style="color: #990000">=</span> <span style="color: #993399">300</span><span style="color: #990000">;</span>
<span style="color: #000000">00046:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide029">The PROXY Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-029.html"> [29/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Context</h3>
        <ol xmlns="">
          <li>A class (the real subject) provides a service that is specified
            by an interface type (the subject type) </li>
          <li>There is a need to modify the service in order to make it more
            versatile.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Neither the client nor the real subject should be affected by the
            modification. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide030">The PROXY Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-030.html"> [30/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Solution</h3>
        <ol xmlns="">
          <li>Define a proxy class that implements the subject interface type.<br xmlns="http://www.w3.org/1999/xhtml"/>
            The proxy holds a reference to the real subject, or otherwise knows how
            to locate it.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The client uses a proxy object.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Each proxy method invokes the same method on the real subject and
            provides the necessary modifications. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide031">The PROXY Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-031.html"> [31/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_un04.jpg" height="492" width="772"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide032">The PROXY Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-032.html"> [32/55] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Actual Name
                (image proxy)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Subject<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Icon<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                RealSubject<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                ImageIcon<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Proxy<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                ImageProxy<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                request()<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">The methods of the <tt>Icon</tt>
                interface type<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Client<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> JLabel<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
          </tbody>
        </table>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide033">Singletons</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-033.html"> [33/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>"Random" number generator generates predictable stream of numbers
          </li>
          <li>Example: seed = (seed * 25214903917 + 11) % 2<sup>48</sup> </li>
          <li>Convenient for debugging: can reproduce number sequence </li>
          <li>Only if all clients use <i>the same random number generator</i> </li>
          <li>Singleton class = class with one instance </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide034">Random Number Generator Singleton</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-034.html"> [34/55] </a></span></td></tr></table><p> </p>
        <tt xmlns="">public class SingleRandom</tt><br/>
        <tt xmlns="">{</tt><br/>
        <tt xmlns="">   private SingleRandom() { generator = new Random(); }</tt><br/>
        <tt xmlns="">   public void setSeed(int seed) {
          generator.setSeed(seed); }</tt><br/>
        <tt xmlns="">   public int nextInt() { return generator.nextInt(); }</tt><br/>
        <tt xmlns="">   public static SingleRandom getInstance() { return
          instance; }</tt><br/>
        <tt xmlns="">   private Random generator;</tt><br/>
        <tt xmlns="">   private static SingleRandom instance = new
          SingleRandom();</tt><br/>
        <tt xmlns="">}</tt><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide035">The SINGLETON Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-035.html"> [35/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Context</h3>
        <ol xmlns="">
          <li>All clients need to access a single shared instance of a class.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>You want to ensure that no additional instances can be created
            accidentally. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide036">The SINGLETON Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-036.html"> [36/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Solution<br xmlns="http://www.w3.org/1999/xhtml"/>
        </h3>
        <ol xmlns="">
          <li>Define a class with a private constructor.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The class constructs a single instance of itself.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Supply a static method that returns a reference to the single
            instance. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide037">Not a SINGLETON</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-037.html"> [37/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Toolkit used for determining screen size, other window system
            parameters<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li><tt>Toolkit</tt> class returns default toolkit<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Toolkit kit = Toolkit.getDefaultToolkit();</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Not a singleton--can get other instances of <tt>Toolkit</tt> </li>
          <li><tt><tt>Math</tt></tt> class not example of singleton pattern </li>
          <li><i>No</i> objects of class <tt>Math</tt> are created </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide038">Inflexible Hierarchies</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-038.html"> [38/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>How can one add operations to compound hierarchies? </li>
          <li>Example: AWT <tt>Component,</tt> <tt>Container,</tt> etc. form
            hierarchy </li>
          <li>Lots of operations: <tt>getPreferredSize</tt>,<tt>repaint</tt> </li>
          <li>Can't add new methods without modifying <tt>Component</tt> class
          </li>
          <li>VISITOR pattern solves this problem </li>
          <li>Each class must support one method<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>void accept(Visitor v)</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide039">Inflexible Hierarchies</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-039.html"> [39/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_04.jpg" height="380" width="752"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide040">Visitors</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-040.html"> [40/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Visitor</tt> is an interface type </li>
          <li>Supply a separate class for each new operation </li>
          <li>Most basic form of <tt>accept</tt> method:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public void accept(Visitor v) { v.visit(this); }</tt> </li>
          <li>Programmer must implement <tt>visit</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide041">Visitors</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-041.html"> [41/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Problem: Operation may be different for different element types </li>
          <li>Can't rely on polymorphism </li>
          <li>Polymorphism assumes fixed set of methods, defined in superclass<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Trick: Can use variable set of methods <i>if set of classes is
              fixed</i> </li>
          <li>Supply separate visitor methods:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public interface Visitor</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>{</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   void visitElementType1(ElementType1 element);</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   void visitElementType2(ElementType2 element);</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   ...</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   void visitElementTypen(ElementTypen element);</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>}</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide042">Visitors</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-042.html"> [42/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Example: Directory tree </li>
          <li>Two kinds of elements: <tt>DirectoryNode</tt>,<tt>FileNode</tt> </li>
          <li>Two methods in visitor interface type:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>void visitDirectoryNode(DirectoryNode node)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>void visitFileNode(FileNode node)</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide043">Double Dispatch</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-043.html"> [43/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Each element type provides methods:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public class ElementType<sub>i</sub></tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>{</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   public void accept(Visitor v) { v.visitElementType<sub>i</sub>(this);
              }</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   ...</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>}</tt> </li>
          <li>Completely mechanical </li>
          <li>Example:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public class DirectoryNode</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>{</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   public void accept(Visitor v) {
              v.visitDirectoryNode(this); }</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   ...</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>}</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide044">Visitor Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-044.html"> [44/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Standard <tt>File</tt> class denotes both files and directories </li>
          <li>Improved design: <tt>FileNode</tt>,<tt>DirectoryNode</tt> </li>
          <li>Common interface type: <tt>FileSystemNode</tt> </li>
          <li>Accepts <tt>FileSystemVisitor</tt> </li>
          <li>Visitor methods:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>visitFileNode</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>visitDirectoryNode</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide045">Visitor Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-045.html"> [45/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_05.jpg" height="552" width="876"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide046">Visitor Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-046.html"> [46/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Actual visitor: <tt>PrintVisitor</tt> </li>
          <li>Prints names of files (in <tt>visitFileNode</tt>)<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Lists contents of directories (in <tt>visitDirectoryNode</tt>)<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Maintains indentation level<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>..</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   command</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>     CommandTester.java</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>     GreetingAction.java</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>   visitor</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>     FileNode.java</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>      DirectoryNode.java</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide047">Visitor Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-047.html"> [47/55] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_visitor/FileSystemNode_java.html">file:horstmann/ch10_visitor/FileSystemNode.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_visitor/FileSystemNode.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_visitor/FileSystemNode.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_visitor/FileSystemNode.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_visitor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   The common interface for file and directory nodes.</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">FileSystemNode</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="color: #008080">FileSystemVisitor</span> v<span style="color: #990000">);</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_visitor/FileNode_java.html">file:horstmann/ch10_visitor/FileNode.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_visitor/FileNode.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_visitor/FileNode.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_visitor/FileNode.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_visitor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">FileNode</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> FileSystemNode
<span style="color: #000000">00005:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">FileNode</span></span><span style="color: #990000">(</span><span style="color: #008080">File</span> file<span style="color: #990000">)</span>
<span style="color: #000000">00007:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>file <span style="color: #990000">=</span> file<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">File</span> <span style="font-weight: bold"><span style="color: #000000">getFile</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> file<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> 
<span style="color: #000000">00013:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="color: #008080">FileSystemVisitor</span> v<span style="color: #990000">)</span> 
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00015:</span>       v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitFileNode</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> 
<span style="color: #000000">00016:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> 
<span style="color: #000000">00018:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">File</span> file<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_visitor/DirectoryNode_java.html">file:horstmann/ch10_visitor/DirectoryNode.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_visitor/DirectoryNode.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_visitor/DirectoryNode.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_visitor/DirectoryNode.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_visitor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">DirectoryNode</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> FileSystemNode
<span style="color: #000000">00005:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">DirectoryNode</span></span><span style="color: #990000">(</span><span style="color: #008080">File</span> directory<span style="color: #990000">)</span>
<span style="color: #000000">00007:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>directory <span style="color: #990000">=</span> directory<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="color: #008080">FileSystemVisitor</span> v<span style="color: #990000">)</span>
<span style="color: #000000">00012:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>       v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitDirectoryNode</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">File</span> <span style="font-weight: bold"><span style="color: #000000">getDirectory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> directory<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> 
<span style="color: #000000">00018:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> FileSystemNode<span style="color: #990000">[]</span> <span style="font-weight: bold"><span style="color: #000000">getChildren</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00019:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>       File<span style="color: #990000">[]</span> files <span style="color: #990000">=</span> directory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">listFiles</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00021:</span>       FileSystemNode<span style="color: #990000">[]</span> children <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> FileSystemNode<span style="color: #990000">[</span>files<span style="color: #990000">.</span>length<span style="color: #990000">];</span>
<span style="color: #000000">00022:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> files<span style="color: #990000">.</span>length<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
<span style="color: #000000">00023:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>          <span style="color: #008080">File</span> f <span style="color: #990000">=</span> files<span style="color: #990000">[</span>i<span style="color: #990000">];</span>
<span style="color: #000000">00025:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>f<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isDirectory</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00026:</span>             children<span style="color: #990000">[</span>i<span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">DirectoryNode</span></span><span style="color: #990000">(</span>f<span style="color: #990000">);</span>
<span style="color: #000000">00027:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00028:</span>             children<span style="color: #990000">[</span>i<span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileNode</span></span><span style="color: #990000">(</span>f<span style="color: #990000">);</span>
<span style="color: #000000">00029:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> children<span style="color: #990000">;</span>
<span style="color: #000000">00031:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> 
<span style="color: #000000">00033:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">File</span> directory<span style="color: #990000">;</span>
<span style="color: #000000">00034:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_visitor/FileSystemVisitor_java.html">file:horstmann/ch10_visitor/FileSystemVisitor.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_visitor/FileSystemVisitor.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_visitor/FileSystemVisitor.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_visitor/FileSystemVisitor.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_visitor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   The visitor interface type for visiting file system nodes.</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">FileSystemVisitor</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      Visits a file node.</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> node the file node</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00011:</span>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">visitFileNode</span></span><span style="color: #990000">(</span><span style="color: #008080">FileNode</span> node<span style="color: #990000">);</span>
<span style="color: #000000">00012:</span> 
<span style="color: #000000">00013:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">      Visits a directory node.</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> node the directory node</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00017:</span>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">visitDirectoryNode</span></span><span style="color: #990000">(</span><span style="color: #008080">DirectoryNode</span> node<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_visitor/PrintVisitor_java.html">file:horstmann/ch10_visitor/PrintVisitor.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_visitor/PrintVisitor.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_visitor/PrintVisitor.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_visitor/PrintVisitor.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_visitor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PrintVisitor</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> FileSystemVisitor
<span style="color: #000000">00005:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">visitFileNode</span></span><span style="color: #990000">(</span><span style="color: #008080">FileNode</span> node<span style="color: #990000">)</span>
<span style="color: #000000">00007:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> level<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">" "</span><span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>node<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getFile</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00010:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">visitDirectoryNode</span></span><span style="color: #990000">(</span><span style="color: #008080">DirectoryNode</span> node<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> level<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">" "</span><span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>node<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getDirectory</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00016:</span>       level<span style="color: #990000">++;</span>
<span style="color: #000000">00017:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">FileSystemNode</span> c <span style="color: #990000">:</span> node<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getChildren</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00018:</span>          c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>       level<span style="color: #990000">--;</span>
<span style="color: #000000">00020:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> 
<span style="color: #000000">00022:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> level <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00023:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch10_visitor/VisitorTester_java.html">file:horstmann/ch10_visitor/VisitorTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch10_visitor/VisitorTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch10_visitor/VisitorTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch10_visitor/VisitorTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch10_visitor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">VisitorTester</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00007:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       <span style="color: #008080">DirectoryNode</span> node <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">DirectoryNode</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">File</span></span><span style="color: #990000">(</span><span style="color: #FF0000">".."</span><span style="color: #990000">));</span>
<span style="color: #000000">00009:</span>       node<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PrintVisitor</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00010:</span>    <span style="color: #FF0000">}</span>   
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide048">Double Dispatch Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-048.html"> [48/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>DirectoryNode node = new DirectoryNode(new File(".."));<br xmlns="http://www.w3.org/1999/xhtml"/>
              node.accept(new PrintVisitor());<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> </li>
          <li><tt>node</tt> is a <tt>DirectoryNode</tt> </li>
          <li>Polymorphism: <tt><tt>node.accept</tt></tt> calls <tt>DirectoryNode.accept</tt>
          </li>
          <li>That method calls <tt>v.visitDirectoryNode</tt> </li>
          <li><tt>v</tt> is a <tt>PrintVisitor</tt> </li>
          <li>Polymorphism: calls <tt>PrintVisitor.visitDirectoryNode</tt> </li>
          <li>Two polymorphic calls determine </li>
          <li>
            <ul>
              <li>node type </li>
              <li>visitor type </li>
            </ul>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide049">Double Dispatch Example</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-049.html"> [49/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_06.jpg" height="416" width="709"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide050">The VISITOR Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-050.html"> [50/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Context</h3>
        <ol xmlns="">
          <li>An object structure contains element classes of multiple types,
            and you want to carry out operations that depend on the object types.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The set of operations should be extensible over time.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>The set of element classes is fixed. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide051">The VISITOR Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-051.html"> [51/55] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Solution</h3>
        <ol xmlns="">
          <li>Define a visitor interface type that has methods for visiting
            elements of each of the given types.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Each element class defines an accept method that invokes the
            matching element visitation method on the visitor parameter.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>To implement an operation, define a class that implements the
            visitor interface type and supplies the operation s action for each
            element type. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide052">The VISITOR Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-052.html"> [52/55] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-10_un05.jpg" height="737" width="974"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide053">The VISITOR Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-053.html"> [53/55] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1"><b>Actual Name (file system
                  visitor)</b><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr style="font-family: monospace;">
              <td style="vertical-align: top;" rowspan="1" colspan="1">Element<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">FileSystemNode<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr style="font-family: monospace;">
              <td style="vertical-align: top;" rowspan="1" colspan="1">ConcreteElement<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">FileNode, DirectoryNode<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr style="font-family: monospace;">
              <td style="vertical-align: top;" rowspan="1" colspan="1">Visitor<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">FileSystemVisitor<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">
                ConcreteVisitor<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1"><tt>PrintVisitor</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
          </tbody>
        </table>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide054">Other Design Patterns</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-054.html"> [54/55] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Abstract Factory </li>
          <li>Bridge </li>
          <li>Builder </li>
          <li>Chain of Responsibility </li>
          <li>Flyweight </li>
          <li>Interpreter </li>
          <li>Mediator </li>
          <li>Memento </li>
          <li>State<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide055">Conclusion: What You Learned</a></span><span style="font-weight: normal"><a href="notes-horstmann-10-055.html"> [55/55] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>Object-oriented design  <br xmlns="http://www.w3.org/1999/xhtml"/>
            The design methodology  <br xmlns="http://www.w3.org/1999/xhtml"/>
            CRC cards and UML diagrams  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Design patterns<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Advanced Java  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Interface types, polymorphism, and inheritance  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Inner classes  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Reflection  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Multithreading  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Collections<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>User interface programming  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Building Swing applications  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Event handling  <br xmlns="http://www.w3.org/1999/xhtml"/>
            Graphics programming<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ol>
      <hr/><p class="flush">
      Revised: 2007/09/11 16:42</p></body></html>
