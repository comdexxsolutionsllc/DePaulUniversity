<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Horstmann Chapter 7</title></head><body><h1><a href="../index.html">SE450</a>: Horstmann Chapter 7</h1><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-000.html"> [0/86] </a></span></td></tr></table><p> </p><table width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Object-Oriented Design &amp; Patterns</a> [1/86] </td></tr><tr><td><a href="#slide002">Chapter Topics</a> [2/86] </td></tr><tr><td><a href="#slide003">Types</a> [3/86] </td></tr><tr><td><a href="#slide004">Java Types</a> [4/86] </td></tr><tr><td><a href="#slide005">Exercise: What kind of type?</a> [5/86] </td></tr><tr><td><a href="#slide006">Java Values</a> [6/86] </td></tr><tr><td><a href="#slide007">Exercise: What kind of value?</a> [7/86] </td></tr><tr><td><a href="#slide008">Subtype Relationship</a> [8/86] </td></tr><tr><td><a href="#slide009">Subtype Examples</a> [9/86] </td></tr><tr><td><a href="#slide010">Subtype Examples</a> [10/86] </td></tr><tr><td><a href="#slide011">The ArrayStoreException</a> [11/86] </td></tr><tr><td><a href="#slide012">Array References</a> [12/86] </td></tr><tr><td><a href="#slide013">Wrapper Classes</a> [13/86] </td></tr><tr><td><a href="#slide014">Enumerated Types</a> [14/86] </td></tr><tr><td><a href="#slide015">Typesafe Enumerations</a> [15/86] </td></tr><tr><td><a href="#slide016">Type Inquiry</a> [16/86] </td></tr><tr><td><a href="#slide017">The Class Class</a> [17/86] </td></tr><tr><td><a href="#slide018">An Employee Object vs. the Employee.class Object</a> [18/86] </td></tr><tr><td><a href="#slide019">Type Inquiry</a> [19/86] </td></tr><tr><td><a href="#slide020">Array Types</a> [20/86] </td></tr><tr><td><a href="#slide021">Object: The Cosmic Superclass</a> [21/86] </td></tr><tr><td><a href="#slide022">The toString Method</a> [22/86] </td></tr><tr><td><a href="#slide023">Overriding the toString Method</a> [23/86] </td></tr><tr><td><a href="#slide024">Overriding toString in Subclass</a> [24/86] </td></tr><tr><td><a href="#slide025">The equals Method</a> [25/86] </td></tr><tr><td><a href="#slide026">Overriding the equals Method</a> [26/86] </td></tr><tr><td><a href="#slide027">Overriding equals in Subclass</a> [27/86] </td></tr><tr><td><a href="#slide028">Not all equals Methods are Simple</a> [28/86] </td></tr><tr><td><a href="#slide029">The Object.equals Method</a> [29/86] </td></tr><tr><td><a href="#slide030">Requirements for equals Method</a> [30/86] </td></tr><tr><td><a href="#slide031">Fixing Employee.equals</a> [31/86] </td></tr><tr><td><a href="#slide032">The Perfect equals Method</a> [32/86] </td></tr><tr><td><a href="#slide033">Hashing</a> [33/86] </td></tr><tr><td><a href="#slide034">Hashing</a> [34/86] </td></tr><tr><td><a href="#slide035">Shallow and Deep Copy</a> [35/86] </td></tr><tr><td><a href="#slide036">Cloning</a> [36/86] </td></tr><tr><td><a href="#slide037">Cloning</a> [37/86] </td></tr><tr><td><a href="#slide038">The Cloneable Interface</a> [38/86] </td></tr><tr><td><a href="#slide039">The clone Method</a> [39/86] </td></tr><tr><td><a href="#slide040">Shallow Cloning</a> [40/86] </td></tr><tr><td><a href="#slide041">Deep Cloning</a> [41/86] </td></tr><tr><td><a href="#slide042">Deep Cloning</a> [42/86] </td></tr><tr><td><a href="#slide043">Cloning and Inheritance</a> [43/86] </td></tr><tr><td><a href="#slide044">Serialization</a> [44/86] </td></tr><tr><td><a href="#slide045">Serialization</a> [45/86] </td></tr><tr><td><a href="#slide046">How Serialization Works</a> [46/86] </td></tr><tr><td><a href="#slide047">How Serialization Works</a> [47/86] </td></tr><tr><td><a href="#slide048">Serialing Unserializable Classes</a> [48/86] </td></tr><tr><td><a href="#slide049">Reflection</a> [49/86] </td></tr><tr><td><a href="#slide050">Reflection</a> [50/86] </td></tr><tr><td><a href="#slide051">Enumerating Fields</a> [51/86] </td></tr><tr><td><a href="#slide052">Enumerating Constructors</a> [52/86] </td></tr><tr><td><a href="#slide053">Getting A Single Method Descriptor</a> [53/86] </td></tr><tr><td><a href="#slide054">Invoking a Method</a> [54/86] </td></tr><tr><td><a href="#slide055">Inspecting Objects</a> [55/86] </td></tr><tr><td><a href="#slide056">Inspecting Objects</a> [56/86] </td></tr><tr><td><a href="#slide057">Inspecting Array Elements</a> [57/86] </td></tr><tr><td><a href="#slide058">Generic Types</a> [58/86] </td></tr><tr><td><a href="#slide059">Generic Methods</a> [59/86] </td></tr><tr><td><a href="#slide060">Type Bounds</a> [60/86] </td></tr><tr><td><a href="#slide061">Type Bounds</a> [61/86] </td></tr><tr><td><a href="#slide062">Wildcards</a> [62/86] </td></tr><tr><td><a href="#slide063">Wildcards</a> [63/86] </td></tr><tr><td><a href="#slide064">Wildcards</a> [64/86] </td></tr><tr><td><a href="#slide065">Wildcards</a> [65/86] </td></tr><tr><td><a href="#slide066">Type Erasure</a> [66/86] </td></tr><tr><td><a href="#slide067">Limitations of Generics</a> [67/86] </td></tr><tr><td><a href="#slide068">Limitations of Generics</a> [68/86] </td></tr><tr><td><a href="#slide069">Components</a> [69/86] </td></tr><tr><td><a href="#slide070">A Builder Environment</a> [70/86] </td></tr><tr><td><a href="#slide071">Java Beans</a> [71/86] </td></tr><tr><td><a href="#slide072">Java Beans</a> [72/86] </td></tr><tr><td><a href="#slide073">A Calendar Bean</a> [73/86] </td></tr><tr><td><a href="#slide074">A Property Sheet</a> [74/86] </td></tr><tr><td><a href="#slide075">Facade Class</a> [75/86] </td></tr><tr><td><a href="#slide076">Facade Pattern</a> [76/86] </td></tr><tr><td><a href="#slide077">Facade Pattern</a> [77/86] </td></tr><tr><td><a href="#slide078">Facade Pattern</a> [78/86] </td></tr><tr><td><a href="#slide079">Bean Properties</a> [79/86] </td></tr><tr><td><a href="#slide080">Property Syntax</a> [80/86] </td></tr><tr><td><a href="#slide081">Java Naming Conventions</a> [81/86] </td></tr><tr><td><a href="#slide082">Editing Beans in a Builder Tool</a> [82/86] </td></tr><tr><td><a href="#slide083">Editing Beans in a Builder Tool</a> [83/86] </td></tr><tr><td><a href="#slide084">Packaging a Bean</a> [84/86] </td></tr><tr><td><a href="#slide085">Composing Beans</a> [85/86] </td></tr><tr><td><a href="#slide086">Composing Beans</a> [86/86] </td></tr></table><br/><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Object-Oriented Design &amp; Patterns</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-001.html"> [1/86] </a></span></td></tr></table><p> </p>
        <h4 xmlns="">Cay S. Horstmann</h4>
        <h3 xmlns="">Chapter 7</h3>
        <h3 xmlns="">The Java Object Model</h3>
        <img alt="horstmann-oodp2" src="../images/horstmann-oodp2.jpg" height="500" width="404"/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Chapter Topics</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-002.html"> [2/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>The Java Type System </li>
          <li>Type Inquiry </li>
          <li>The <tt>Object</tt> Class </li>
          <li>Shallow and Deep Copy </li>
          <li>Serialization </li>
          <li>Reflection </li>
          <li>The Java Beans Component Model </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Types</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-003.html"> [3/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Type: set of values and the operations that can be applied to the
            values </li>
          <li>Strongly typed language: compiler and run-time system check that
            no operation can execute that violates type system rules </li>
          <li>Compile-time check<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Employee e = new Employee();<br xmlns="http://www.w3.org/1999/xhtml"/>
              e.clear(); // ERROR</tt> </li>
          <li>Run-time check:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>e = null;<br xmlns="http://www.w3.org/1999/xhtml"/>
              e.setSalary(20000); // ERROR</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Java Types</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-004.html"> [4/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Primitive types:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>int short long byte<br xmlns="http://www.w3.org/1999/xhtml"/>
              char float double boolean</tt> </li>
          <li>Class types </li>
          <li>Interface types </li>
          <li>Array types </li>
          <li>The <tt>null</tt> type </li>
          <li>Note: <tt>void</tt> is not a type<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Exercise: What kind of type?</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-005.html"> [5/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>int</tt> </li>
          <li><tt>Rectangle</tt> </li>
          <li><tt>Shape</tt> </li>
          <li><tt>String[]</tt> </li>
          <li><tt>double[][]</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Java Values</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-006.html"> [6/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>value of primitive type </li>
          <li>reference to object of class type </li>
          <li>reference to array </li>
          <li><tt>null</tt> </li>
          <li>Note: Can't have value of interface type </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">Exercise: What kind of value?</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-007.html"> [7/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>13 </li>
          <li><tt>new Rectangle(5, 10, 20, 30);</tt> </li>
          <li><tt>"Hello"</tt> </li>
          <li><tt>new int[] { 2, 3, 5, 7, 11, 13 }</tt> </li>
          <li><tt>null</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Subtype Relationship</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-008.html"> [8/86] </a></span></td></tr></table><p> </p>
        S is a subtype of T if<br/>
        <ul xmlns="">
          <li>S and T are the same type </li>
          <li>S and T are both class types, and T is a direct or indirect
            superclass of S </li>
          <li>S is a class type, T is an interface type, and S or one of its
            superclasses implements T </li>
          <li>S and T are both interface types, and T is a direct or indirect
            superinterface of S </li>
          <li>S and T are both array types, and the component type of S is a
            subtype of the component type of T </li>
          <li>S is not a primitive type and T is the type <tt>Object</tt> </li>
          <li>S is an array type and T is <tt>Cloneable</tt> or <tt>Serializable</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>S is the <tt>null</tt> type and T is not a primitive type </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Subtype Examples</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-009.html"> [9/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Container</tt> is a subtype of <tt>Component</tt> </li>
          <li><tt>JButton</tt> is a subtype of <tt>Component</tt> </li>
          <li><tt>FlowLayout</tt> is a subtype of <tt>LayoutManager</tt> </li>
          <li><tt>ListIterator</tt> is a subtype of <tt>Iterator</tt> </li>
          <li><tt>Rectangle[]</tt> is a subtype of <tt>Shape[]</tt> </li>
          <li><tt>int[]</tt> is a subtype of <tt>Object</tt> </li>
          <li><tt>int</tt> is not a subtype of <tt>long</tt> </li>
          <li><tt>long</tt>  is not a subtype of <tt>int</tt> </li>
          <li><tt>int[]</tt> is not a subtype of <tt>Object[]</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Subtype Examples</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-010.html"> [10/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_01.jpg" height="823" width="697"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">The ArrayStoreException</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-011.html"> [11/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Rectangle[]</tt> is a subtype of <tt>Shape[]</tt> </li>
          <li>Can assign <tt>Rectangle[]</tt> value to <tt>Shape[]</tt>
            variable:
            <pre xml:space="preserve">Rectangle[] r = new Rectangle[10];<br xmlns="http://www.w3.org/1999/xhtml"/>Shape[] s = r;<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Both <tt>r</tt> and <tt>s</tt> are references to the same array
          </li>
          <li>That array holds rectangles </li>
          <li>The assignment<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>s[0] = new Polygon();</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            compiles </li>
          <li>Throws an <tt>ArrayStoreException</tt> at runtime </li>
          <li>Each array remembers its component type </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Array References</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-012.html"> [12/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_02.jpg" height="470" width="781"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Wrapper Classes</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-013.html"> [13/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Primitive types aren't classes </li>
          <li>Use wrappers when objects are expected </li>
          <li>Wrapper for each type:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Integer Short Long Byte<br xmlns="http://www.w3.org/1999/xhtml"/>Character Float Double Boolean<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Auto-boxing and auto-unboxing<tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt>
            <pre xml:space="preserve">ArrayList&lt;Integer&gt; numbers = new ArrayList&lt;Integer&gt;();<br xmlns="http://www.w3.org/1999/xhtml"/>numbers.add(13); // calls new Integer(13)<br xmlns="http://www.w3.org/1999/xhtml"/>int n = numbers.get(0); // calls intValue();<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Enumerated Types</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-014.html"> [14/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Finite set of values </li>
          <li>Example:  <tt>enum Size { SMALL, MEDIUM, LARGE }</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Typical use:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Size imageSize = Size.MEDIUM;</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if (imageSize == Size.SMALL) . . .</tt></li>
          <li>Safer than integer constants<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public static final int SMALL = 1;<br xmlns="http://www.w3.org/1999/xhtml"/>
              public static final int MEDIUM = 2;<br xmlns="http://www.w3.org/1999/xhtml"/>
              public static final int LARGE = 3;</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">Typesafe Enumerations</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-015.html"> [15/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>enum</tt> equivalent to class with fixed number of instances<br xmlns="http://www.w3.org/1999/xhtml"/>

<pre xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Size</span>
<span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-style: italic"><span style="color: #9A1900">/* ! */</span></span> <span style="font-weight: bold"><span style="color: #000000">Size</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Size</span> SMALL <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Size</span></span><span style="color: #990000">();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Size</span> MEDIUM <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Size</span></span><span style="color: #990000">();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Size</span> LARGE <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Size</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span>
</tt></pre>

          </li>
          <li><tt>enum</tt> types are classes; can add methods, fields,
            constructors<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">Type Inquiry</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-016.html"> [16/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Test whether <tt>e</tt> is a <tt>Shape</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if (e instanceof Shape) . . .</tt> </li>
          <li>Common before casts:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Shape s = (Shape) e;</tt> </li>
          <li>Don't know exact type of <tt>e</tt> </li>
          <li>Could be any class implementing <tt>Shape</tt> </li>
          <li>If <tt>e</tt> is <tt>null</tt>, test returns <tt>false</tt>
            (no exception) </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">The Class Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-017.html"> [17/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>getClass</tt> method gets class of any object </li>
          <li>Returns object of type <tt>Class</tt> </li>
          <li> <tt>Class</tt> object describes a <i>type</i>
            <pre xml:space="preserve">Object e = new Rectangle();<br xmlns="http://www.w3.org/1999/xhtml"/>Class c = e.getClass();<br xmlns="http://www.w3.org/1999/xhtml"/>System.out.println(c.getName()); // prints java.awt.Rectangle<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li><tt>Class.forName</tt> method yields <tt>Class</tt> object:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Class c = Class.forName("java.awt.Rectangle");</tt> </li>
          <li><tt>.class</tt> suffix yields <tt>Class</tt> object:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Class c = Rectangle.class; // java.awt prefix not needed</tt> </li>
          <li><tt>Class</tt> is a misnomer: <tt>int.class</tt>, <tt>void.class</tt>,<tt>Shape.class</tt>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">An Employee Object vs. the Employee.class Object</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-018.html"> [18/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_03.jpg" height="476" width="924"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Type Inquiry</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-019.html"> [19/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Test whether <tt>e</tt> is a <tt>Rectangle</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if (e.getClass() == Rectangle.class) . . .</tt> </li>
          <li>Ok to use <tt>==</tt> </li>
          <li>A unique <tt>Class</tt> object for every class </li>
          <li>Test fails for subclasses<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Use <tt>instanceof</tt> to test for subtypes:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if (e instanceof Rectangle) . . .</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">Array Types</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-020.html"> [20/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Can apply <tt>getClass</tt> to an array </li>
          <li>Returned object describes an array type<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">double[] a = new double[10];<br xmlns="http://www.w3.org/1999/xhtml"/>Class c = a.getClass();<br xmlns="http://www.w3.org/1999/xhtml"/>if (c.isArray())<br xmlns="http://www.w3.org/1999/xhtml"/>   System.out.println(c.getComponentType()); <br xmlns="http://www.w3.org/1999/xhtml"/>      // prints double<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li> <tt>getName</tt> produces strange names for array types<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">[D for double[])<br xmlns="http://www.w3.org/1999/xhtml"/>[[java.lang.String; for String[][]</pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">Object: The Cosmic Superclass</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-021.html"> [21/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>All classes extend <tt>Object</tt> </li>
          <li>Most useful methods:
            <ul>
              <li><tt>String toString()</tt> </li>
              <li><tt>boolean equals(Object otherObject)</tt> </li>
              <li><tt>Object clone()</tt> </li>
              <li><tt>int hashCode()</tt> </li>
            </ul>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">The toString Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-022.html"> [22/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Returns a string representation of the object </li>
          <li>Useful for debugging </li>
          <li>Example: <tt>Rectangle.toString</tt> returns something like<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>java.awt.Rectangle[x=5,y=10,width=20,height=30]</tt> </li>
          <li><tt>toString</tt> used by concatenation operator </li>
          <li><tt>aString + anObject</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            means<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>aString + anObject<b>.toString()</b></tt> </li>
          <li><tt>Object.toString</tt> prints class name and object address<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>System.out.println(System.out)<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> yields<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>java.io.PrintStream@d2460bf</tt> </li>
          <li>Implementor of <tt>PrintStream</tt> didn't override <tt>toString</tt>:
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">Overriding the toString Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-023.html"> [23/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Format all fields:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Employee <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public String toString() <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      return getClass().getName() <br xmlns="http://www.w3.org/1999/xhtml"/>         + "[name=" + name <br xmlns="http://www.w3.org/1999/xhtml"/>         + ",salary=" + salary <br xmlns="http://www.w3.org/1999/xhtml"/>         + "]"; <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Typical string:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Employee[name=Harry Hacker,salary=35000]<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">Overriding toString in Subclass</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-024.html"> [24/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Format superclass first </li>
          <li> <pre xml:space="preserve">public class Manager extends Employee <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public String toString() <br xmlns="http://www.w3.org/1999/xhtml"/>   {  <br xmlns="http://www.w3.org/1999/xhtml"/>      <b>return super.toString() </b> + "[department=" + department + "]"; <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/>} </pre>
          </li>
          <li>Typical string<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Manager[name=Dolly Dollar,salary=100000][department=Finance]<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Note that superclass reports actual class name </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">The equals Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-025.html"> [25/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>equals</tt> tests for equal <i>contents</i> </li>
          <li><tt>==</tt> tests for equal <i>location</i> </li>
          <li>Used in many standard library methods </li>
          <li>Example: <tt>ArrayList.indexOf<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt>
            <pre xml:space="preserve">/** <br xmlns="http://www.w3.org/1999/xhtml"/>   Searches for the first occurrence of the given argument, <br xmlns="http://www.w3.org/1999/xhtml"/>   testing for equality using the equals method. <br xmlns="http://www.w3.org/1999/xhtml"/>   @param elem an object. <br xmlns="http://www.w3.org/1999/xhtml"/>   @return the index of the first occurrence <br xmlns="http://www.w3.org/1999/xhtml"/>   of the argument in this list; returns -1 if <br xmlns="http://www.w3.org/1999/xhtml"/>   the object is not found. <br xmlns="http://www.w3.org/1999/xhtml"/>*/ <br xmlns="http://www.w3.org/1999/xhtml"/>public int indexOf(Object elem) <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   if (elem == null) <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      for (int i = 0; i &lt; size; i++) <br xmlns="http://www.w3.org/1999/xhtml"/>         if (elementData[i] == null) return i; <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   else <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      for (int i = 0; i &lt; size; i++) <br xmlns="http://www.w3.org/1999/xhtml"/>         if (elem.<b>equals</b>(elementData[i])) return i; <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   return -1; <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide026">Overriding the equals Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-026.html"> [26/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Notion of equality depends on class </li>
          <li>Common definition: compare all fields<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Employee <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public boolean equals(Object otherObject) <br xmlns="http://www.w3.org/1999/xhtml"/>      // not complete--see below <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      Employee other = (Employee)otherObject; <br xmlns="http://www.w3.org/1999/xhtml"/>      return name.equals(other.name) <br xmlns="http://www.w3.org/1999/xhtml"/>         &amp;&amp; salary == other.salary; <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Must cast the <tt>Object</tt> parameter to subclass </li>
          <li>Use <tt>==</tt> for primitive types, <tt>equals</tt> for object
            fields<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide027">Overriding equals in Subclass</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-027.html"> [27/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Call <tt>equals</tt> on superclass<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Manager <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public boolean equals(Object otherObject) <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      Manager other = (Manager)otherObject; <br xmlns="http://www.w3.org/1999/xhtml"/>      return super.equals(other) <br xmlns="http://www.w3.org/1999/xhtml"/>         &amp;&amp; department.equals(other.department); <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide028">Not all equals Methods are Simple</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-028.html"> [28/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Two sets are equal if they have the same elements <i>in some
              order<br xmlns="http://www.w3.org/1999/xhtml"/>
            </i>
            <pre xml:space="preserve">public boolean equals(Object o) <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   if (o == this) return true; <br xmlns="http://www.w3.org/1999/xhtml"/>   if (!(o instanceof Set)) return false; <br xmlns="http://www.w3.org/1999/xhtml"/>   Collection c = (Collection) o; <br xmlns="http://www.w3.org/1999/xhtml"/>   if (c.size() != size()) return false; <br xmlns="http://www.w3.org/1999/xhtml"/>   return containsAll(c); <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide029">The Object.equals Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-029.html"> [29/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li> <tt>Object.equals</tt> tests for identity:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Object <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public boolean equals(Object obj) <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      return this == obj; <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Override <tt>equals</tt> if you don't want to inherit that
            behavior </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide030">Requirements for equals Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-030.html"> [30/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><i>reflexive</i>: <tt>x.equals(x)</tt> </li>
          <li><i>symmetric</i>: <tt>x.equals(y)</tt> if and only if <tt>y.equals(x)</tt>
          </li>
          <li><i>transitive</i>: if <tt>x.equals(y)</tt>  and <tt>y.equals(z)</tt>,
            then <tt>x.equals(z)</tt> </li>
          <li><tt>x.equals(null)</tt> must return <tt>false</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide031">Fixing Employee.equals</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-031.html"> [31/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Violates two rules </li>
          <li>Add test for <tt>null</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if (otherObject == null) return false</tt> </li>
          <li>What happens if <tt>otherObject</tt> not an <tt>Employee</tt> </li>
          <li>Should return <tt>false</tt> (because of symmetry) </li>
          <li>Common error: use of <tt>instanceof<br xmlns="http://www.w3.org/1999/xhtml"/>
              if (!(otherObject instanceof Employee)) return false;<br xmlns="http://www.w3.org/1999/xhtml"/>
                 // don't do this for non-final classes<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> </li>
          <li>Violates symmetry: Suppose <tt>e, m</tt> have same name, salary<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>e.equals(m)</tt> is <tt>true</tt> (because <tt>m instanceof
              Employee</tt>)<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>m.equals(e)</tt> is <tt>false</tt> (because <tt>e</tt> isn't
            an instance of <tt>Manager</tt>) </li>
          <li>Remedy: Test for class equality<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if (getClass() != otherObject.getClass()) return false;</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide032">The Perfect equals Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-032.html"> [32/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Start with these three tests:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public boolean equals(Object otherObject) <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   if (this == otherObject) return true; <br xmlns="http://www.w3.org/1999/xhtml"/>   if (otherObject == null) return false; <br xmlns="http://www.w3.org/1999/xhtml"/>   if (getClass() != otherObject.getClass()) return false; <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>First test is an optimization </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide033">Hashing</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-033.html"> [33/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>hashCode</tt> method used in <tt>HashMap</tt>, <tt>HashSet</tt>
          </li>
          <li>Computes an <tt>int</tt> from an object </li>
          <li>Example: hash code of <tt>String<br xmlns="http://www.w3.org/1999/xhtml"/>
              int h = 0;<br xmlns="http://www.w3.org/1999/xhtml"/>
              for (int i = 0; i &lt; s.length(); i++)<br xmlns="http://www.w3.org/1999/xhtml"/>
                 h = 31 * h + s.charAt(i);</tt> </li>
          <li>Hash code of <tt>"eat"</tt> is 100184 </li>
          <li>Hash code of <tt>"tea"</tt> is 114704<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide034">Hashing</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-034.html"> [34/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Must be compatible with <tt>equals</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            if <tt>x.equals(y)</tt>, then <tt>x.hashCode() == y.hashCode()</tt> </li>
          <li><tt>Object.hashCode</tt> hashes memory address </li>
          <li><i>NOT</i> compatible with redefined <tt>equals</tt> </li>
          <li>Remedy: Hash all fields and combine codes:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Employee <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public int hashCode() <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      return name.hashCode() <br xmlns="http://www.w3.org/1999/xhtml"/>         + new Double(salary).hashCode(); <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide035">Shallow and Deep Copy</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-035.html"> [35/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Assignment (<tt>copy = e</tt>) makes shallow copy </li>
          <li>Clone to make deep copy </li>
          <li><tt>Employee cloned = (Employee)e.clone();</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide036">Cloning</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-036.html"> [36/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_06.jpg" height="441" width="551"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide037">Cloning</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-037.html"> [37/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Object.clone</tt> makes new object and copies all fields </li>
          <li>Cloning is subtle </li>
          <li><tt>Object.clone</tt> is <tt>protected</tt> </li>
          <li>Subclass <i>must</i> redefine <tt>clone</tt> to be <tt>public</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Employee <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   <b>public</b> Object clone() <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      return super.clone(); // not complete <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide038">The Cloneable Interface</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-038.html"> [38/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Object.clone</tt> is nervous about cloning </li>
          <li>Will only clone objects that implement <tt>Cloneable</tt>
            interface<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public interface Cloneable<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Interface has no methods! </li>
          <li>Tagging interface--used in test<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>if x implements Cloneable</tt> </li>
          <li><tt>Object.clone</tt> throws <tt>CloneNotSupportedException</tt>
          </li>
          <li>A checked exception </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide039">The clone Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-039.html"> [39/86] </a></span></td></tr></table><p> </p>
        <pre xmlns="" xml:space="preserve">public class Employee <br xmlns="http://www.w3.org/1999/xhtml"/>  implements Cloneable <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public Object clone() <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      try <br xmlns="http://www.w3.org/1999/xhtml"/>      { <br xmlns="http://www.w3.org/1999/xhtml"/>         return super.clone(); <br xmlns="http://www.w3.org/1999/xhtml"/>      } <br xmlns="http://www.w3.org/1999/xhtml"/>      catch(CloneNotSupportedException e) <br xmlns="http://www.w3.org/1999/xhtml"/>      { <br xmlns="http://www.w3.org/1999/xhtml"/>         return null; // won't happen <br xmlns="http://www.w3.org/1999/xhtml"/>      }<br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide040">Shallow Cloning</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-040.html"> [40/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>clone</tt> makes a shallow copy </li>
          <li>Instance fields aren't cloned<br xmlns="http://www.w3.org/1999/xhtml"/>
            <img xmlns="http://www.w3.org/1999/xhtml" alt="." src="../images/horstmann-07_07.jpg" height="498" width="976"/><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide041">Deep Cloning</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-041.html"> [41/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Why doesn't <tt>clone</tt> make a deep copy?<br xmlns="http://www.w3.org/1999/xhtml"/>
            Wouldn't work for cyclic data structures<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Not a problem for immutable fields </li>
          <li>You must clone mutable fields<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
        <pre xmlns="" xml:space="preserve">public class Employee <br xmlns="http://www.w3.org/1999/xhtml"/>  implements Cloneable <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   public Object clone() <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      try <br xmlns="http://www.w3.org/1999/xhtml"/>      { <br xmlns="http://www.w3.org/1999/xhtml"/>         Employee cloned = (Employee)super.clone();<br xmlns="http://www.w3.org/1999/xhtml"/>         cloned.hireDate = (Date)hiredate.clone();<br xmlns="http://www.w3.org/1999/xhtml"/>         return cloned; <br xmlns="http://www.w3.org/1999/xhtml"/>      } <br xmlns="http://www.w3.org/1999/xhtml"/>      catch(CloneNotSupportedException e) <br xmlns="http://www.w3.org/1999/xhtml"/>      { <br xmlns="http://www.w3.org/1999/xhtml"/>         return null; // won't happen <br xmlns="http://www.w3.org/1999/xhtml"/>      }<br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   ... <br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide042">Deep Cloning</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-042.html"> [42/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_08.jpg" height="810" width="1029"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide043">Cloning and Inheritance</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-043.html"> [43/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Object.clone</tt> is paranoid
            <ul>
              <li><tt>clone</tt> is protected </li>
            </ul>
            <ul>
              <li>clone only clones <tt>Cloneable</tt> objects<br xmlns="http://www.w3.org/1999/xhtml"/>
              </li>
            </ul>
            <ul>
              <li><tt>clone</tt> throws checked exception </li>
            </ul>
          </li>
          <li>You don't have that luxury </li>
          <li><tt>Manager.clone</tt> <i>must</i> be defined if <tt>Manager</tt>
            adds mutable fields </li>
          <li>Rule of thumb: if you extend a class that defines <tt>clone</tt>,
            redefine <tt>clone</tt> </li>
          <li>Lesson to learn: Tagging interfaces are inherited. Use them only
            to tag properties that inherit </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide044">Serialization</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-044.html"> [44/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Save collection of objects to stream<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Employee[] staff = new Employee[2]; <br xmlns="http://www.w3.org/1999/xhtml"/>staff.add(new Employee(...)); <br xmlns="http://www.w3.org/1999/xhtml"/>staff.add(new Employee(...)); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Construct <tt>ObjectOutputStream</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">ObjectOutputStream out <br xmlns="http://www.w3.org/1999/xhtml"/>   = new ObjectOutputStream( <br xmlns="http://www.w3.org/1999/xhtml"/>      new FileOutputStream("staff.dat")); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Save the array and close the stream<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">out.writeObject(staff); <br xmlns="http://www.w3.org/1999/xhtml"/>out.close(); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide045">Serialization</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-045.html"> [45/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>The array <i>and all of its objects and their dependent objects</i>
            are saved </li>
          <li><tt>Employee</tt> doesn't have to define any method </li>
          <li>Needs to implement the <tt>Serializable</tt> interface </li>
          <li>Another tagging interface with no methods </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide046">How Serialization Works</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-046.html"> [46/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Each newly encountered object is saved </li>
          <li>Each object gets a serial number in the stream </li>
          <li>No object is saved twice </li>
          <li>Reference to already encountered object saved as "reference to #"
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide047">How Serialization Works</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-047.html"> [47/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_09.jpg" height="468" width="1099"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide048">Serialing Unserializable Classes</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-048.html"> [48/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Some classes are not serializable </li>
          <li>Security? Anonymous classes? Programmer cluelessness? </li>
          <li>Example: <tt>Ellipse2D.Double</tt> </li>
          <li>How can we serialize <tt>Car</tt>?<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Suppress default serialization to avoid exception </li>
          <li>Mark with <tt>transient</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>private transient</tt> <tt>Ellipse2D frontTire;</tt> </li>
          <li>Supply <tt>private</tt> (!) methods<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>private void writeObject(ObjectOutputStream out)<br xmlns="http://www.w3.org/1999/xhtml"/>
              private void readObject(ObjectInputStream in)</tt> </li>
          <li>In these methods
            <ul>
              <li>Call <tt>writeDefaultObject</tt>/<tt>readDefaultObject</tt> </li>
              <li>Manually save other data<br xmlns="http://www.w3.org/1999/xhtml"/>
              </li>
            </ul>
          </li>
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch07_serial2/Car_java.html">file:horstmann/ch07_serial2/Car.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch07_serial2/Car.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch07_serial2/Car.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch07_serial2/Car.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch07_serial2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>geom<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   A serializable car shape.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Car</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Serializable
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> serialVersionUID <span style="color: #990000">=</span> <span style="color: #993399">2008L</span><span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a car.</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> x the left of the bounding rectangle</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> y the top of the bounding rectangle</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> width the width of the bounding rectangle</span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00018:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Car</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">,</span> <span style="color: #009900">int</span> width<span style="color: #990000">)</span>
<span style="color: #000000">00019:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>       body <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span>
<span style="color: #000000">00021:</span>          width <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>       roof <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> y<span style="color: #990000">,</span>
<span style="color: #000000">00023:</span>          width <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>       frontTire <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Ellipse2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span> y <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span>
<span style="color: #000000">00025:</span>          width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>       rearTire <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Ellipse2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">*</span> <span style="color: #993399">2</span> <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> y <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span>
<span style="color: #000000">00027:</span>          width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span> 
<span style="color: #000000">00030:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">writeObject</span></span><span style="color: #990000">(</span><span style="color: #008080">ObjectOutputStream</span> out<span style="color: #990000">)</span>
<span style="color: #000000">00031:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException
<span style="color: #000000">00032:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>       out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">defaultWriteObject</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00034:</span>       <span style="font-weight: bold"><span style="color: #000000">writeRectangularShape</span></span><span style="color: #990000">(</span>out<span style="color: #990000">,</span> frontTire<span style="color: #990000">);</span>
<span style="color: #000000">00035:</span>       <span style="font-weight: bold"><span style="color: #000000">writeRectangularShape</span></span><span style="color: #990000">(</span>out<span style="color: #990000">,</span> rearTire<span style="color: #990000">);</span>
<span style="color: #000000">00036:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00037:</span> 
<span style="color: #000000">00038:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">      A helper method to write a rectangular shape.</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> out the stream onto which to write the shape</span></span>
<span style="color: #000000">00041:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> s the shape to write</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00043:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">writeRectangularShape</span></span><span style="color: #990000">(</span><span style="color: #008080">ObjectOutputStream</span> out<span style="color: #990000">,</span>
<span style="color: #000000">00044:</span>       <span style="color: #008080">RectangularShape</span> s<span style="color: #990000">)</span>
<span style="color: #000000">00045:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException
<span style="color: #000000">00046:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>       out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeDouble</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00048:</span>       out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeDouble</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00049:</span>       out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeDouble</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00050:</span>       out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeDouble</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> 
<span style="color: #000000">00053:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">readObject</span></span><span style="color: #990000">(</span><span style="color: #008080">ObjectInputStream</span> in<span style="color: #990000">)</span>
<span style="color: #000000">00054:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException<span style="color: #990000">,</span> ClassNotFoundException
<span style="color: #000000">00055:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00056:</span>       in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">defaultReadObject</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00057:</span>       frontTire <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Ellipse2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00058:</span>       <span style="font-weight: bold"><span style="color: #000000">readRectangularShape</span></span><span style="color: #990000">(</span>in<span style="color: #990000">,</span> frontTire<span style="color: #990000">);</span>
<span style="color: #000000">00059:</span>       rearTire <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Ellipse2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00060:</span>       <span style="font-weight: bold"><span style="color: #000000">readRectangularShape</span></span><span style="color: #990000">(</span>in<span style="color: #990000">,</span> rearTire<span style="color: #990000">);</span>
<span style="color: #000000">00061:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00062:</span> 
<span style="color: #000000">00063:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00064:</span> <span style="font-style: italic"><span style="color: #9A1900">      A helper method to read a rectangular shape.</span></span>
<span style="color: #000000">00065:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> in the stream from which to read the shape</span></span>
<span style="color: #000000">00066:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> s the shape to read. The method sets the frame</span></span>
<span style="color: #000000">00067:</span> <span style="font-style: italic"><span style="color: #9A1900">      of this rectangular shape.</span></span>
<span style="color: #000000">00068:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00069:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">readRectangularShape</span></span><span style="color: #990000">(</span><span style="color: #008080">ObjectInputStream</span> in<span style="color: #990000">,</span>
<span style="color: #000000">00070:</span>       <span style="color: #008080">RectangularShape</span> s<span style="color: #990000">)</span>
<span style="color: #000000">00071:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException
<span style="color: #000000">00072:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00073:</span>       <span style="color: #009900">double</span> x <span style="color: #990000">=</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readDouble</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00074:</span>       <span style="color: #009900">double</span> y <span style="color: #990000">=</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readDouble</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00075:</span>       <span style="color: #009900">double</span> width <span style="color: #990000">=</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readDouble</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00076:</span>       <span style="color: #009900">double</span> height <span style="color: #990000">=</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readDouble</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00077:</span>       s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setFrame</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> width<span style="color: #990000">,</span> height<span style="color: #990000">);</span>
<span style="color: #000000">00078:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00079:</span> 
<span style="color: #000000">00080:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00081:</span> <span style="font-style: italic"><span style="color: #9A1900">      Draws the car.</span></span>
<span style="color: #000000">00082:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> g2 the graphics context</span></span>
<span style="color: #000000">00083:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00084:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics2D</span> g2<span style="color: #990000">)</span>
<span style="color: #000000">00085:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00086:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>body<span style="color: #990000">);</span>
<span style="color: #000000">00087:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>roof<span style="color: #990000">);</span>
<span style="color: #000000">00088:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>frontTire<span style="color: #990000">);</span>
<span style="color: #000000">00089:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>rearTire<span style="color: #990000">);</span>
<span style="color: #000000">00090:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00091:</span> 
<span style="color: #000000">00092:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00093:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00094:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00095:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"[body="</span> <span style="color: #990000">+</span> body
<span style="color: #000000">00096:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">",roof="</span> <span style="color: #990000">+</span> roof
<span style="color: #000000">00097:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">",frontTire="</span> <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #000000">formatRectangularShape</span></span><span style="color: #990000">(</span>frontTire<span style="color: #990000">)</span>
<span style="color: #000000">00098:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">",rearTire="</span> <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #000000">formatRectangularShape</span></span><span style="color: #990000">(</span>rearTire<span style="color: #990000">)</span>
<span style="color: #000000">00099:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"]"</span><span style="color: #990000">;</span>
<span style="color: #000000">00100:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00101:</span> 
<span style="color: #000000">00102:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00103:</span> <span style="font-style: italic"><span style="color: #9A1900">      A helper method to format a rectangular shape.</span></span>
<span style="color: #000000">00104:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> s the shape to format</span></span>
<span style="color: #000000">00105:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a formatted representation of the given shape</span></span>
<span style="color: #000000">00106:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00107:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">formatRectangularShape</span></span><span style="color: #990000">(</span><span style="color: #008080">RectangularShape</span> s<span style="color: #990000">)</span>
<span style="color: #000000">00108:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00109:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> RectangularShape<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">class</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00110:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"[x="</span> <span style="color: #990000">+</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00111:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">",y="</span> <span style="color: #990000">+</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00112:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">",width="</span> <span style="color: #990000">+</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00113:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">",height="</span> <span style="color: #990000">+</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00114:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"]"</span><span style="color: #990000">;</span>
<span style="color: #000000">00115:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00116:</span> 
<span style="color: #000000">00117:</span> 
<span style="color: #000000">00118:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Rectangle</span> body<span style="color: #990000">;</span>
<span style="color: #000000">00119:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Rectangle</span> roof<span style="color: #990000">;</span>
<span style="color: #000000">00120:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">transient</span></span> Ellipse2D<span style="color: #990000">.</span><span style="color: #008080">Double</span> frontTire<span style="color: #990000">;</span>
<span style="color: #000000">00121:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">transient</span></span> Ellipse2D<span style="color: #990000">.</span><span style="color: #008080">Double</span> rearTire<span style="color: #990000">;</span>
<span style="color: #000000">00122:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00123:</span> 
<span style="color: #000000">00124:</span> 
<span style="color: #000000">00125:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide049">Reflection</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-049.html"> [49/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Ability of running program to find out about its objects and
            classes </li>
          <li><tt>Class</tt> object reveals
            <ul>
              <li>superclass </li>
              <li>interfaces </li>
              <li>package </li>
              <li>names and types of fields </li>
              <li>names, parameter types, return types of methods </li>
              <li>parameter types of constructors </li>
            </ul>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide050">Reflection</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-050.html"> [50/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>Class getSuperclass()</tt> </li>
          <li><tt>Class[] getInterfaces()</tt> </li>
          <li><tt>Package getPackage()</tt> </li>
          <li><tt>Field[] getDeclaredFields()</tt> </li>
          <li><tt>Constructor[] getDeclaredConstructors()</tt> </li>
          <li><tt>Method[]</tt> <tt>getDeclaredMethods()</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide051">Enumerating Fields</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-051.html"> [51/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Print the names of all static fields of the <tt>Math</tt> class:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Field[] fields = Math.class.getDeclaredFields(); <br xmlns="http://www.w3.org/1999/xhtml"/>for (Field f : fields) <br xmlns="http://www.w3.org/1999/xhtml"/>   if (Modifier.isStatic(f.getModifiers())) <br xmlns="http://www.w3.org/1999/xhtml"/>      System.out.println(f.getName()); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide052">Enumerating Constructors</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-052.html"> [52/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Print the names and parameter types of all <tt>Rectangle</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            constructors:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">for (Constructor c : cons) <br xmlns="http://www.w3.org/1999/xhtml"/>{ <br xmlns="http://www.w3.org/1999/xhtml"/>   Class[] params = cc.getParameterTypes(); <br xmlns="http://www.w3.org/1999/xhtml"/>   System.out.print("Rectangle(");<br xmlns="http://www.w3.org/1999/xhtml"/>   boolean first = true; <br xmlns="http://www.w3.org/1999/xhtml"/>   for (Class p : params) <br xmlns="http://www.w3.org/1999/xhtml"/>   { <br xmlns="http://www.w3.org/1999/xhtml"/>      if (first) first = false; else System.out.print(", "); <br xmlns="http://www.w3.org/1999/xhtml"/>      System.out.print(p.getName()); <br xmlns="http://www.w3.org/1999/xhtml"/>   } <br xmlns="http://www.w3.org/1999/xhtml"/>   System.out.println(")"); <br xmlns="http://www.w3.org/1999/xhtml"/>} <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Yields<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Rectangle() <br xmlns="http://www.w3.org/1999/xhtml"/>Rectangle(java.awt.Rectangle) <br xmlns="http://www.w3.org/1999/xhtml"/>Rectangle(int, int, int, int) <br xmlns="http://www.w3.org/1999/xhtml"/>Rectangle(int, int) <br xmlns="http://www.w3.org/1999/xhtml"/>Rectangle(java.awt.Point, java.awt.Dimension) <br xmlns="http://www.w3.org/1999/xhtml"/>Rectangle(java.awt.Point) <br xmlns="http://www.w3.org/1999/xhtml"/>Rectangle(java.awt.Dimension) <br xmlns="http://www.w3.org/1999/xhtml"/><br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide053">Getting A Single Method Descriptor</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-053.html"> [53/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Supply method name </li>
          <li>Supply array of parameter types </li>
          <li>Example: Get <tt>Rectangle.contains(int, int)</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Method m = Rectangle.class.getDeclaredMethod(<br xmlns="http://www.w3.org/1999/xhtml"/>   "contains", int.class, int.class); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Example: Get default <tt>Rectangle</tt> constructor:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Constructor c = Rectangle.class.getDeclaredConstructor(); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li><tt>getDeclaredMethod</tt>, <tt>getDeclaredConstructor</tt> are
            varargs methods<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide054">Invoking a Method</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-054.html"> [54/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Supply implicit parameter (<tt>null</tt> for static methods)<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Supply array of explicit parameter values </li>
          <li>Wrap primitive types </li>
          <li>Unwrap primitive return value </li>
          <li>Example: Call <tt>System.out.println("Hello, World")</tt> the
            hard way.<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Method m = PrintStream.class.getDeclaredMethod(<br xmlns="http://www.w3.org/1999/xhtml"/>   "println", String.class);<br xmlns="http://www.w3.org/1999/xhtml"/>m.invoke(System.out, "Hello, World!"); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li><tt>invoke</tt> is a varargs method<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide055">Inspecting Objects</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-055.html"> [55/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Can obtain object contents at runtime </li>
          <li>Useful for generic debugging tools </li>
          <li>Need to gain access to private fields<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Class c = obj.getClass(); <br xmlns="http://www.w3.org/1999/xhtml"/>Field f = c.getDeclaredField(name); <br xmlns="http://www.w3.org/1999/xhtml"/>f.setAccessible(true); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Throws exception if security manager disallows access </li>
          <li>Access field value:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Object value = f.get(obj); <br xmlns="http://www.w3.org/1999/xhtml"/>f.set(obj, value); <br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Use wrappers for primitive types </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide056">Inspecting Objects</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-056.html"> [56/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Example: Peek inside string tokenizer </li>
          <li>Output<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">int currentPosition=0 <br xmlns="http://www.w3.org/1999/xhtml"/>int newPosition=-1 <br xmlns="http://www.w3.org/1999/xhtml"/>int maxPosition=13 <br xmlns="http://www.w3.org/1999/xhtml"/>java.lang.String str=Hello, World! <br xmlns="http://www.w3.org/1999/xhtml"/>java.lang.String delimiters=, <br xmlns="http://www.w3.org/1999/xhtml"/>boolean retDelims=false <br xmlns="http://www.w3.org/1999/xhtml"/>boolean delimsChanged=false <br xmlns="http://www.w3.org/1999/xhtml"/>char maxDelimChar=, <br xmlns="http://www.w3.org/1999/xhtml"/>--- <br xmlns="http://www.w3.org/1999/xhtml"/>int currentPosition=5 <br xmlns="http://www.w3.org/1999/xhtml"/>. . .<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch07_reflect2/FieldTester_java.html">file:horstmann/ch07_reflect2/FieldTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch07_reflect2/FieldTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch07_reflect2/FieldTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch07_reflect2/FieldTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch07_reflect2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span>reflect<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   This program shows how to use reflection to print</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   the names and values of all nonstatic fields of an object.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">FieldTester</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00012:</span>          <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IllegalAccessException
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       <span style="color: #008080">Random</span> r <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Random</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00015:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">spyFields</span></span><span style="color: #990000">(</span>r<span style="color: #990000">));</span>
<span style="color: #000000">00016:</span>       r<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextInt</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">After calling nextInt:</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>      
<span style="color: #000000">00018:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">spyFields</span></span><span style="color: #990000">(</span>r<span style="color: #990000">));</span>
<span style="color: #000000">00019:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">      Spies on the field names and values of an object.</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> obj the object whose fields to format</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> a string containing the names and values of</span></span>
<span style="color: #000000">00025:</span> <span style="font-style: italic"><span style="color: #9A1900">      all fields of obj</span></span>
<span style="color: #000000">00026:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00027:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">spyFields</span></span><span style="color: #990000">(</span><span style="color: #008080">Object</span> obj<span style="color: #990000">)</span>
<span style="color: #000000">00028:</span>          <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IllegalAccessException
<span style="color: #000000">00029:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>       <span style="color: #008080">StringBuilder</span> buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00031:</span>       Field<span style="color: #990000">[]</span> fields <span style="color: #990000">=</span> obj<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">getDeclaredFields</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00032:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">Field</span> f <span style="color: #990000">:</span> fields<span style="color: #990000">)</span>
<span style="color: #000000">00033:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>Modifier<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isStatic</span></span><span style="color: #990000">(</span>f<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getModifiers</span></span><span style="color: #990000">()))</span>
<span style="color: #000000">00035:</span>          <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>             f<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setAccessible</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>             <span style="color: #008080">Object</span> value <span style="color: #990000">=</span> f<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>obj<span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>             buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>f<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getType</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00039:</span>             buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">" "</span><span style="color: #990000">);</span>
<span style="color: #000000">00040:</span>             buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>f<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00041:</span>             buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"="</span><span style="color: #990000">);</span>
<span style="color: #000000">00042:</span>             buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">""</span> <span style="color: #990000">+</span> value<span style="color: #990000">);</span>
<span style="color: #000000">00043:</span>             buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="color: #000000">00044:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00047:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00049:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide057">Inspecting Array Elements</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-057.html"> [57/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Use static methods of <tt>Array</tt> class </li>
          <li>
            <pre xml:space="preserve">Object value = Array.get(a, i);<br xmlns="http://www.w3.org/1999/xhtml"/>Array.set(a, i, value);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>
            <pre xml:space="preserve">int n = Array.getLength(a);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Construct new array:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Object a = Array.newInstance(type, length);<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide058">Generic Types</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-058.html"> [58/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>A generic type has one or more type variables <br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Type variables are instantiated with class or interface types</li>
          <li>Cannot use primitive types, e.g. no <tt>ArrayList&lt;int&gt;</tt></li>
          <li>When defining generic classes, use type variables in definition:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class ArrayList&lt;<b>E</b>&gt;<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   public <b>E</b> get(int i) { . . . }<br xmlns="http://www.w3.org/1999/xhtml"/>   public <b>E</b> set(int i, <b>E</b> newValue) { . . . }<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>   private <b>E</b>[] elementData;<br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
          <li>NOTE: If <tt>S</tt> a subtyoe of <tt>T</tt>, <tt>ArrayList&lt;S&gt;</tt>
            is <i>not</i> a subtype of <tt>ArrayList&lt;T&gt;</tt>.</li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide059">Generic Methods</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-059.html"> [59/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Generic method = method with type parameter(s)</li>
          <li>
            <pre xml:space="preserve">public class Utils<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   public static &lt;E&gt; void fill(ArrayList&lt;E&gt; a, E value, int count)<br xmlns="http://www.w3.org/1999/xhtml"/>   {<br xmlns="http://www.w3.org/1999/xhtml"/>      for (int i = 0; i &lt; count; i++)<br xmlns="http://www.w3.org/1999/xhtml"/>         a.add(value);<br xmlns="http://www.w3.org/1999/xhtml"/>   }  <br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
          <li>A generic method in an ordinary (non-generic) class</li>
          <li>Type parameters are inferred in call<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">ArrayList&lt;String&gt; ids = new ArrayList&lt;String&gt;();<br xmlns="http://www.w3.org/1999/xhtml"/>Utils.fill(ids, "default", 10); // calls Utils.&lt;String&gt;fill<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide060">Type Bounds</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-060.html"> [60/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Type variables can be constrained with type bounds</li>
          <li>Constraints can make a method more useful</li>
          <li>The following method is limited:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static &lt;E&gt; void append(ArrayList&lt;E&gt; a, ArrayList&lt;E&gt; b, int count)<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   for (int i = 0; i &lt; count &amp;&amp; i &lt; b.size(); i++)<br xmlns="http://www.w3.org/1999/xhtml"/>      a.add(b.get(i));<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            Cannot append an <tt>ArrayList&lt;Rectangle&gt;</tt> to an <tt>ArrayList&lt;Shape&gt;</tt></li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide061">Type Bounds</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-061.html"> [61/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Overcome limitation with type bound:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static &lt;E, F<b> extends E</b>&gt; void append(<br xmlns="http://www.w3.org/1999/xhtml"/>   ArrayList&lt;E&gt; a, ArrayList&lt;F&gt; b, int count)<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   for (int i = 0; i &lt; count &amp;&amp; i &lt; b.size(); i++)<br xmlns="http://www.w3.org/1999/xhtml"/>      a.add(b.get(i));<br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
          <li><tt>extends</tt> means "subtype", i.e. extends or implements</li>
          <li>Can specify multiple bounds:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>E extends Cloneable &amp; Serializable</tt></li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide062">Wildcards</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-062.html"> [62/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Definition of <tt>append</tt> never uses type <tt>F</tt>. Can
            simplify with <i>wildcard</i>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static &lt;E&gt; void append(<br xmlns="http://www.w3.org/1999/xhtml"/>   ArrayList&lt;E&gt; a, ArrayList&lt;? extends E&gt; b, int count)<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   for (int i = 0; i &lt; count &amp;&amp; i &lt; b.size(); i++)<br xmlns="http://www.w3.org/1999/xhtml"/>      a.add(b.get(i));<br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide063">Wildcards</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-063.html"> [63/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Wildcards restrict methods that can be called: <br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>ArrayList&lt;? extendsE&gt;.set</tt> method has the form<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>? extends E add(? extends E newElement)</tt></li>
          <li>You cannot call this method! <br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>No value matches <tt>? extends E</tt> because <tt>?</tt> <i>is
              unknown</i><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Ok to call <tt>get</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>? extends E get(int i)</tt></li>
          <li>Can assign return value to an element of type <tt>E</tt></li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide064">Wildcards</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-064.html"> [64/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Wildcards can be bounded in opposite direction</li>
          <li><tt>? super F</tt> matches any supertype of <tt>F</tt></li>
          <li><tt>public static &lt;F&gt; void append(<br xmlns="http://www.w3.org/1999/xhtml"/>
                 ArrayList&lt;<b>? super F</b>&gt; a, ArrayList&lt;F&gt; b,
              int count)<br xmlns="http://www.w3.org/1999/xhtml"/>
              {<br xmlns="http://www.w3.org/1999/xhtml"/>
                 for (int i = 0; i &lt; count &amp;&amp; i &lt; b.size();
              i++)<br xmlns="http://www.w3.org/1999/xhtml"/>
                    a.add(b.get(i));<br xmlns="http://www.w3.org/1999/xhtml"/>
              }</tt></li>
          <li>Safe to call <tt>ArrayList&lt;? super F&gt;.add</tt>:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>boolean add(? super F newElement)</tt></li>
          <li>Can pass any element of type <tt>F</tt> (but not a supertype!)<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide065">Wildcards</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-065.html"> [65/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Typical example--start with<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static &lt;E extends Comparable&lt;E&gt;&gt; E getMax(ArrayList&lt;E&gt; a)<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   E max = a.get(0);<br xmlns="http://www.w3.org/1999/xhtml"/>   for (int i = 1; i &lt; a.size(); i++)<br xmlns="http://www.w3.org/1999/xhtml"/>      if (a.get(i).compareTo(max) &gt; 0) max = a.get(i);<br xmlns="http://www.w3.org/1999/xhtml"/>   return max;<br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
          <li><tt>E</tt> extends <tt>Comparable&lt;E&gt;</tt> so that we can
            call <tt>compareTo</tt></li>
          <li>Too restrictive--can't call with <tt>ArrayList&lt;GregorianCalendar&gt;</tt></li>
          <li><tt>GregorianCalendar</tt> <i>does not</i> implement <tt>Comparable&lt;GregorianCalendar&gt;</tt>,
            only <tt>Comparable&lt;Calendar&gt;</tt></li>
          <li>Wildcards to the rescue:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static &lt;E extends Comparable&lt;<b>? super E</b>&gt;&gt; E getMax(ArrayList&lt;E&gt; a)</pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide066">Type Erasure</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-066.html"> [66/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Virtual machine does not know about generic types</li>
          <li>Type variables are <i>erased</i>--replaced by type bound or <tt>Object</tt>
            if unbounded</li>
          <li>Ex. <tt>ArrayList&lt;E&gt;</tt> becomes<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class ArrayList<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   public <b>Object</b> get(int i) { . . . }<br xmlns="http://www.w3.org/1999/xhtml"/>   public <b>Object</b> set(int i, <b>Object</b> newValue) { . . . }<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>   private <b>Object</b>[] elementData;<br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
          <li>Ex. <tt>getmax</tt> becomes<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static <b>Comparable</b> getMax(ArrayList a)<br xmlns="http://www.w3.org/1999/xhtml"/>   // E extends Comparable&lt;? super E&gt; erased to Comparable</pre>
          </li>
          <li>Erasure necessary to interoperate with legacy (pre-JDK 5.0) code</li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide067">Limitations of Generics</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-067.html"> [67/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Cannot replace type variables with primitive types <br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Cannot construct new objects of generic type<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>a.add(new E()); // Error--would erase to new Object()</tt></li>
          <li>Workaround: Use class literals<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public static &lt;E&gt; void fillWithDefaults(ArrayList&lt;E&gt;,<br xmlns="http://www.w3.org/1999/xhtml"/>   <b>Class&lt;? extends E&gt; cl</b>, int count)<br xmlns="http://www.w3.org/1999/xhtml"/>   throws InstantiationException, IllegalAccessException<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   for (int i = 0; i &lt; count; i++)<br xmlns="http://www.w3.org/1999/xhtml"/>      a.add(<b>cl.newInstance()</b>);<br xmlns="http://www.w3.org/1999/xhtml"/>}</pre>
          </li>
          <li>Call as <tt>fillWithDefaults(a, Rectangle.class, count)</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide068">Limitations of Generics</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-068.html"> [68/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Cannot form arrays of parameterized types<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Comparable&lt;E&gt;[]</tt> is illegal. Remedy: <tt>ArrayList&lt;Comparable&lt;E&gt;&gt;</tt></li>
          <li>Cannot reference type parameters in a static context (static
            fields, methods, inner classes)</li>
          <li>Cannot throw or catch generic types</li>
          <li>Cannot have type clashes after erasure. Ex. <tt>GregorianCalendar</tt>
            cannot  implement <tt>Comparable&lt;GregorianCalendar&gt;</tt>
            since it already implements <tt>Comparable&lt;Calendar&gt;</tt>, and
            both erase to <tt>Comparable</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide069">Components</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-069.html"> [69/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>More functionality than a single class </li>
          <li>Reuse and customize in multiple contexts<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>"Plug components together" to form applications </li>
          <li>Successful model: Visual Basic controls
            <ul>
              <li>calendar </li>
              <li>graph </li>
              <li>database </li>
              <li>link to robot or instrument </li>
            </ul>
          </li>
          <li>Componens composed into program inside builder environment </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide070">A Builder Environment</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-070.html"> [70/86] </a></span></td></tr></table><p> </p>
        <img alt="" src="../images/horstmann-07_10.png" height="658" width="692"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide071">Java Beans</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-071.html"> [71/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Java component model </li>
          <li>Bean has
            <ul>
              <li>methods (just like classes) </li>
              <li>properties </li>
              <li>events </li>
            </ul>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide072">Java Beans</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-072.html"> [72/86] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-07_11.jpg" height="353" width="932"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide073">A Calendar Bean</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-073.html"> [73/86] </a></span></td></tr></table><p> </p>
        <img alt="" src="../images/horstmann-07_12.png" height="145" width="236"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide074">A Property Sheet</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-074.html"> [74/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Edit properties with <i>property sheet</i><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
         <img alt="" src="../images/horstmann-07_13.png" height="332" width="227"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide075">Facade Class</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-075.html"> [75/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Bean usually composed of multiple classes </li>
          <li>One class nominated as <i>facade class</i> </li>
          <li>Clients use only facade class methods </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide076">Facade Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-076.html"> [76/86] </a></span></td></tr></table><p> </p>
        Context<br/>
        <ol xmlns="">
          <li>A subsystem consists of multiple classes, making it complicated
            for clients to use<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Implementor may want to change subsystem classes </li>
          <li>Want to give a coherent entry point<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ol>
        Solution<br/>
        <ol xmlns="">
          <li>Define a facade class that exposes all capabilities of the
            subsystem as methods </li>
          <li>The facade methods delegate requests to the subsystem classes </li>
          <li>The subsystem classes do not know about the facade class<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide077">Facade Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-077.html"> [77/86] </a></span></td></tr></table><p> </p>
         
        <img alt="." src="../images/horstmann-07_un01.jpg" height="660" width="742"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide078">Facade Pattern</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-078.html"> [78/86] </a></span></td></tr></table><p> </p>
        <table xmlns="" style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Name in
                Design Pattern<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top; font-weight: bold;" rowspan="1" colspan="1">Actual Name
                (Beans)<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Client<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">Builder tool<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1"> Facade<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">Main bean class with which the
                tool interacts<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
            </tr>
            <tr>
              <td style="vertical-align: top; font-family: monospace;" rowspan="1" colspan="1">SubsystemClass<br xmlns="http://www.w3.org/1999/xhtml"/>
              </td>
              <td style="vertical-align: top;" rowspan="1" colspan="1">Class used to implement bean
                functionality</td>
            </tr>
          </tbody>
        </table>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide079">Bean Properties</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-079.html"> [79/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Property = value that you can get and/or set </li>
          <li>Most properties are get-and-set </li>
          <li>Can also have get-only and set-only </li>
          <li>Property <i>not the same as</i> instance field </li>
          <li>Setter can set fields, then call repaint </li>
          <li>Getter can query database </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide080">Property Syntax</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-080.html"> [80/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Not Java :-( </li>
          <li>C#, JavaScript, Visual Basic </li>
          <li><tt>b.<i>propertyName</i> = value<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> calls setter </li>
          <li><tt>variable = b.<i>propertyName</i><br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> calls getter </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide081">Java Naming Conventions</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-081.html"> [81/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>property = pair of methods<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public X get<i>PropertyName</i>()<br xmlns="http://www.w3.org/1999/xhtml"/>
              public void set<i>PropertyName</i>(X newValue)</tt> </li>
          <li>Replace <i><tt>propertyName</tt></i> with actual name<br xmlns="http://www.w3.org/1999/xhtml"/>
            (e.g. <tt>getColor</tt>/<tt>setColor</tt>) </li>
          <li>Exception for <tt>boolean</tt> properties:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>public boolean is<i>PropertyName</i>()</tt> </li>
          <li>Decapitalization hokus-pokus:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>getColor -&gt; color<br xmlns="http://www.w3.org/1999/xhtml"/>
              getURL -&gt; URL</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide082">Editing Beans in a Builder Tool</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-082.html"> [82/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Use wizard to make empty frame </li>
        </ul>
        <img alt="" src="../images/horstmann-07_15.png" height="503" width="723"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide083">Editing Beans in a Builder Tool</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-083.html"> [83/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Add button to frame </li>
          <li>Edit button with property sheet </li>
        </ul>
        <img alt="" src="../images/horstmann-07_16.png" height="658" width="692"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide084">Packaging a Bean</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-084.html"> [84/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Compile bean classes</li>
          <li>Create manifest file</li>
          <li>Run JAR tool:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>jar cvfm CarBean.jar CarBean.mf *.class</tt> </li>
          <li>Import JAR file into builder environment </li>
        </ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch07_carbean/CarBean_java.html">file:horstmann/ch07_carbean/CarBean.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch07_carbean/CarBean.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch07_carbean/CarBean.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch07_carbean/CarBean.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch07_carbean<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>geom<span style="color: #990000">.*;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.*;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   A component that draws a car shape.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CarBean</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> JComponent
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a default car bean.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">CarBean</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       x <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>       y <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>       width <span style="color: #990000">=</span> DEFAULT_CAR_WIDTH<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>       height <span style="color: #990000">=</span> DEFAULT_CAR_HEIGHT<span style="color: #990000">;</span>      
<span style="color: #000000">00020:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> 
<span style="color: #000000">00022:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      Sets the x property.</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newValue the new x position</span></span>
<span style="color: #000000">00025:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00026:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setX</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> newValue<span style="color: #990000">)</span>
<span style="color: #000000">00027:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>       x <span style="color: #990000">=</span> newValue<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>       <span style="font-weight: bold"><span style="color: #000000">repaint</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00030:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> 
<span style="color: #000000">00032:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">      Gets the x property.</span></span>
<span style="color: #000000">00034:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the x position</span></span>
<span style="color: #000000">00035:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00036:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00037:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00038:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x<span style="color: #990000">;</span>
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">      Sets the y property.</span></span>
<span style="color: #000000">00043:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newValue the new y position</span></span>
<span style="color: #000000">00044:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00045:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setY</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> newValue<span style="color: #990000">)</span>
<span style="color: #000000">00046:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>       y <span style="color: #990000">=</span> newValue<span style="color: #990000">;</span>
<span style="color: #000000">00048:</span>       <span style="font-weight: bold"><span style="color: #000000">repaint</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00049:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span> 
<span style="color: #000000">00051:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00052:</span> <span style="font-style: italic"><span style="color: #9A1900">      Gets the y property.</span></span>
<span style="color: #000000">00053:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the y position</span></span>
<span style="color: #000000">00054:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00055:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00056:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00057:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> y<span style="color: #990000">;</span>
<span style="color: #000000">00058:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00059:</span> 
<span style="color: #000000">00060:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paintComponent</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span>
<span style="color: #000000">00061:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00062:</span>       <span style="color: #008080">Graphics2D</span> g2 <span style="color: #990000">=</span> <span style="color: #990000">(</span>Graphics2D<span style="color: #990000">)</span> g<span style="color: #990000">;</span>
<span style="color: #000000">00063:</span>       Rectangle2D<span style="color: #990000">.</span>Double body
<span style="color: #000000">00064:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Rectangle2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y <span style="color: #990000">+</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> 
<span style="color: #000000">00065:</span>             width <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="color: #000000">00066:</span>       Ellipse2D<span style="color: #990000">.</span>Double frontTire
<span style="color: #000000">00067:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Ellipse2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span> 
<span style="color: #000000">00068:</span>             y <span style="color: #990000">+</span> height <span style="color: #990000">*</span> <span style="color: #993399">2</span> <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="color: #000000">00069:</span>       Ellipse2D<span style="color: #990000">.</span>Double rearTire
<span style="color: #000000">00070:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Ellipse2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">*</span> <span style="color: #993399">2</span> <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> 
<span style="color: #000000">00071:</span>             y <span style="color: #990000">+</span> height <span style="color: #990000">*</span> <span style="color: #993399">2</span> <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="color: #000000">00072:</span> 
<span style="color: #000000">00073:</span>       <span style="font-style: italic"><span style="color: #9A1900">// The bottom of the front windshield</span></span>
<span style="color: #000000">00074:</span>       Point2D<span style="color: #990000">.</span>Double r1
<span style="color: #000000">00075:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Point2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span> y <span style="color: #990000">+</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="color: #000000">00076:</span>       <span style="font-style: italic"><span style="color: #9A1900">// The front of the roof</span></span>
<span style="color: #000000">00077:</span>       Point2D<span style="color: #990000">.</span>Double r2
<span style="color: #000000">00078:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Point2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> y<span style="color: #990000">);</span>
<span style="color: #000000">00079:</span>       <span style="font-style: italic"><span style="color: #9A1900">// The rear of the roof</span></span>
<span style="color: #000000">00080:</span>       Point2D<span style="color: #990000">.</span>Double r3
<span style="color: #000000">00081:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Point2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">*</span> <span style="color: #993399">2</span> <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> y<span style="color: #990000">);</span>
<span style="color: #000000">00082:</span>       <span style="font-style: italic"><span style="color: #9A1900">// The bottom of the rear windshield</span></span>
<span style="color: #000000">00083:</span>       Point2D<span style="color: #990000">.</span>Double r4
<span style="color: #000000">00084:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Point2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>x <span style="color: #990000">+</span> width <span style="color: #990000">*</span> <span style="color: #993399">5</span> <span style="color: #990000">/</span> <span style="color: #993399">6</span><span style="color: #990000">,</span> y <span style="color: #990000">+</span> height <span style="color: #990000">/</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="color: #000000">00085:</span> 
<span style="color: #000000">00086:</span>       Line2D<span style="color: #990000">.</span>Double frontWindshield
<span style="color: #000000">00087:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Line2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>r1<span style="color: #990000">,</span> r2<span style="color: #990000">);</span>
<span style="color: #000000">00088:</span>       Line2D<span style="color: #990000">.</span>Double roofTop
<span style="color: #000000">00089:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Line2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>r2<span style="color: #990000">,</span> r3<span style="color: #990000">);</span>
<span style="color: #000000">00090:</span>       Line2D<span style="color: #990000">.</span>Double rearWindshield
<span style="color: #000000">00091:</span>          <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Line2D<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Double</span></span><span style="color: #990000">(</span>r3<span style="color: #990000">,</span> r4<span style="color: #990000">);</span>
<span style="color: #000000">00092:</span> 
<span style="color: #000000">00093:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>body<span style="color: #990000">);</span>
<span style="color: #000000">00094:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>frontTire<span style="color: #990000">);</span>
<span style="color: #000000">00095:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>rearTire<span style="color: #990000">);</span>
<span style="color: #000000">00096:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>frontWindshield<span style="color: #990000">);</span>
<span style="color: #000000">00097:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>roofTop<span style="color: #990000">);</span>
<span style="color: #000000">00098:</span>       g2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>rearWindshield<span style="color: #990000">);</span>
<span style="color: #000000">00099:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00100:</span> 
<span style="color: #000000">00101:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Dimension</span> <span style="font-weight: bold"><span style="color: #000000">getPreferredSize</span></span><span style="color: #990000">()</span> 
<span style="color: #000000">00102:</span>    <span style="color: #FF0000">{</span> 
<span style="color: #000000">00103:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Dimension</span></span><span style="color: #990000">(</span>DEFAULT_PANEL_WIDTH<span style="color: #990000">,</span> 
<span style="color: #000000">00104:</span>          DEFAULT_PANEL_HEIGHT<span style="color: #990000">);</span>
<span style="color: #000000">00105:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00106:</span> 
<span style="color: #000000">00107:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> x<span style="color: #990000">;</span>
<span style="color: #000000">00108:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> y<span style="color: #990000">;</span>
<span style="color: #000000">00109:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> width<span style="color: #990000">;</span>
<span style="color: #000000">00110:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> height<span style="color: #990000">;</span>
<span style="color: #000000">00111:</span>    
<span style="color: #000000">00112:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DEFAULT_CAR_WIDTH <span style="color: #990000">=</span> <span style="color: #993399">60</span><span style="color: #990000">;</span>
<span style="color: #000000">00113:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DEFAULT_CAR_HEIGHT <span style="color: #990000">=</span> <span style="color: #993399">30</span><span style="color: #990000">;</span>
<span style="color: #000000">00114:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DEFAULT_PANEL_WIDTH <span style="color: #990000">=</span> <span style="color: #993399">160</span><span style="color: #990000">;</span>
<span style="color: #000000">00115:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DEFAULT_PANEL_HEIGHT <span style="color: #990000">=</span> <span style="color: #993399">130</span><span style="color: #990000">;</span>
<span style="color: #000000">00116:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00117:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <a href="../code/src/horstmann/ch07_carbean/CarBean.mf">file:horstmann/ch07_carbean/CarBean.mf</a>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide085">Composing Beans</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-085.html"> [85/86] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Make new frame </li>
          <li>Add car bean, slider to frame </li>
          <li>Edit <tt>stateChanged</tt> event of slider </li>
          <li>Add handler code<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>carBean1.setX(jSlider1.getValue());</tt> </li>
          <li>Compile and run </li>
          <li>Move slider: the car moves </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide086">Composing Beans</a></span><span style="font-weight: normal"><a href="notes-horstmann-07-086.html"> [86/86] </a></span></td></tr></table><p> </p>
        <img alt="" src="../images/horstmann-07_17.png" height="658" width="692"/><br/>
      <hr/><p class="flush">
      Revised: 2007/11/02 18:30</p></body></html>
