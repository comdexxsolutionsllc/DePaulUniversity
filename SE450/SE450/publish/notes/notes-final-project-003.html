<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Final Project Requirements: Car Behavior</title></head><body><table width="100%" class="title"><colgroup><col width="100%"/><col align="left"/></colgroup><tr><td><span style="font-weight: bold; font-size: larger"><a href="../index.html">SE450</a>: <a href="notes-final-project-004.html">Project Description: Car Behavior</a></span><span style="font-weight: normal"><a href="notes-final-project.html#slide003"> [3/12] </a></span></td><td valign="top"><a href="notes-final-project-002.html"><img border="0" src="../images/prev.gif" alt="Previous page"/></a><a href="notes-final-project-000.html"><img border="0" src="../images/toc.gif" alt="Contents"/></a><a href="notes-final-project-004.html"><img border="0" src="../images/next.gif" alt="Next page"/></a></td></tr></table><p> </p>
        <p xmlns="">
          The behavior of a car depends up the distance to the nearest
          obstacle.  There are three attributes regulating this
          behavior, which may vary from car to car.
        </p>

<pre xmlns="" xml:space="preserve"><tt> maxVelocity    <span style="font-style: italic"><span style="color: #9A1900">// The maximum velocity of the car (in meters/second)</span></span>
 brakeDistance  <span style="font-style: italic"><span style="color: #9A1900">// If distance to nearest obstacle is &lt;= brakeDistance,</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">//   then the car will start to slow down (in meters)</span></span>
 stopDistance   <span style="font-style: italic"><span style="color: #9A1900">// If distance to nearest obstacle is == stopDistance,</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">//   then the car will stop (in meters)</span></span>
</tt></pre>

        <p xmlns="">
          Cars also have the following attribute, which determines how
          much space the consume:
        </p>

<pre xmlns="" xml:space="preserve"><tt> length  <span style="font-style: italic"><span style="color: #9A1900">// Length of the car (in meters)</span></span>
</tt></pre>

        <p xmlns="">
          Suppose a car has the following values for the first three attributes.
        </p>

<pre xmlns="" xml:space="preserve"><tt> maxVelocity <span style="color: #990000">=</span> <span style="color: #993399">30.0</span> 
 brakeDistance <span style="color: #990000">=</span> <span style="color: #993399">10.0</span>
 stopDistance <span style="color: #990000">=</span> <span style="color: #993399">1.0</span>
</tt></pre>

        <p xmlns="">
          If the nearest obstacle is 12 meters away, then the car will
          assume its <tt>maxVelocity</tt>.  If the nearest obstacle is
          1 meter away, the car will stop.  If the nearest obstacle is
          5 meters away, the car will consider the distance to the
          obstacle in computing its velocity.  You can use the
          following formula to compute the next position of the car.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="color: #009900">double</span> velocity <span style="color: #990000">=</span> <span style="color: #990000">(</span>maxVelocity <span style="color: #990000">/</span> <span style="color: #990000">(</span>brakeDistance <span style="color: #990000">-</span> stopDistance<span style="color: #990000">))</span>
                  <span style="color: #990000">*</span> <span style="color: #990000">(</span>distanceToObstacle <span style="color: #990000">-</span> stopDistance<span style="color: #990000">);</span>
velocity <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">max</span></span><span style="color: #990000">(</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span> velocity<span style="color: #990000">);</span>
velocity <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">min</span></span><span style="color: #990000">(</span>maxVelocity<span style="color: #990000">,</span> velocity<span style="color: #990000">);</span>
nextFrontPosition <span style="color: #990000">=</span> frontPosition <span style="color: #990000">+</span> velocity <span style="color: #990000">*</span> timeStep<span style="color: #990000">;</span>
</tt></pre>

        <p xmlns="">
          Since we do not consider acceleration, you do not need to
          store the velocity as an attribute.
        </p>
        <p xmlns="">
          <b>A student comment</b> The updateVelocity algorithm
          allowed cars move at their maximum velocity if there were no
          obstacles within braking distance. However, it's possible
          for a slow car to be in front of a fast car, outside the
          fast cars braking distance but within the fast cars maximum
          velocity.  On the next time step the fast car jumps ahead of
          the slow car.

          To clarify, a fast car has position 0, maximum velocity 30,
          and braking distance 10.  A slow car has position 15 and
          maximum velocity 10.  On the next time step the fast car
          will update it's position to 0+30 = 30, leapfrogging the
          slow car that is now at position 15+10 = 25.

          To fix this, I changed the updateVelocity algorithm to say
          that if there's a car outside of our braking distance but
          inside our max velocity, we adopt velocity of
          distanceToObject / 2.
        </p>
      <p><a href="notes-final-project-002.html"><img border="0" src="../images/prev.gif" alt="Previous page"/></a><a href="notes-final-project-000.html"><img border="0" src="../images/toc.gif" alt="Contents"/></a><a href="notes-final-project-004.html"><img border="0" src="../images/next.gif" alt="Next page"/></a></p><script language="JavaScript1.2" type="text/javascript"><!--
        function next () {
          window.location = 'notes-final-project-004.html';
        }
        document.onkeypress = next;
      --></script></body></html>
