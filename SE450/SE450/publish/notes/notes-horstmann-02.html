<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Horstmann Chapter 2</title></head><body><h1><a href="../index.html">SE450</a>: Horstmann Chapter 2</h1><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-000.html"> [0/76] </a></span></td></tr></table><p> </p><table width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Object-Oriented Design &amp; Patterns</a> [1/76] </td></tr><tr><td><a href="#slide002">Chapter Topics</a> [2/76] </td></tr><tr><td><a href="#slide003">From Problem to Code</a> [3/76] </td></tr><tr><td><a href="#slide004">Analysis Phase</a> [4/76] </td></tr><tr><td><a href="#slide005">Design Phase</a> [5/76] </td></tr><tr><td><a href="#slide006">Implementation Phase</a> [6/76] </td></tr><tr><td><a href="#slide007">Object and Class Concepts</a> [7/76] </td></tr><tr><td><a href="#slide008">Identifying Classes</a> [8/76] </td></tr><tr><td><a href="#slide009">Identifying Classes</a> [9/76] </td></tr><tr><td><a href="#slide010">Categories of Classes</a> [10/76] </td></tr><tr><td><a href="#slide011">Identifying Responsibilities</a> [11/76] </td></tr><tr><td><a href="#slide012">Responsibilities</a> [12/76] </td></tr><tr><td><a href="#slide013">Class Relationships
      </a> [13/76] </td></tr><tr><td><a href="#slide014">Dependency Relationship</a> [14/76] </td></tr><tr><td><a href="#slide015">Coupling</a> [15/76] </td></tr><tr><td><a href="#slide016">Aggregation</a> [16/76] </td></tr><tr><td><a href="#slide017">Multiplicities</a> [17/76] </td></tr><tr><td><a href="#slide018">Inheritance</a> [18/76] </td></tr><tr><td><a href="#slide019">Use Cases</a> [19/76] </td></tr><tr><td><a href="#slide020">Sample Use Case</a> [20/76] </td></tr><tr><td><a href="#slide021">Sample Use Case -- Variations</a> [21/76] </td></tr><tr><td><a href="#slide022">CRC Cards</a> [22/76] </td></tr><tr><td><a href="#slide023">CRC Cards</a> [23/76] </td></tr><tr><td><a href="#slide024">CRC Cards</a> [24/76] </td></tr><tr><td><a href="#slide025">Walkthroughs</a> [25/76] </td></tr><tr><td><a href="#slide026">Walkthroughs</a> [26/76] </td></tr><tr><td><a href="#slide027">UML Diagrams</a> [27/76] </td></tr><tr><td><a href="#slide028">Class Diagrams</a> [28/76] </td></tr><tr><td><a href="#slide029">Class Diagrams</a> [29/76] </td></tr><tr><td><a href="#slide030">Class Relationships</a> [30/76] </td></tr><tr><td><a href="#slide031">Multiplicities</a> [31/76] </td></tr><tr><td><a href="#slide032">Composition</a> [32/76] </td></tr><tr><td><a href="#slide033">Association</a> [33/76] </td></tr><tr><td><a href="#slide034">Association</a> [34/76] </td></tr><tr><td><a href="#slide035">Interface Types</a> [35/76] </td></tr><tr><td><a href="#slide036">Tips</a> [36/76] </td></tr><tr><td><a href="#slide037">Sequence Diagrams</a> [37/76] </td></tr><tr><td><a href="#slide038">Self call</a> [38/76] </td></tr><tr><td><a href="#slide039">Object Construction</a> [39/76] </td></tr><tr><td><a href="#slide040">State Diagram</a> [40/76] </td></tr><tr><td><a href="#slide041">Design Documentation</a> [41/76] </td></tr><tr><td><a href="#slide042">Case Study: Voice Mail System</a> [42/76] </td></tr><tr><td><a href="#slide043">Use Case: Reach an Extension</a> [43/76] </td></tr><tr><td><a href="#slide044">Use Case: Leave a Message</a> [44/76] </td></tr><tr><td><a href="#slide045">Use Case: Log in</a> [45/76] </td></tr><tr><td><a href="#slide046">Use Case: Retrieve Messages</a> [46/76] </td></tr><tr><td><a href="#slide047">Use Case: Retrieve Messages</a> [47/76] </td></tr><tr><td><a href="#slide048">Use Case: Change the Greeting</a> [48/76] </td></tr><tr><td><a href="#slide049">Use Case: Change the Greeting</a> [49/76] </td></tr><tr><td><a href="#slide050">Use Case: Change the Passcode</a> [50/76] </td></tr><tr><td><a href="#slide051">Use Case: Change the Passcode</a> [51/76] </td></tr><tr><td><a href="#slide052">CRC Cards for Voice Mail System</a> [52/76] </td></tr><tr><td><a href="#slide053">Initial CRC Cards: Mailbox</a> [53/76] </td></tr><tr><td><a href="#slide054">Initial CRC Cards: MessageQueue</a> [54/76] </td></tr><tr><td><a href="#slide055">Initial CRC Cards: MailSystem</a> [55/76] </td></tr><tr><td><a href="#slide056">Telephone</a> [56/76] </td></tr><tr><td><a href="#slide057">Telephone</a> [57/76] </td></tr><tr><td><a href="#slide058">Connection</a> [58/76] </td></tr><tr><td><a href="#slide059">Connection</a> [59/76] </td></tr><tr><td><a href="#slide060">Analyze Use Case: Leave a message</a> [60/76] </td></tr><tr><td><a href="#slide061">Result of Use Case Analysis</a> [61/76] </td></tr><tr><td><a href="#slide062">Result of Use Case Analysis</a> [62/76] </td></tr><tr><td><a href="#slide063">Result of Use Case Analysis</a> [63/76] </td></tr><tr><td><a href="#slide064">Result of Use Case Analysis</a> [64/76] </td></tr><tr><td><a href="#slide065">Analyse Use Case: Retrieve messages</a> [65/76] </td></tr><tr><td><a href="#slide066">Result of Use Case Analysis</a> [66/76] </td></tr><tr><td><a href="#slide067">CRC Summary</a> [67/76] </td></tr><tr><td><a href="#slide068">UML Class Diagram for Mail System</a> [68/76] </td></tr><tr><td><a href="#slide069">Dependency Relationships</a> [69/76] </td></tr><tr><td><a href="#slide070">Aggregation Relationships</a> [70/76] </td></tr><tr><td><a href="#slide071">UML Class Diagram for Voice Mail System</a> [71/76] </td></tr><tr><td><a href="#slide072">Sequence Diagram for Use Case: Leave  a message</a> [72/76] </td></tr><tr><td><a href="#slide073">Interpreting a Sequence Diagram</a> [73/76] </td></tr><tr><td><a href="#slide074">Sequence Diagram for Use Case: Retrieve messages</a> [74/76] </td></tr><tr><td><a href="#slide075">Connection State Diagram</a> [75/76] </td></tr><tr><td><a href="#slide076">Java Implementation</a> [76/76] </td></tr></table><br/><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Object-Oriented Design &amp; Patterns</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-001.html"> [1/76] </a></span></td></tr></table><p> </p>
        <h4 xmlns="">Cay S. Horstmann</h4>
        <h3 xmlns="">Chapter 2</h3>
        <h3 xmlns="">The Object-Oriented Design Process<br xmlns="http://www.w3.org/1999/xhtml"/>
        </h3>
        <img alt="horstmann-oodp2" src="../images/horstmann-oodp2.jpg" height="500" width="404"/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Chapter Topics</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-002.html"> [2/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>From Problem to Code </li>
          <li>The Object and Class Concepts </li>
          <li>Identifying Classes </li>
          <li>Identifying Responsibilities </li>
          <li>Relationships Between Classes<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Use Cases<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>CRC Cards </li>
          <li>UML Class Diagrams </li>
          <li>Sequence Diagrams </li>
          <li>State Diagrams<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Using <tt>javadoc</tt> for Design Documentation<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Case Study: A Voice Mail System </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">From Problem to Code</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-003.html"> [3/76] </a></span></td></tr></table><p> </p>
        Three Phases:<br/>
        <ul xmlns="">
          <li>Analysis </li>
          <li>Design </li>
          <li>Implementation </li>
        </ul>
        Case Study: Voice Mail System<br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Analysis Phase</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-004.html"> [4/76] </a></span></td></tr></table><p> </p>
        Functional Specification<br/>
        <ul xmlns="">
          <li>Completely defines tasks to be solved </li>
          <li>Free from internal contradictions </li>
          <li>Readable both by domain experts and software developers </li>
          <li>Reviewable by diverse interested parties </li>
          <li>Testable against reality </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Design Phase</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-005.html"> [5/76] </a></span></td></tr></table><p> </p>
        Goals<br/>
        <ul xmlns="">
          <li>Identify classes </li>
          <li>Identify behavior of classes </li>
          <li>Identify relationships among classes </li>
        </ul>
        Artifacts<br/>
        <ul xmlns="">
          <li>Textual description of classes and key methods </li>
          <li>Diagrams of class relationships </li>
          <li>Diagrams of important usage scenarios </li>
          <li>State diagrams for objects with rich state </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Implementation Phase</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-006.html"> [6/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Implement and test classes </li>
          <li>Combine classes into program </li>
          <li>Avoid "big bang" integration </li>
          <li>Prototypes can be very useful </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">Object and Class Concepts</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-007.html"> [7/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Object: Three characteristic concepts 
            
            <ul>
              <li>State </li>
              <li>Behavior </li>
              <li>Identity </li>
            </ul>
          </li>
          <li>Class: Collection of similar objects </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Identifying Classes</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-008.html"> [8/76] </a></span></td></tr></table><p> </p>
        Rule of thumb: Look for <i xmlns="">nouns</i> in problem description<br/>
        <ul xmlns="">
          <li><tt>Mailbox</tt> </li>
          <li><tt>Message</tt> </li>
          <li><tt>User</tt> </li>
          <li><tt>Passcode</tt> </li>
          <li><tt>Extension</tt> </li>
          <li><tt>Menu</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Identifying Classes</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-009.html"> [9/76] </a></span></td></tr></table><p> </p>
        Focus on <i xmlns="">concepts</i>, not implementation<br/>
        <ul xmlns="">
          <li><tt>MessageQueue</tt> stores messages </li>
          <li>Don't worry yet how the queue is implemented<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Categories of Classes</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-010.html"> [10/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Tangible Things </li>
          <li>Agents </li>
          <li>Events and Transactions </li>
          <li>Users and Roles </li>
          <li>Systems </li>
          <li>System interfaces and devices </li>
          <li>Foundational Classes </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">Identifying Responsibilities</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-011.html"> [11/76] </a></span></td></tr></table><p> </p>
        Rule of thumb: Look for <i xmlns="">verbs</i> in problem description<br/>
        <br/>
        Behavior of <tt xmlns="">MessageQueue</tt>:<br/>
        <ul xmlns="">
          <li>Add message to tail </li>
          <li>Remove message from head </li>
          <li>Test whether queue is empty </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Responsibilities</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-012.html"> [12/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>OO Principle: Every operation is the responsibility of a single
            class </li>
          <li>Example: Add message to mailbox </li>
          <li>Who is responsible: <tt>Message</tt> or <tt>Mailbox</tt>? </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Class Relationships
      </a></span><span style="font-weight: normal"><a href="notes-horstmann-02-013.html"> [13/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Dependency ("uses") </li>
          <li>Aggregation ("has") </li>
          <li>Inheritance ("is") </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Dependency Relationship</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-014.html"> [14/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li><tt>C</tt>  depends on <tt>D</tt>: Method of <tt>C</tt>
            manipulates objects of <tt>D</tt> </li>
          <li>Example: <tt>Mailbox</tt> depends on <tt>Message</tt> </li>
          <li>If <tt>C</tt> <i>doesn't use</i> <tt>D</tt>, then <tt>C</tt>
            can be developed without knowing about <tt>D</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">Coupling</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-015.html"> [15/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Minimize dependency: reduce <i>coupling</i> </li>
          <li>Example: Replace<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">void print() // prints to System.out<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
            with<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">String getText() // can print anywhere<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Removes dependence on <tt>System</tt>, <tt>PrintStream</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">Aggregation</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-016.html"> [16/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Object of a class contains objects of another class </li>
          <li>Example: <tt>MessageQueue</tt> aggregates <tt>Messages</tt> </li>
          <li>Example: <tt>Mailbox</tt> aggregates <tt>MessageQueue</tt> </li>
          <li>Implemented through instance fields </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">Multiplicities</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-017.html"> [17/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>1 : 1 or 1 : 0...1 relationship:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class Mailbox<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>   private Greeting myGreeting;<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>1 : <i>n</i> relationship:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">public class MessageQueue<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>   . . .<br xmlns="http://www.w3.org/1999/xhtml"/>   private ArrayList&lt;Message&gt; elements;<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">Inheritance</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-018.html"> [18/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>More general class = superclass </li>
          <li>More specialized class = subclass </li>
          <li>Subclass supports all method interfaces of superclass (but
            implementations may differ) </li>
          <li>Subclass may have added methods, added state </li>
          <li>Subclass inherits from superclass </li>
          <li>Example: <tt>ForwardedMessage</tt> inherits from <tt>Message</tt>
          </li>
          <li>Example: <tt>Greeting</tt> <i>does not</i> inherit from <tt>Message</tt>
            (Can't store greetings in mailbox) </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Use Cases</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-019.html"> [19/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Analysis technique </li>
          <li>Each <i>use case</i> focuses on a specific scenario </li>
          <li>Use case = sequence of <i>actions</i> </li>
          <li>Action = interaction between <i>actor</i> and computer system<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Each action yields a <i>result</i> </li>
          <li>Each result has a <i>value</i> to one of the actors </li>
          <li>Use <i>variations</i> for exceptional situations </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">Sample Use Case</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-020.html"> [20/76] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Leave a Message</h3>
        <ol xmlns="">
          <li>Caller dials main number of voice mail system </li>
          <li>System speaks prompt<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Enter mailbox number followed by #<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>User types extension number </li>
          <li>System speaks<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">You have reached mailbox xxxx. Please leave a message now<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Caller speaks message </li>
          <li>Caller hangs up </li>
          <li>System places message in mailbox </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">Sample Use Case -- Variations</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-021.html"> [21/76] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Variation #1<br xmlns="http://www.w3.org/1999/xhtml"/>
        </h3>
        1.1. In step 3, user enters invalid extension number<br/>
        1.2. Voice mail system speaks<br/>
        <pre xmlns="" xml:space="preserve">     You have typed an invalid mailbox number.<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
        1.3. Continue with step 2.<br/>
        <h3 xmlns="">Variation #2</h3>
        2.1. After step 4, caller hangs up instead of speaking message<br/>
        2.3. Voice mail system discards empty message<br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">CRC Cards</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-022.html"> [22/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>CRC = Classes, Responsibilities, Collaborators<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Developed by Beck and Cunningham </li>
          <li>Use an index card for each class </li>
          <li>Class name on top of card </li>
          <li>Responsibilities on left </li>
          <li>Collaborators on right </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">CRC Cards</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-023.html"> [23/76] </a></span></td></tr></table><p> </p>
        <img alt="" src="../images/horstmann-02_02.jpg" height="338" width="563"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">CRC Cards</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-024.html"> [24/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Responsibilities should be <i>high level</i> </li>
          <li>1 - 3 responsibilities per card </li>
          <li>Collaborators are for the class, not for each responsibility </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">Walkthroughs</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-025.html"> [25/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Use case: "Leave a message" </li>
          <li>Caller connects to voice mail system </li>
          <li>Caller dials extension number </li>
          <li>"Someone" must locate mailbox </li>
          <li>Neither <tt>Mailbox</tt> nor <tt>Message</tt> can do this </li>
          <li>New class: <tt>MailSystem</tt> </li>
          <li>Responsibility: manage mailboxes </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide026">Walkthroughs</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-026.html"> [26/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_03.jpg" height="338" width="563"/><br/>
        <br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide027">UML Diagrams</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-027.html"> [27/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>UML = Unified Modeling Language </li>
          <li>Unifies notations developed by the "3 Amigos" Booch, Rumbaugh,
            Jacobson<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Many diagram types </li>
          <li>We'll use three types: 
            
            <ul>
              <li>Class Diagrams </li>
              <li>Sequence Diagrams </li>
              <li>State Diagrams </li>
            </ul>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide028">Class Diagrams</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-028.html"> [28/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Rectangle with class name </li>
          <li>Optional compartments 
            
            <ul>
              <li>Attributes </li>
              <li>Methods </li>
            </ul>
          </li>
          <li>Include only key attributes and methods </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide029">Class Diagrams</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-029.html"> [29/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_04.jpg" height="217" width="681"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide030">Class Relationships</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-030.html"> [30/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_05.jpg" height="502" width="401"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide031">Multiplicities</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-031.html"> [31/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>any number (0 or more): <tt>*</tt> </li>
          <li>one or more: <tt>1..*</tt> </li>
          <li>zero or one: <tt>0..1</tt> </li>
          <li>exactly one: <tt>1</tt> </li>
        </ul>
        <img alt="." src="../images/horstmann-02_06.jpg" height="100" width="544"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide032">Composition</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-032.html"> [32/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Special form of aggregation </li>
          <li>Contained objects don't exist outside container </li>
          <li>Example: message queues permanently contained in mail box </li>
        </ul>
        <img alt="." src="../images/horstmann-02_07.jpg" height="100" width="544"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide033">Association</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-033.html"> [33/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Some designers don't like aggregation </li>
          <li>More general association relationship </li>
          <li>Association can have roles </li>
        </ul>
        <img alt="." src="../images/horstmann-02_08.jpg" height="100" width="641"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide034">Association</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-034.html"> [34/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Some associations are bidirectional<br xmlns="http://www.w3.org/1999/xhtml"/>
            Can navigate from either class to the other </li>
          <li>Example: Course has set of students, student has set of courses<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Some associations are directed<br xmlns="http://www.w3.org/1999/xhtml"/>
            Navigation is unidirectional </li>
          <li>Example: Message doesn't know about message queue containing it<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
        <img alt="." src="../images/horstmann-02_09.jpg" height="100" width="544"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide035">Interface Types</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-035.html"> [35/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Interface type describes a set of methods </li>
          <li>No implementation, no state </li>
          <li>Class implements interface if it implements its methods<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>In UML, use stereotype «interface» </li>
        </ul>
        <img alt="." src="../images/horstmann-02_10.jpg" height="100" width="577"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide036">Tips</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-036.html"> [36/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Use UML to inform, not to impress<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Don't draw a single monster diagram </li>
          <li>Each diagram must have a specific purpose </li>
          <li>Omit inessential details<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide037">Sequence Diagrams</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-037.html"> [37/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Each diagram shows dynamics of scenario </li>
          <li>Object diagram: class name underlined </li>
        </ul>
        <img alt="," src="../images/horstmann-02_11.jpg" height="272" width="461"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide038">Self call</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-038.html"> [38/76] </a></span></td></tr></table><p> </p>
        <p xmlns=""><img xmlns="http://www.w3.org/1999/xhtml" alt="." src="../images/horstmann-02_12.jpg" height="272" width="263"/></p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide039">Object Construction</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-039.html"> [39/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_13.jpg" height="272" width="531"/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide040">State Diagram</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-040.html"> [40/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Use for classes whose objects have interesting states </li>
        </ul>
        <img alt="." src="../images/horstmann-02_14.jpg" height="466" width="261"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide041">Design Documentation</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-041.html"> [41/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Recommendation: Use Javadoc comments </li>
          <li>Leave methods blank<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">/**<br xmlns="http://www.w3.org/1999/xhtml"/>   Adds a message to the end of the new messages.<br xmlns="http://www.w3.org/1999/xhtml"/>   @param aMessage a message<br xmlns="http://www.w3.org/1999/xhtml"/>*/<br xmlns="http://www.w3.org/1999/xhtml"/>public void addMessage(Message aMessage)<br xmlns="http://www.w3.org/1999/xhtml"/>{<br xmlns="http://www.w3.org/1999/xhtml"/>}<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Don't compile file, just run Javadoc </li>
          <li>Makes a good starting point for code later<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide042">Case Study: Voice Mail System</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-042.html"> [42/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Use text for voice, phone keys, hangup<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li><tt>1 2 ... 0 #</tt> on a single line means key<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li><tt>H</tt> on a single line means "hang up" </li>
          <li>All other inputs mean voice </li>
          <li>In GUI program, will use buttons for keys (see ch. 4) </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide043">Use Case: Reach an Extension</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-043.html"> [43/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>User dials main number of system </li>
          <li>System speaks prompt<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Enter mailbox number followed by #<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>User types extension number </li>
          <li>System speaks<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">You have reached mailbox xxxx. Please leave a message now<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide044">Use Case: Leave a Message</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-044.html"> [44/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>Caller carries out <b>Reach an Extension</b> </li>
          <li>Caller speaks message </li>
          <li>Caller hangs up </li>
          <li>System places message in mailbox<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide045">Use Case: Log in</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-045.html"> [45/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>Mailbox owner carries out <b>Reach an Extension</b> </li>
          <li>Mailbox owner types password and <tt>#<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> (Default password = mailbox number. To change, see <b>Change
              the Passcode</b>) </li>
          <li>System plays mailbox menu:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Enter 1 to retrieve your messages.<br xmlns="http://www.w3.org/1999/xhtml"/>Enter 2 to change your passcode.<br xmlns="http://www.w3.org/1999/xhtml"/>Enter 3 to change your greeting.<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide046">Use Case: Retrieve Messages</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-046.html"> [46/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>Mailbox owner carries out <b>Log in</b> </li>
          <li>Mailbox owner selects "retrieve messages" menu option </li>
          <li>System plays message menu:<br xmlns="http://www.w3.org/1999/xhtml"/>
            <pre xml:space="preserve">Press 1 to listen to the current message<br xmlns="http://www.w3.org/1999/xhtml"/>Press 2 to delete the current message<br xmlns="http://www.w3.org/1999/xhtml"/>Press 3 to save the current message<br xmlns="http://www.w3.org/1999/xhtml"/>Press 4 to return to the mailbox menu<br xmlns="http://www.w3.org/1999/xhtml"/></pre>
          </li>
          <li>Mailbox owner selects "listen to current message"<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>System plays current new message, or, if no more new messages,
            current old message.<br xmlns="http://www.w3.org/1999/xhtml"/>
            Note: Message is played, not removed from queue </li>
          <li>System plays message menu </li>
          <li>User selects "delete current message". Message is removed. </li>
          <li>Continue with step 3. </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide047">Use Case: Retrieve Messages</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-047.html"> [47/76] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Variation #1</h3>
        1.1. Start at Step 6<br/>
        1.2. User selects "save current message".<br/>
               Message is removed from new queue
        and appended to old queue<br/>
        1.3. Continue with step 3.<br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide048">Use Case: Change the Greeting</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-048.html"> [48/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>Mailbox owner carries out <b>Log in</b> </li>
          <li>Mailbox owner selects "change greeting" menu option </li>
          <li>Mailbox owner speaks new greeting </li>
          <li>Mailbox owner presses <tt>#</tt> </li>
          <li>System sets new greeting </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide049">Use Case: Change the Greeting</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-049.html"> [49/76] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Variation #1: Hang up before confirmation</h3>
        1.1. Start at step 3.<br/>
        1.2. Mailbox owner hangs up.<br/>
        1.3. System keeps old greeting.<br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide050">Use Case: Change the Passcode</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-050.html"> [50/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>Mailbox owner carries out <b>Log in</b> </li>
          <li>Mailbox owner selects "change passcode" menu option </li>
          <li>Mailbox owner dials new passcode </li>
          <li>Mailbox owner presses <tt>#</tt> </li>
          <li>System sets new passcode </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide051">Use Case: Change the Passcode</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-051.html"> [51/76] </a></span></td></tr></table><p> </p>
        <h3 xmlns="">Variation #1: Hang up before confirmation</h3>
        1.1. Start at step 3.<br/>
        1.2. Mailbox owner hangs up.<br/>
        1.3. System keeps old passcode.<br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide052">CRC Cards for Voice Mail System</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-052.html"> [52/76] </a></span></td></tr></table><p> </p>
        Some obvious classes<br/>
        <ul xmlns="">
          <li><tt>Mailbox</tt> </li>
          <li><tt>Message</tt> </li>
          <li><tt>MailSystem</tt> </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide053">Initial CRC Cards: Mailbox</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-053.html"> [53/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un01.jpg" height="338" width="563"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide054">Initial CRC Cards: MessageQueue</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-054.html"> [54/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un02.jpg" height="338" width="563"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide055">Initial CRC Cards: MailSystem</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-055.html"> [55/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un03.jpg" height="338" width="563"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide056">Telephone</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-056.html"> [56/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Who interacts with user?<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Telephone takes button presses, voice input </li>
          <li>Telephone speaks output to user </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide057">Telephone</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-057.html"> [57/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un04.jpg" height="338" width="563"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide058">Connection</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-058.html"> [58/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>With whom does Telephone communicate </li>
          <li>With MailSystem? </li>
          <li>What if there are multiple telephones? </li>
          <li>Each connection can be in different state<br xmlns="http://www.w3.org/1999/xhtml"/>
            (dialing, recording, retrieving messages,...)<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Should mail system keep track of all connection states? </li>
          <li>Better to give this responsibility to a new class </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide059">Connection</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-059.html"> [59/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un05.jpg" height="338" width="563"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide060">Analyze Use Case: Leave a message</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-060.html"> [60/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>User dials extension. <tt>Telephone</tt> sends number to <tt>Connection</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
            (Add collaborator <tt>Telephone</tt> to <tt>Connection</tt>) </li>
          <li><tt>Connection</tt> asks <tt>MailSystem</tt> to find matching <tt>Mailbox</tt>
          </li>
          <li><tt>Connection</tt> asks <tt>Mailbox</tt> for greeting<br xmlns="http://www.w3.org/1999/xhtml"/>
            (Add responsibility "manage greeting" to <tt>Mailbox</tt>,<br xmlns="http://www.w3.org/1999/xhtml"/>
            add collaborator <tt>Mailbox</tt> to <tt>Connection</tt>) </li>
          <li><tt>Connection</tt> asks <tt>Telephone</tt> to play greeting </li>
          <li>User speaks greeting. <tt>Telephone</tt> asks <tt>Connection</tt>
            to record it.<br xmlns="http://www.w3.org/1999/xhtml"/>
            (Add responsibility "record voice input" to <tt>Connection</tt>) </li>
          <li>User hangs up. <tt>Telephone</tt> notifies <tt>Connection.</tt>
          </li>
          <li><tt>Connection</tt> constructs <tt>Message<br xmlns="http://www.w3.org/1999/xhtml"/>
            </tt> (Add card for <tt>Message</tt> class,<br xmlns="http://www.w3.org/1999/xhtml"/>
            add collaborator  <tt>Message</tt> to <tt>Connection</tt>) </li>
          <li><tt>Connection</tt> adds <tt>Message</tt> to <tt>Mailbox</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide061">Result of Use Case Analysis</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-061.html"> [61/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un06.jpg" height="338" width="563"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide062">Result of Use Case Analysis</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-062.html"> [62/76] </a></span></td></tr></table><p> </p>
        <p xmlns=""><img xmlns="http://www.w3.org/1999/xhtml" alt="." src="../images/horstmann-02_un07.jpg" height="338" width="563"/></p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide063">Result of Use Case Analysis</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-063.html"> [63/76] </a></span></td></tr></table><p> </p>
        <p xmlns=""><img xmlns="http://www.w3.org/1999/xhtml" alt="." src="../images/horstmann-02_un07a.jpg" height="338" width="563"/></p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide064">Result of Use Case Analysis</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-064.html"> [64/76] </a></span></td></tr></table><p> </p>
        <p xmlns=""><img xmlns="http://www.w3.org/1999/xhtml" alt="." src="../images/horstmann-02_un08.jpg" height="338" width="606"/><br xmlns="http://www.w3.org/1999/xhtml"/>
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide065">Analyse Use Case: Retrieve messages</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-065.html"> [65/76] </a></span></td></tr></table><p> </p>
        <ol xmlns="">
          <li>User types in passcode. <tt>Telephone</tt> notifies <tt>Connection</tt>
          </li>
          <li><tt>Connection</tt> asks <tt>Mailbox</tt> to check passcode.<br xmlns="http://www.w3.org/1999/xhtml"/>
            (Add responsibility "manage passcode" to <tt>Mailbox</tt>) </li>
          <li><tt>Connection</tt> sets current mailbox and asks <tt>Telephone</tt>
            to speak menu </li>
          <li>User selects "retrieve messages". <tt>Telephone</tt> passes key
            to <tt>Connection</tt> </li>
          <li><tt>Connection</tt> asks <tt>Telephone</tt> to speak menu </li>
          <li>User selects "listen to current message". <tt>Telephone</tt>
            passes key to <tt>Connection</tt> </li>
          <li><tt>Connection</tt> gets first message from current mailbox.<br xmlns="http://www.w3.org/1999/xhtml"/>
            (Add "retrieve messages" to responsibility of <tt>Mailbox</tt>).<br xmlns="http://www.w3.org/1999/xhtml"/>
            <tt>Connection</tt> asks <tt>Telephone</tt> to speak message </li>
          <li><tt>Connection</tt> asks <tt>Telephone</tt> to speak menu </li>
          <li>User selects "save current message". <tt>Telephone</tt> passes
            key to <tt>Connection</tt> </li>
          <li><tt>Connection</tt> tells <tt>Mailbox</tt> to save message<br xmlns="http://www.w3.org/1999/xhtml"/>
            (Modify responsibility of <tt>Mailbox</tt> to "retrieve,save,delete
            messages") </li>
          <li><tt>Connection</tt> asks <tt>Telephone</tt> to speak menu </li>
        </ol>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide066">Result of Use Case Analysis</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-066.html"> [66/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_un09.jpg" height="338" width="563"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide067">CRC Summary</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-067.html"> [67/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>One card per class </li>
          <li>Responsibilities at high level </li>
          <li>Use scenario walkthroughs to fill in cards </li>
          <li>Usually, the first design isn't perfect.<br xmlns="http://www.w3.org/1999/xhtml"/>
            (You just saw the author's third design of the mail system) </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide068">UML Class Diagram for Mail System</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-068.html"> [68/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>CRC collaborators yield dependencies </li>
          <li><tt>Mailbox</tt> depends on <tt>MessageQueue</tt> </li>
          <li><tt>Message</tt> doesn't depends on <tt>Mailbox</tt> </li>
          <li><tt>Connection</tt> depends on <tt>Telephone, MailSystem,
              Message, Mailbox</tt> </li>
          <li><tt>Telephone</tt> depends on <tt>Connection</tt><br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide069">Dependency Relationships</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-069.html"> [69/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_15.jpg" height="359" width="715"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide070">Aggregation Relationships</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-070.html"> [70/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>A mail system has mailboxes </li>
          <li>A mailbox has two message queues </li>
          <li>A message queue has some number of messages </li>
          <li>A connection has a current mailbox.<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>A connection has references to a mailsystem and a telephone </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide071">UML Class Diagram for Voice Mail System</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-071.html"> [71/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_16.jpg" height="359" width="719"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide072">Sequence Diagram for Use Case: Leave  a message</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-072.html"> [72/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_17.jpg" height="359" width="596"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide073">Interpreting a Sequence Diagram</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-073.html"> [73/76] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>Each key press results in separate call to <tt>dial</tt>, but
            only one is shown<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Connection wants to get greeting to play </li>
          <li>Each mailbox knows its greeting<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
          <li>Connection must find mailbox object:<br xmlns="http://www.w3.org/1999/xhtml"/>
            Call <tt>findMailbox</tt> on <tt>MailSystem</tt> object </li>
          <li>Parameters are not displayed (e.g. mailbox number) </li>
          <li>Return values are not displayed (e.g. found mailbox) </li>
          <li>Note that connection holds on to that mailbox over multiple calls<br xmlns="http://www.w3.org/1999/xhtml"/>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide074">Sequence Diagram for Use Case: Retrieve messages</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-074.html"> [74/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_18.jpg" height="359" width="432"/><br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide075">Connection State Diagram</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-075.html"> [75/76] </a></span></td></tr></table><p> </p>
        <img alt="." src="../images/horstmann-02_19.jpg"/><br/>
        <br/>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide076">Java Implementation</a></span><span style="font-weight: normal"><a href="notes-horstmann-02-076.html"> [76/76] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Message_java.html">file:horstmann/ch02_mail/Message.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Message.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Message.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Message.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   A message left by the caller.</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Message</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      Construct a Message object.</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> messageText the message text</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Message</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> messageText<span style="color: #990000">)</span>
<span style="color: #000000">00012:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>       text <span style="color: #990000">=</span> messageText<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the message text.</span></span>
<span style="color: #000000">00018:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> message text</span></span>
<span style="color: #000000">00019:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00020:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getText</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00021:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> text<span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span> 
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> text<span style="color: #990000">;</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/MessageQueue_java.html">file:horstmann/ch02_mail/MessageQueue.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/MessageQueue.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/MessageQueue.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/MessageQueue.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   A first-in, first-out collection of messages. This</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   implementation is not very efficient. We will consider</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   a more efficient implementation in chapter 3.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MessageQueue</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs an empty message queue.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       queue <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Message<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remove message at head.</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> message that has been removed from the queue</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00023:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Append message at tail.</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newMessage the message to be appended</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00032:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="color: #008080">Message</span> newMessage<span style="color: #990000">)</span>
<span style="color: #000000">00033:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>       queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>newMessage<span style="color: #990000">);</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> 
<span style="color: #000000">00037:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the total number of messages in the queue.</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the total number of messages in the queue</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00041:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00044:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span> 
<span style="color: #000000">00046:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get message at head.</span></span>
<span style="color: #000000">00048:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> message that is at the head of the queue, or null</span></span>
<span style="color: #000000">00049:</span> <span style="font-style: italic"><span style="color: #9A1900">      if the queue is empty</span></span>
<span style="color: #000000">00050:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00051:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00052:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00053:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00054:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00055:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00056:</span> 
<span style="color: #000000">00057:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">ArrayList&lt;Message&gt;</span> queue<span style="color: #990000">;</span>
<span style="color: #000000">00058:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00059:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Mailbox_java.html">file:horstmann/ch02_mail/Mailbox.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Mailbox.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Mailbox.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Mailbox.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   A mailbox contains messages that can be listed, kept or discarded.</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Mailbox</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      Creates Mailbox object.</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aPasscode passcode number</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aGreeting greeting string</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Mailbox</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> aPasscode<span style="color: #990000">,</span> <span style="color: #008080">String</span> aGreeting<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       passcode <span style="color: #990000">=</span> aPasscode<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>       greeting <span style="color: #990000">=</span> aGreeting<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>       newMessages <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>       keptMessages <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00018:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      Check if the passcode is correct.</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aPasscode a passcode to check</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> true if the supplied passcode matches the mailbox passcode</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">checkPasscode</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> aPasscode<span style="color: #990000">)</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> aPasscode<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>passcode<span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span> 
<span style="color: #000000">00030:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">      Add a message to the mailbox.</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMessage the message to be added</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00034:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addMessage</span></span><span style="color: #990000">(</span><span style="color: #008080">Message</span> aMessage<span style="color: #990000">)</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>       newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>aMessage<span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span> 
<span style="color: #000000">00039:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the current message.</span></span>
<span style="color: #000000">00041:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the current message</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00043:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">getCurrentMessage</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00044:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00045:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00046:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00047:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00048:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00049:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00050:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> 
<span style="color: #000000">00053:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00054:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remove the current message from the mailbox.</span></span>
<span style="color: #000000">00055:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the message that has just been removed</span></span>
<span style="color: #000000">00056:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00057:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">removeCurrentMessage</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00058:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00060:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00061:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00062:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00063:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00064:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00065:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00066:</span> 
<span style="color: #000000">00067:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00068:</span> <span style="font-style: italic"><span style="color: #9A1900">      Save the current message</span></span>
<span style="color: #000000">00069:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00070:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">saveCurrentMessage</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00071:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00072:</span>       <span style="color: #008080">Message</span> m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">removeCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00073:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00074:</span>          keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>m<span style="color: #990000">);</span>
<span style="color: #000000">00075:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00076:</span> 
<span style="color: #000000">00077:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00078:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change mailbox's greeting.</span></span>
<span style="color: #000000">00079:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newGreeting the new greeting string</span></span>
<span style="color: #000000">00080:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00081:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setGreeting</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> newGreeting<span style="color: #990000">)</span>
<span style="color: #000000">00082:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00083:</span>       greeting <span style="color: #990000">=</span> newGreeting<span style="color: #990000">;</span>
<span style="color: #000000">00084:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00085:</span> 
<span style="color: #000000">00086:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00087:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change mailbox's passcode.</span></span>
<span style="color: #000000">00088:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newPasscode the new passcode</span></span>
<span style="color: #000000">00089:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00090:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setPasscode</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> newPasscode<span style="color: #990000">)</span>
<span style="color: #000000">00091:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00092:</span>       passcode <span style="color: #990000">=</span> newPasscode<span style="color: #990000">;</span>
<span style="color: #000000">00093:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00094:</span> 
<span style="color: #000000">00095:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00096:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the mailbox's greeting.</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the greeting</span></span>
<span style="color: #000000">00098:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00099:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getGreeting</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00100:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> greeting<span style="color: #990000">;</span>
<span style="color: #000000">00102:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00103:</span> 
<span style="color: #000000">00104:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MessageQueue</span> newMessages<span style="color: #990000">;</span>
<span style="color: #000000">00105:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MessageQueue</span> keptMessages<span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> greeting<span style="color: #990000">;</span>
<span style="color: #000000">00107:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> passcode<span style="color: #990000">;</span>
<span style="color: #000000">00108:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00109:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Connection_java.html">file:horstmann/ch02_mail/Connection.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Connection.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Connection.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Connection.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   Connects a phone to the mail system. The purpose of this</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">   class is to keep track of the state of a connection, since</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   the phone itself is just a source of individual key presses.</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Connection</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      Construct a Connection object.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> s a MailSystem object</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> p a Telephone object</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Connection</span></span><span style="color: #990000">(</span><span style="color: #008080">MailSystem</span> s<span style="color: #990000">,</span> <span style="color: #008080">Telephone</span> p<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       system <span style="color: #990000">=</span> s<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>       phone <span style="color: #990000">=</span> p<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>       <span style="font-weight: bold"><span style="color: #000000">resetConnection</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00019:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">      Respond to the user's pressing a key on the phone touchpad</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dial</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> CONNECTED<span style="color: #990000">)</span>
<span style="color: #000000">00028:</span>          <span style="font-weight: bold"><span style="color: #000000">connect</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00029:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> RECORDING<span style="color: #990000">)</span>
<span style="color: #000000">00030:</span>          <span style="font-weight: bold"><span style="color: #000000">login</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00031:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> CHANGE_PASSCODE<span style="color: #990000">)</span>
<span style="color: #000000">00032:</span>          <span style="font-weight: bold"><span style="color: #000000">changePasscode</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> CHANGE_GREETING<span style="color: #990000">)</span>
<span style="color: #000000">00034:</span>          <span style="font-weight: bold"><span style="color: #000000">changeGreeting</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00035:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> MAILBOX_MENU<span style="color: #990000">)</span>
<span style="color: #000000">00036:</span>          <span style="font-weight: bold"><span style="color: #000000">mailboxMenu</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> MESSAGE_MENU<span style="color: #990000">)</span>
<span style="color: #000000">00038:</span>          <span style="font-weight: bold"><span style="color: #000000">messageMenu</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">      Record voice.</span></span>
<span style="color: #000000">00043:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> voice voice spoken by the user</span></span>
<span style="color: #000000">00044:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00045:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">record</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> voice<span style="color: #990000">)</span>
<span style="color: #000000">00046:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> RECORDING <span style="color: #990000">||</span> state <span style="color: #990000">==</span> CHANGE_GREETING<span style="color: #990000">)</span>
<span style="color: #000000">00048:</span>          currentRecording <span style="color: #990000">+=</span> voice<span style="color: #990000">;</span>
<span style="color: #000000">00049:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span> 
<span style="color: #000000">00051:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00052:</span> <span style="font-style: italic"><span style="color: #9A1900">      The user hangs up the phone.</span></span>
<span style="color: #000000">00053:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00054:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">hangup</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00055:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00056:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> RECORDING<span style="color: #990000">)</span>
<span style="color: #000000">00057:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addMessage</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Message</span></span><span style="color: #990000">(</span>currentRecording<span style="color: #990000">));</span>
<span style="color: #000000">00058:</span>       <span style="font-weight: bold"><span style="color: #000000">resetConnection</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00059:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00060:</span> 
<span style="color: #000000">00061:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00062:</span> <span style="font-style: italic"><span style="color: #9A1900">      Reset the connection to the initial state and prompt</span></span>
<span style="color: #000000">00063:</span> <span style="font-style: italic"><span style="color: #9A1900">      for mailbox number</span></span>
<span style="color: #000000">00064:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00065:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">resetConnection</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00066:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00067:</span>       currentRecording <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00068:</span>       accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00069:</span>       state <span style="color: #990000">=</span> CONNECTED<span style="color: #990000">;</span>
<span style="color: #000000">00070:</span>       phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>INITIAL_PROMPT<span style="color: #990000">);</span>
<span style="color: #000000">00071:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00072:</span> 
<span style="color: #000000">00073:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00074:</span> <span style="font-style: italic"><span style="color: #9A1900">      Try to connect the user with the specified mailbox.</span></span>
<span style="color: #000000">00075:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00076:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00077:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">connect</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00078:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00079:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00080:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00081:</span>          currentMailbox <span style="color: #990000">=</span> system<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">findMailbox</span></span><span style="color: #990000">(</span>accumulatedKeys<span style="color: #990000">);</span>
<span style="color: #000000">00082:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>currentMailbox <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00083:</span>          <span style="color: #FF0000">{</span>
<span style="color: #000000">00084:</span>             state <span style="color: #990000">=</span> RECORDING<span style="color: #990000">;</span>
<span style="color: #000000">00085:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getGreeting</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00086:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00087:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00088:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Incorrect mailbox number. Try again!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00089:</span>          accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00090:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00091:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00092:</span>          accumulatedKeys <span style="color: #990000">+=</span> key<span style="color: #990000">;</span>
<span style="color: #000000">00093:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00094:</span> 
<span style="color: #000000">00095:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00096:</span> <span style="font-style: italic"><span style="color: #9A1900">      Try to log in the user.</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00098:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00099:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">login</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00100:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00102:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00103:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">checkPasscode</span></span><span style="color: #990000">(</span>accumulatedKeys<span style="color: #990000">))</span>
<span style="color: #000000">00104:</span>          <span style="color: #FF0000">{</span>
<span style="color: #000000">00105:</span>             state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00107:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00108:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00109:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Incorrect passcode. Try again!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00110:</span>          accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00111:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00112:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00113:</span>          accumulatedKeys <span style="color: #990000">+=</span> key<span style="color: #990000">;</span>
<span style="color: #000000">00114:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00115:</span> 
<span style="color: #000000">00116:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00117:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change passcode.</span></span>
<span style="color: #000000">00118:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00119:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00120:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">changePasscode</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00121:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00122:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00123:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00124:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setPasscode</span></span><span style="color: #990000">(</span>accumulatedKeys<span style="color: #990000">);</span>
<span style="color: #000000">00125:</span>          state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00126:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00127:</span>          accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00128:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00129:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00130:</span>          accumulatedKeys <span style="color: #990000">+=</span> key<span style="color: #990000">;</span>
<span style="color: #000000">00131:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00132:</span> 
<span style="color: #000000">00133:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00134:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change greeting.</span></span>
<span style="color: #000000">00135:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00136:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00137:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">changeGreeting</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00138:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00139:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00140:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00141:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setGreeting</span></span><span style="color: #990000">(</span>currentRecording<span style="color: #990000">);</span>
<span style="color: #000000">00142:</span>          currentRecording <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00143:</span>          state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00144:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00145:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00146:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00147:</span> 
<span style="color: #000000">00148:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00149:</span> <span style="font-style: italic"><span style="color: #9A1900">      Respond to the user's selection from mailbox menu.</span></span>
<span style="color: #000000">00150:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00151:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00152:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">mailboxMenu</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00153:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00154:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"1"</span><span style="color: #990000">))</span>
<span style="color: #000000">00155:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00156:</span>          state <span style="color: #990000">=</span> MESSAGE_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00157:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MESSAGE_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00158:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00159:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"2"</span><span style="color: #990000">))</span>
<span style="color: #000000">00160:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00161:</span>          state <span style="color: #990000">=</span> CHANGE_PASSCODE<span style="color: #990000">;</span>
<span style="color: #000000">00162:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Enter new passcode followed by the # key"</span><span style="color: #990000">);</span>
<span style="color: #000000">00163:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00164:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"3"</span><span style="color: #990000">))</span>
<span style="color: #000000">00165:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00166:</span>          state <span style="color: #990000">=</span> CHANGE_GREETING<span style="color: #990000">;</span>
<span style="color: #000000">00167:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Record your greeting, then press the # key"</span><span style="color: #990000">);</span>
<span style="color: #000000">00168:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00169:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00170:</span> 
<span style="color: #000000">00171:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00172:</span> <span style="font-style: italic"><span style="color: #9A1900">      Respond to the user's selection from message menu.</span></span>
<span style="color: #000000">00173:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00174:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00175:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">messageMenu</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00176:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00177:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"1"</span><span style="color: #990000">))</span>
<span style="color: #000000">00178:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00179:</span>          <span style="color: #008080">String</span> output <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00180:</span>          <span style="color: #008080">Message</span> m <span style="color: #990000">=</span> currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00181:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> output <span style="color: #990000">+=</span> <span style="color: #FF0000">"No messages."</span> <span style="color: #990000">+</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">;</span>
<span style="color: #000000">00182:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> output <span style="color: #990000">+=</span> m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getText</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">;</span>
<span style="color: #000000">00183:</span>          output <span style="color: #990000">+=</span> MESSAGE_MENU_TEXT<span style="color: #990000">;</span>
<span style="color: #000000">00184:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>output<span style="color: #990000">);</span>
<span style="color: #000000">00185:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00186:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"2"</span><span style="color: #990000">))</span>
<span style="color: #000000">00187:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00188:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">saveCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00189:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MESSAGE_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00190:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00191:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"3"</span><span style="color: #990000">))</span>
<span style="color: #000000">00192:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00193:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">removeCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00194:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MESSAGE_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00195:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00196:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"4"</span><span style="color: #990000">))</span>
<span style="color: #000000">00197:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00198:</span>          state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00199:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00200:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00201:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00202:</span> 
<span style="color: #000000">00203:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MailSystem</span> system<span style="color: #990000">;</span>
<span style="color: #000000">00204:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Mailbox</span> currentMailbox<span style="color: #990000">;</span>
<span style="color: #000000">00205:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> currentRecording<span style="color: #990000">;</span>
<span style="color: #000000">00206:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> accumulatedKeys<span style="color: #990000">;</span>
<span style="color: #000000">00207:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Telephone</span> phone<span style="color: #990000">;</span>
<span style="color: #000000">00208:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> state<span style="color: #990000">;</span>
<span style="color: #000000">00209:</span> 
<span style="color: #000000">00210:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DISCONNECTED <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00211:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> CONNECTED <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00212:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> RECORDING <span style="color: #990000">=</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #000000">00213:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> MAILBOX_MENU <span style="color: #990000">=</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>
<span style="color: #000000">00214:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> MESSAGE_MENU <span style="color: #990000">=</span> <span style="color: #993399">4</span><span style="color: #990000">;</span>
<span style="color: #000000">00215:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> CHANGE_PASSCODE <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
<span style="color: #000000">00216:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> CHANGE_GREETING <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
<span style="color: #000000">00217:</span> 
<span style="color: #000000">00218:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">String</span> INITIAL_PROMPT <span style="color: #990000">=</span> 
<span style="color: #000000">00219:</span>          <span style="color: #FF0000">"Enter mailbox number followed by #"</span><span style="color: #990000">;</span>      
<span style="color: #000000">00220:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">String</span> MAILBOX_MENU_TEXT <span style="color: #990000">=</span> 
<span style="color: #000000">00221:</span>          <span style="color: #FF0000">"Enter 1 to listen to your messages</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00222:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 2 to change your passcode</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00223:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 3 to change your greeting"</span><span style="color: #990000">;</span>
<span style="color: #000000">00224:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">String</span> MESSAGE_MENU_TEXT <span style="color: #990000">=</span> 
<span style="color: #000000">00225:</span>          <span style="color: #FF0000">"Enter 1 to listen to the current message</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00226:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 2 to save the current message</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00227:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 3 to delete the current message</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00228:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 4 to return to the main menu"</span><span style="color: #990000">;</span>
<span style="color: #000000">00229:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00230:</span> 
<span style="color: #000000">00231:</span> 
<span style="color: #000000">00232:</span> 
<span style="color: #000000">00233:</span> 
<span style="color: #000000">00234:</span> 
<span style="color: #000000">00235:</span> 
<span style="color: #000000">00236:</span> 
<span style="color: #000000">00237:</span> 
<span style="color: #000000">00238:</span> 
<span style="color: #000000">00239:</span> 
<span style="color: #000000">00240:</span> 
<span style="color: #000000">00241:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/MailSystem_java.html">file:horstmann/ch02_mail/MailSystem.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/MailSystem.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/MailSystem.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/MailSystem.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   A system of voice mail boxes.</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MailSystem</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a mail system with a given number of mailboxes</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> mailboxCount the number of mailboxes</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00013:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MailSystem</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> mailboxCount<span style="color: #990000">)</span>
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>       mailboxes <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Mailbox<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>       <span style="font-style: italic"><span style="color: #9A1900">// Initialize mail boxes.</span></span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> mailboxCount<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
<span style="color: #000000">00020:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>          <span style="color: #008080">String</span> passcode <span style="color: #990000">=</span> <span style="color: #FF0000">""</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>i <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>          <span style="color: #008080">String</span> greeting <span style="color: #990000">=</span> <span style="color: #FF0000">"You have reached mailbox "</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>i <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">00023:</span>                <span style="color: #990000">+</span> <span style="color: #FF0000">". </span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">Please leave a message now."</span><span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>          mailboxes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Mailbox</span></span><span style="color: #990000">(</span>passcode<span style="color: #990000">,</span> greeting<span style="color: #990000">));</span>
<span style="color: #000000">00025:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Locate a mailbox.</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> ext the extension number</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the mailbox or null if not found</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00033:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Mailbox</span> <span style="font-weight: bold"><span style="color: #000000">findMailbox</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> ext<span style="color: #990000">)</span>
<span style="color: #000000">00034:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>       <span style="color: #009900">int</span> i <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">parseInt</span></span><span style="color: #990000">(</span>ext<span style="color: #990000">);</span>
<span style="color: #000000">00036:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">&lt;=</span> i <span style="color: #990000">&amp;&amp;</span> i <span style="color: #990000">&lt;=</span> mailboxes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00037:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span>  mailboxes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>i <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">ArrayList&lt;Mailbox&gt;</span> mailboxes<span style="color: #990000">;</span>
<span style="color: #000000">00042:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Telephone_java.html">file:horstmann/ch02_mail/Telephone.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Telephone.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Telephone.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Telephone.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Scanner<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   A telephone that takes simulated keystrokes and voice input</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   from the user and simulates spoken text.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Telephone</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      Construct phone object.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aScanner that reads text from a character-input stream</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Telephone</span></span><span style="color: #990000">(</span><span style="color: #008080">Scanner</span> aScanner<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       scanner <span style="color: #990000">=</span> aScanner<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">      Speak a message to System.out.</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> output the text that will be "spoken"</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00023:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> output<span style="color: #990000">)</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>output<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Loops reading user input and passes the input to the</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      Connection object's methods dial, record or hangup.</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> c the connection that connects this phone to the</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">      voice mail system</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00034:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #008080">Connection</span> c<span style="color: #990000">)</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>       <span style="color: #009900">boolean</span> more <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>more<span style="color: #990000">)</span>
<span style="color: #000000">00038:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>          <span style="color: #008080">String</span> input <span style="color: #990000">=</span> scanner<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextLine</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00040:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00041:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equalsIgnoreCase</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"H"</span><span style="color: #990000">))</span>
<span style="color: #000000">00042:</span>             c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hangup</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00043:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equalsIgnoreCase</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Q"</span><span style="color: #990000">))</span>
<span style="color: #000000">00044:</span>             more <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">length</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #993399">1</span>
<span style="color: #000000">00046:</span>             <span style="color: #990000">&amp;&amp;</span> <span style="color: #FF0000">"1234567890#"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">indexOf</span></span><span style="color: #990000">(</span>input<span style="color: #990000">)</span> <span style="color: #990000">&gt;=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00047:</span>             c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dial</span></span><span style="color: #990000">(</span>input<span style="color: #990000">);</span>
<span style="color: #000000">00048:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00049:</span>             c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">record</span></span><span style="color: #990000">(</span>input<span style="color: #990000">);</span>
<span style="color: #000000">00050:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> 
<span style="color: #000000">00053:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Scanner</span> scanner<span style="color: #990000">;</span>
<span style="color: #000000">00054:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/MailSystemTester_java.html">file:horstmann/ch02_mail/MailSystemTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/MailSystemTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/MailSystemTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/MailSystemTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Scanner<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   This program tests the mail system. A single phone</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   communicates with the program through System.in/System.out.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MailSystemTester</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00011:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>       <span style="color: #008080">MailSystem</span> system <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MailSystem</span></span><span style="color: #990000">(</span>MAILBOX_COUNT<span style="color: #990000">);</span>
<span style="color: #000000">00013:</span>       <span style="color: #008080">Scanner</span> console <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Scanner</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span>in<span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>       <span style="color: #008080">Telephone</span> p <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Telephone</span></span><span style="color: #990000">(</span>console<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>       <span style="color: #008080">Connection</span> c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Connection</span></span><span style="color: #990000">(</span>system<span style="color: #990000">,</span> p<span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>       p<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> MAILBOX_COUNT <span style="color: #990000">=</span> <span style="color: #993399">20</span><span style="color: #990000">;</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <hr/><p class="flush">
      Revised: 2007/09/11 16:16</p></body></html>
