<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Horstmann Chapter 2: Java Implementation</title></head><body><table width="100%" class="title"><colgroup><col width="100%"/><col align="left"/></colgroup><tr><td><span style="font-weight: bold; font-size: larger"><a href="../index.html">SE450</a>: <a>Java Implementation</a></span><span style="font-weight: normal"><a href="notes-horstmann-02.html#slide076"> [76/76] </a></span></td><td valign="top"><a href="notes-horstmann-02-075.html"><img border="0" src="../images/prev.gif" alt="Previous page"/></a><a href="notes-horstmann-02-000.html"><img border="0" src="../images/toc.gif" alt="Contents"/></a></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Message_java.html">file:horstmann/ch02_mail/Message.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Message.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Message.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Message.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   A message left by the caller.</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Message</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      Construct a Message object.</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> messageText the message text</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00011:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Message</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> messageText<span style="color: #990000">)</span>
<span style="color: #000000">00012:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>       text <span style="color: #990000">=</span> messageText<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the message text.</span></span>
<span style="color: #000000">00018:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> message text</span></span>
<span style="color: #000000">00019:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00020:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getText</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00021:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> text<span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span> 
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> text<span style="color: #990000">;</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/MessageQueue_java.html">file:horstmann/ch02_mail/MessageQueue.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/MessageQueue.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/MessageQueue.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/MessageQueue.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   A first-in, first-out collection of messages. This</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   implementation is not very efficient. We will consider</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">   a more efficient implementation in chapter 3.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MessageQueue</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs an empty message queue.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       queue <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Message<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remove message at head.</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> message that has been removed from the queue</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00023:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Append message at tail.</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newMessage the message to be appended</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00032:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="color: #008080">Message</span> newMessage<span style="color: #990000">)</span>
<span style="color: #000000">00033:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>       queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>newMessage<span style="color: #990000">);</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> 
<span style="color: #000000">00037:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the total number of messages in the queue.</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the total number of messages in the queue</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00041:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00042:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00044:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span> 
<span style="color: #000000">00046:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get message at head.</span></span>
<span style="color: #000000">00048:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> message that is at the head of the queue, or null</span></span>
<span style="color: #000000">00049:</span> <span style="font-style: italic"><span style="color: #9A1900">      if the queue is empty</span></span>
<span style="color: #000000">00050:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00051:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00052:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00053:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00054:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> queue<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00055:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00056:</span> 
<span style="color: #000000">00057:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">ArrayList&lt;Message&gt;</span> queue<span style="color: #990000">;</span>
<span style="color: #000000">00058:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00059:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Mailbox_java.html">file:horstmann/ch02_mail/Mailbox.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Mailbox.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Mailbox.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Mailbox.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   A mailbox contains messages that can be listed, kept or discarded.</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Mailbox</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">      Creates Mailbox object.</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aPasscode passcode number</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aGreeting greeting string</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00012:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Mailbox</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> aPasscode<span style="color: #990000">,</span> <span style="color: #008080">String</span> aGreeting<span style="color: #990000">)</span>
<span style="color: #000000">00013:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>       passcode <span style="color: #990000">=</span> aPasscode<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>       greeting <span style="color: #990000">=</span> aGreeting<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>       newMessages <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>       keptMessages <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MessageQueue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00018:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      Check if the passcode is correct.</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aPasscode a passcode to check</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> true if the supplied passcode matches the mailbox passcode</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">checkPasscode</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> aPasscode<span style="color: #990000">)</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> aPasscode<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>passcode<span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span> 
<span style="color: #000000">00030:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">      Add a message to the mailbox.</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aMessage the message to be added</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00034:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addMessage</span></span><span style="color: #990000">(</span><span style="color: #008080">Message</span> aMessage<span style="color: #990000">)</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>       newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>aMessage<span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span> 
<span style="color: #000000">00039:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the current message.</span></span>
<span style="color: #000000">00041:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the current message</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00043:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">getCurrentMessage</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00044:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00045:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00046:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00047:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00048:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">peek</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00049:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00050:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> 
<span style="color: #000000">00053:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00054:</span> <span style="font-style: italic"><span style="color: #9A1900">      Remove the current message from the mailbox.</span></span>
<span style="color: #000000">00055:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the message that has just been removed</span></span>
<span style="color: #000000">00056:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00057:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Message</span> <span style="font-weight: bold"><span style="color: #000000">removeCurrentMessage</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00058:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00060:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> newMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00061:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00062:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00063:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00064:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00065:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00066:</span> 
<span style="color: #000000">00067:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00068:</span> <span style="font-style: italic"><span style="color: #9A1900">      Save the current message</span></span>
<span style="color: #000000">00069:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00070:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">saveCurrentMessage</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00071:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00072:</span>       <span style="color: #008080">Message</span> m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">removeCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00073:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00074:</span>          keptMessages<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>m<span style="color: #990000">);</span>
<span style="color: #000000">00075:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00076:</span> 
<span style="color: #000000">00077:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00078:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change mailbox's greeting.</span></span>
<span style="color: #000000">00079:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newGreeting the new greeting string</span></span>
<span style="color: #000000">00080:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00081:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setGreeting</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> newGreeting<span style="color: #990000">)</span>
<span style="color: #000000">00082:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00083:</span>       greeting <span style="color: #990000">=</span> newGreeting<span style="color: #990000">;</span>
<span style="color: #000000">00084:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00085:</span> 
<span style="color: #000000">00086:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00087:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change mailbox's passcode.</span></span>
<span style="color: #000000">00088:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> newPasscode the new passcode</span></span>
<span style="color: #000000">00089:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00090:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setPasscode</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> newPasscode<span style="color: #990000">)</span>
<span style="color: #000000">00091:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00092:</span>       passcode <span style="color: #990000">=</span> newPasscode<span style="color: #990000">;</span>
<span style="color: #000000">00093:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00094:</span> 
<span style="color: #000000">00095:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00096:</span> <span style="font-style: italic"><span style="color: #9A1900">      Get the mailbox's greeting.</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the greeting</span></span>
<span style="color: #000000">00098:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00099:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getGreeting</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00100:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> greeting<span style="color: #990000">;</span>
<span style="color: #000000">00102:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00103:</span> 
<span style="color: #000000">00104:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MessageQueue</span> newMessages<span style="color: #990000">;</span>
<span style="color: #000000">00105:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MessageQueue</span> keptMessages<span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> greeting<span style="color: #990000">;</span>
<span style="color: #000000">00107:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> passcode<span style="color: #990000">;</span>
<span style="color: #000000">00108:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00109:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Connection_java.html">file:horstmann/ch02_mail/Connection.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Connection.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Connection.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Connection.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">   Connects a phone to the mail system. The purpose of this</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">   class is to keep track of the state of a connection, since</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   the phone itself is just a source of individual key presses.</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Connection</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      Construct a Connection object.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> s a MailSystem object</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> p a Telephone object</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Connection</span></span><span style="color: #990000">(</span><span style="color: #008080">MailSystem</span> s<span style="color: #990000">,</span> <span style="color: #008080">Telephone</span> p<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       system <span style="color: #990000">=</span> s<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>       phone <span style="color: #990000">=</span> p<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>       <span style="font-weight: bold"><span style="color: #000000">resetConnection</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00019:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">      Respond to the user's pressing a key on the phone touchpad</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00025:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dial</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> CONNECTED<span style="color: #990000">)</span>
<span style="color: #000000">00028:</span>          <span style="font-weight: bold"><span style="color: #000000">connect</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00029:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> RECORDING<span style="color: #990000">)</span>
<span style="color: #000000">00030:</span>          <span style="font-weight: bold"><span style="color: #000000">login</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00031:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> CHANGE_PASSCODE<span style="color: #990000">)</span>
<span style="color: #000000">00032:</span>          <span style="font-weight: bold"><span style="color: #000000">changePasscode</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> CHANGE_GREETING<span style="color: #990000">)</span>
<span style="color: #000000">00034:</span>          <span style="font-weight: bold"><span style="color: #000000">changeGreeting</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00035:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> MAILBOX_MENU<span style="color: #990000">)</span>
<span style="color: #000000">00036:</span>          <span style="font-weight: bold"><span style="color: #000000">mailboxMenu</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> MESSAGE_MENU<span style="color: #990000">)</span>
<span style="color: #000000">00038:</span>          <span style="font-weight: bold"><span style="color: #000000">messageMenu</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">      Record voice.</span></span>
<span style="color: #000000">00043:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> voice voice spoken by the user</span></span>
<span style="color: #000000">00044:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00045:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">record</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> voice<span style="color: #990000">)</span>
<span style="color: #000000">00046:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> RECORDING <span style="color: #990000">||</span> state <span style="color: #990000">==</span> CHANGE_GREETING<span style="color: #990000">)</span>
<span style="color: #000000">00048:</span>          currentRecording <span style="color: #990000">+=</span> voice<span style="color: #990000">;</span>
<span style="color: #000000">00049:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span> 
<span style="color: #000000">00051:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00052:</span> <span style="font-style: italic"><span style="color: #9A1900">      The user hangs up the phone.</span></span>
<span style="color: #000000">00053:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00054:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">hangup</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00055:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00056:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>state <span style="color: #990000">==</span> RECORDING<span style="color: #990000">)</span>
<span style="color: #000000">00057:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addMessage</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Message</span></span><span style="color: #990000">(</span>currentRecording<span style="color: #990000">));</span>
<span style="color: #000000">00058:</span>       <span style="font-weight: bold"><span style="color: #000000">resetConnection</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00059:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00060:</span> 
<span style="color: #000000">00061:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00062:</span> <span style="font-style: italic"><span style="color: #9A1900">      Reset the connection to the initial state and prompt</span></span>
<span style="color: #000000">00063:</span> <span style="font-style: italic"><span style="color: #9A1900">      for mailbox number</span></span>
<span style="color: #000000">00064:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00065:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">resetConnection</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00066:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00067:</span>       currentRecording <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00068:</span>       accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00069:</span>       state <span style="color: #990000">=</span> CONNECTED<span style="color: #990000">;</span>
<span style="color: #000000">00070:</span>       phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>INITIAL_PROMPT<span style="color: #990000">);</span>
<span style="color: #000000">00071:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00072:</span> 
<span style="color: #000000">00073:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00074:</span> <span style="font-style: italic"><span style="color: #9A1900">      Try to connect the user with the specified mailbox.</span></span>
<span style="color: #000000">00075:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00076:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00077:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">connect</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00078:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00079:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00080:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00081:</span>          currentMailbox <span style="color: #990000">=</span> system<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">findMailbox</span></span><span style="color: #990000">(</span>accumulatedKeys<span style="color: #990000">);</span>
<span style="color: #000000">00082:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>currentMailbox <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00083:</span>          <span style="color: #FF0000">{</span>
<span style="color: #000000">00084:</span>             state <span style="color: #990000">=</span> RECORDING<span style="color: #990000">;</span>
<span style="color: #000000">00085:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getGreeting</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00086:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00087:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00088:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Incorrect mailbox number. Try again!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00089:</span>          accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00090:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00091:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00092:</span>          accumulatedKeys <span style="color: #990000">+=</span> key<span style="color: #990000">;</span>
<span style="color: #000000">00093:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00094:</span> 
<span style="color: #000000">00095:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00096:</span> <span style="font-style: italic"><span style="color: #9A1900">      Try to log in the user.</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00098:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00099:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">login</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00100:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00102:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00103:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">checkPasscode</span></span><span style="color: #990000">(</span>accumulatedKeys<span style="color: #990000">))</span>
<span style="color: #000000">00104:</span>          <span style="color: #FF0000">{</span>
<span style="color: #000000">00105:</span>             state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00107:</span>          <span style="color: #FF0000">}</span>
<span style="color: #000000">00108:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00109:</span>             phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Incorrect passcode. Try again!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00110:</span>          accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00111:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00112:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00113:</span>          accumulatedKeys <span style="color: #990000">+=</span> key<span style="color: #990000">;</span>
<span style="color: #000000">00114:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00115:</span> 
<span style="color: #000000">00116:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00117:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change passcode.</span></span>
<span style="color: #000000">00118:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00119:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00120:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">changePasscode</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00121:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00122:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00123:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00124:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setPasscode</span></span><span style="color: #990000">(</span>accumulatedKeys<span style="color: #990000">);</span>
<span style="color: #000000">00125:</span>          state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00126:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00127:</span>          accumulatedKeys <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00128:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00129:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00130:</span>          accumulatedKeys <span style="color: #990000">+=</span> key<span style="color: #990000">;</span>
<span style="color: #000000">00131:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00132:</span> 
<span style="color: #000000">00133:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00134:</span> <span style="font-style: italic"><span style="color: #9A1900">      Change greeting.</span></span>
<span style="color: #000000">00135:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00136:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00137:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">changeGreeting</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00138:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00139:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"#"</span><span style="color: #990000">))</span>
<span style="color: #000000">00140:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00141:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setGreeting</span></span><span style="color: #990000">(</span>currentRecording<span style="color: #990000">);</span>
<span style="color: #000000">00142:</span>          currentRecording <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00143:</span>          state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00144:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00145:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00146:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00147:</span> 
<span style="color: #000000">00148:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00149:</span> <span style="font-style: italic"><span style="color: #9A1900">      Respond to the user's selection from mailbox menu.</span></span>
<span style="color: #000000">00150:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00151:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00152:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">mailboxMenu</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00153:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00154:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"1"</span><span style="color: #990000">))</span>
<span style="color: #000000">00155:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00156:</span>          state <span style="color: #990000">=</span> MESSAGE_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00157:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MESSAGE_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00158:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00159:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"2"</span><span style="color: #990000">))</span>
<span style="color: #000000">00160:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00161:</span>          state <span style="color: #990000">=</span> CHANGE_PASSCODE<span style="color: #990000">;</span>
<span style="color: #000000">00162:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Enter new passcode followed by the # key"</span><span style="color: #990000">);</span>
<span style="color: #000000">00163:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00164:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"3"</span><span style="color: #990000">))</span>
<span style="color: #000000">00165:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00166:</span>          state <span style="color: #990000">=</span> CHANGE_GREETING<span style="color: #990000">;</span>
<span style="color: #000000">00167:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Record your greeting, then press the # key"</span><span style="color: #990000">);</span>
<span style="color: #000000">00168:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00169:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00170:</span> 
<span style="color: #000000">00171:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00172:</span> <span style="font-style: italic"><span style="color: #9A1900">      Respond to the user's selection from message menu.</span></span>
<span style="color: #000000">00173:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> key the phone key pressed by the user</span></span>
<span style="color: #000000">00174:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00175:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">messageMenu</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> key<span style="color: #990000">)</span>
<span style="color: #000000">00176:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00177:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"1"</span><span style="color: #990000">))</span>
<span style="color: #000000">00178:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00179:</span>          <span style="color: #008080">String</span> output <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00180:</span>          <span style="color: #008080">Message</span> m <span style="color: #990000">=</span> currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00181:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>m <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> output <span style="color: #990000">+=</span> <span style="color: #FF0000">"No messages."</span> <span style="color: #990000">+</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">;</span>
<span style="color: #000000">00182:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> output <span style="color: #990000">+=</span> m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getText</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">;</span>
<span style="color: #000000">00183:</span>          output <span style="color: #990000">+=</span> MESSAGE_MENU_TEXT<span style="color: #990000">;</span>
<span style="color: #000000">00184:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>output<span style="color: #990000">);</span>
<span style="color: #000000">00185:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00186:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"2"</span><span style="color: #990000">))</span>
<span style="color: #000000">00187:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00188:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">saveCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00189:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MESSAGE_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00190:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00191:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"3"</span><span style="color: #990000">))</span>
<span style="color: #000000">00192:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00193:</span>          currentMailbox<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">removeCurrentMessage</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00194:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MESSAGE_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00195:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00196:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>key<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"4"</span><span style="color: #990000">))</span>
<span style="color: #000000">00197:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00198:</span>          state <span style="color: #990000">=</span> MAILBOX_MENU<span style="color: #990000">;</span>
<span style="color: #000000">00199:</span>          phone<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span>MAILBOX_MENU_TEXT<span style="color: #990000">);</span>
<span style="color: #000000">00200:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00201:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00202:</span> 
<span style="color: #000000">00203:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MailSystem</span> system<span style="color: #990000">;</span>
<span style="color: #000000">00204:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Mailbox</span> currentMailbox<span style="color: #990000">;</span>
<span style="color: #000000">00205:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> currentRecording<span style="color: #990000">;</span>
<span style="color: #000000">00206:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> accumulatedKeys<span style="color: #990000">;</span>
<span style="color: #000000">00207:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Telephone</span> phone<span style="color: #990000">;</span>
<span style="color: #000000">00208:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> state<span style="color: #990000">;</span>
<span style="color: #000000">00209:</span> 
<span style="color: #000000">00210:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> DISCONNECTED <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00211:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> CONNECTED <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00212:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> RECORDING <span style="color: #990000">=</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #000000">00213:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> MAILBOX_MENU <span style="color: #990000">=</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>
<span style="color: #000000">00214:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> MESSAGE_MENU <span style="color: #990000">=</span> <span style="color: #993399">4</span><span style="color: #990000">;</span>
<span style="color: #000000">00215:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> CHANGE_PASSCODE <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
<span style="color: #000000">00216:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> CHANGE_GREETING <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
<span style="color: #000000">00217:</span> 
<span style="color: #000000">00218:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">String</span> INITIAL_PROMPT <span style="color: #990000">=</span> 
<span style="color: #000000">00219:</span>          <span style="color: #FF0000">"Enter mailbox number followed by #"</span><span style="color: #990000">;</span>      
<span style="color: #000000">00220:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">String</span> MAILBOX_MENU_TEXT <span style="color: #990000">=</span> 
<span style="color: #000000">00221:</span>          <span style="color: #FF0000">"Enter 1 to listen to your messages</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00222:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 2 to change your passcode</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00223:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 3 to change your greeting"</span><span style="color: #990000">;</span>
<span style="color: #000000">00224:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">String</span> MESSAGE_MENU_TEXT <span style="color: #990000">=</span> 
<span style="color: #000000">00225:</span>          <span style="color: #FF0000">"Enter 1 to listen to the current message</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00226:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 2 to save the current message</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00227:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 3 to delete the current message</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span>
<span style="color: #000000">00228:</span>          <span style="color: #990000">+</span> <span style="color: #FF0000">"Enter 4 to return to the main menu"</span><span style="color: #990000">;</span>
<span style="color: #000000">00229:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00230:</span> 
<span style="color: #000000">00231:</span> 
<span style="color: #000000">00232:</span> 
<span style="color: #000000">00233:</span> 
<span style="color: #000000">00234:</span> 
<span style="color: #000000">00235:</span> 
<span style="color: #000000">00236:</span> 
<span style="color: #000000">00237:</span> 
<span style="color: #000000">00238:</span> 
<span style="color: #000000">00239:</span> 
<span style="color: #000000">00240:</span> 
<span style="color: #000000">00241:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/MailSystem_java.html">file:horstmann/ch02_mail/MailSystem.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/MailSystem.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/MailSystem.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/MailSystem.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   A system of voice mail boxes.</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MailSystem</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">      Constructs a mail system with a given number of mailboxes</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> mailboxCount the number of mailboxes</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00013:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MailSystem</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> mailboxCount<span style="color: #990000">)</span>
<span style="color: #000000">00014:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>       mailboxes <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Mailbox<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>       <span style="font-style: italic"><span style="color: #9A1900">// Initialize mail boxes.</span></span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> mailboxCount<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
<span style="color: #000000">00020:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>          <span style="color: #008080">String</span> passcode <span style="color: #990000">=</span> <span style="color: #FF0000">""</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>i <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>          <span style="color: #008080">String</span> greeting <span style="color: #990000">=</span> <span style="color: #FF0000">"You have reached mailbox "</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>i <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">00023:</span>                <span style="color: #990000">+</span> <span style="color: #FF0000">". </span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">Please leave a message now."</span><span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>          mailboxes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Mailbox</span></span><span style="color: #990000">(</span>passcode<span style="color: #990000">,</span> greeting<span style="color: #990000">));</span>
<span style="color: #000000">00025:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Locate a mailbox.</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> ext the extension number</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@return</span><span style="font-style: italic"><span style="color: #9A1900"> the mailbox or null if not found</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00033:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Mailbox</span> <span style="font-weight: bold"><span style="color: #000000">findMailbox</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> ext<span style="color: #990000">)</span>
<span style="color: #000000">00034:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>       <span style="color: #009900">int</span> i <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">parseInt</span></span><span style="color: #990000">(</span>ext<span style="color: #990000">);</span>
<span style="color: #000000">00036:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">&lt;=</span> i <span style="color: #990000">&amp;&amp;</span> i <span style="color: #990000">&lt;=</span> mailboxes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00037:</span>          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span>  mailboxes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>i <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00039:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">ArrayList&lt;Mailbox&gt;</span> mailboxes<span style="color: #990000">;</span>
<span style="color: #000000">00042:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/Telephone_java.html">file:horstmann/ch02_mail/Telephone.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/Telephone.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/Telephone.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/Telephone.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Scanner<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   A telephone that takes simulated keystrokes and voice input</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   from the user and simulates spoken text.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Telephone</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">      Construct phone object.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> aScanner that reads text from a character-input stream</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Telephone</span></span><span style="color: #990000">(</span><span style="color: #008080">Scanner</span> aScanner<span style="color: #990000">)</span>
<span style="color: #000000">00015:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       scanner <span style="color: #990000">=</span> aScanner<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">      Speak a message to System.out.</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> output the text that will be "spoken"</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00023:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">speak</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> output<span style="color: #990000">)</span>
<span style="color: #000000">00024:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>output<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">      Loops reading user input and passes the input to the</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">      Connection object's methods dial, record or hangup.</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">      </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> c the connection that connects this phone to the</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">      voice mail system</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00034:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #008080">Connection</span> c<span style="color: #990000">)</span>
<span style="color: #000000">00035:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>       <span style="color: #009900">boolean</span> more <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>more<span style="color: #990000">)</span>
<span style="color: #000000">00038:</span>       <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>          <span style="color: #008080">String</span> input <span style="color: #990000">=</span> scanner<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextLine</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00040:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00041:</span>          <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equalsIgnoreCase</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"H"</span><span style="color: #990000">))</span>
<span style="color: #000000">00042:</span>             c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hangup</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00043:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equalsIgnoreCase</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Q"</span><span style="color: #990000">))</span>
<span style="color: #000000">00044:</span>             more <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">length</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #993399">1</span>
<span style="color: #000000">00046:</span>             <span style="color: #990000">&amp;&amp;</span> <span style="color: #FF0000">"1234567890#"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">indexOf</span></span><span style="color: #990000">(</span>input<span style="color: #990000">)</span> <span style="color: #990000">&gt;=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00047:</span>             c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dial</span></span><span style="color: #990000">(</span>input<span style="color: #990000">);</span>
<span style="color: #000000">00048:</span>          <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00049:</span>             c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">record</span></span><span style="color: #990000">(</span>input<span style="color: #990000">);</span>
<span style="color: #000000">00050:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00051:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> 
<span style="color: #000000">00053:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Scanner</span> scanner<span style="color: #990000">;</span>
<span style="color: #000000">00054:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/horstmann/ch02_mail/MailSystemTester_java.html">file:horstmann/ch02_mail/MailSystemTester.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/horstmann/ch02_mail/MailSystemTester.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/horstmann/ch02_mail/MailSystemTester.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/horstmann/ch02_mail/MailSystemTester.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> horstmann<span style="color: #990000">.</span>ch02_mail<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Scanner<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">   This program tests the mail system. A single phone</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">   communicates with the program through System.in/System.out.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900">*/</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MailSystemTester</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00011:</span>    <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>       <span style="color: #008080">MailSystem</span> system <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MailSystem</span></span><span style="color: #990000">(</span>MAILBOX_COUNT<span style="color: #990000">);</span>
<span style="color: #000000">00013:</span>       <span style="color: #008080">Scanner</span> console <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Scanner</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span>in<span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>       <span style="color: #008080">Telephone</span> p <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Telephone</span></span><span style="color: #990000">(</span>console<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>       <span style="color: #008080">Connection</span> c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Connection</span></span><span style="color: #990000">(</span>system<span style="color: #990000">,</span> p<span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>       p<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>    <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> MAILBOX_COUNT <span style="color: #990000">=</span> <span style="color: #993399">20</span><span style="color: #990000">;</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p><a href="notes-horstmann-02-075.html"><img border="0" src="../images/prev.gif" alt="Previous page"/></a><a href="notes-horstmann-02-000.html"><img border="0" src="../images/toc.gif" alt="Contents"/></a></p><script language="JavaScript1.2" type="text/javascript"><!--
        function next () {
          window.location = 'notes-horstmann-02-000.html';
        }
        document.onkeypress = next;
      --></script></body></html>
