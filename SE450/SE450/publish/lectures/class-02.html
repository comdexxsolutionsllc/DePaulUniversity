<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450:  Lecture 2 
      [2008/09/16]
    </title></head><body><h1><a href="../index.html">SE450</a>:  Lecture 2 
      (Objects as Functions)
    </h1><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="class-02-000.html"> [0/46] </a></span></td></tr></table><p> </p><table width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Overview of Today's Class</a> [1/46] </td></tr><tr><td><a href="#slide002">Homework 1: Solution</a> [2/46] </td></tr><tr><td><a href="#slide003">Packages: Compilation Units</a> [3/46] </td></tr><tr><td><a href="#slide004">Packages: Compiling with Packages</a> [4/46] </td></tr><tr><td><a href="#slide005">Packages: Compiling with Packages</a> [5/46] </td></tr><tr><td><a href="#slide006">Packages: The Classpath</a> [6/46] </td></tr><tr><td><a href="#slide007">Packages: Fully Qualified Names</a> [7/46] </td></tr><tr><td><a href="#slide008">Packages: Package Diagrams</a> [8/46] </td></tr><tr><td><a href="#slide009">Scope: Hiding</a> [9/46] </td></tr><tr><td><a href="#slide010">Scope: Java Scope Rules</a> [10/46] </td></tr><tr><td><a href="#slide011">Scope: Visibility in Java</a> [11/46] </td></tr><tr><td><a href="#slide012">Scope: Nested Packages</a> [12/46] </td></tr><tr><td><a href="#slide013">Scope: Nested Classes</a> [13/46] </td></tr><tr><td><a href="#slide014">Encapsulation: Encapsulation and Abstraction</a> [14/46] </td></tr><tr><td><a href="#slide015">Encapsulation: Provider/Consumer</a> [15/46] </td></tr><tr><td><a href="#slide016">Encapsulation: Encapsulation in Java</a> [16/46] </td></tr><tr><td><a href="#slide017">Encapsulation: Interfaces everywhere</a> [17/46] </td></tr><tr><td><a href="#slide018">Encapsulation: Invariants, Preconditions, and Postconditions</a> [18/46] </td></tr><tr><td><a href="#slide019">Encapsulation: Designing interfaces</a> [19/46] </td></tr><tr><td><a href="#slide020">Encapsulation: Priniciple of Least Knowledge</a> [20/46] </td></tr><tr><td><a href="#slide021">Types: Class as Type 1</a> [21/46] </td></tr><tr><td><a href="#slide022">Types: Class as Type 2</a> [22/46] </td></tr><tr><td><a href="#slide023">Types: Interface as Type 1</a> [23/46] </td></tr><tr><td><a href="#slide024">Types: Interface as Type 2</a> [24/46] </td></tr><tr><td><a href="#slide025">Types: Naming the intersection</a> [25/46] </td></tr><tr><td><a href="#slide026">Types: Using Generic Methods</a> [26/46] </td></tr><tr><td><a href="#slide027">Types: Declared and Actual Types</a> [27/46] </td></tr><tr><td><a href="#slide028">Types: Subtyping</a> [28/46] </td></tr><tr><td><a href="#slide029">Types: Many terms</a> [29/46] </td></tr><tr><td><a href="#slide030">Types: Subtyping</a> [30/46] </td></tr><tr><td><a href="#slide031">Types: Abstraction</a> [31/46] </td></tr><tr><td><a href="#slide032">Types: Principle of Substitutivity</a> [32/46] </td></tr><tr><td><a href="#slide033">Types: Late Binding</a> [33/46] </td></tr><tr><td><a href="#slide034">Types: Casting</a> [34/46] </td></tr><tr><td><a href="#slide035">Types: Coercion</a> [35/46] </td></tr><tr><td><a href="#slide036">Patterns: Introduction</a> [36/46] </td></tr><tr><td><a href="#slide037">Patterns: GoF principles</a> [37/46] </td></tr><tr><td><a href="#slide038">Patterns: Architecture and Software Design</a> [38/46] </td></tr><tr><td><a href="#slide039">Patterns: The Quality without a Name</a> [39/46] </td></tr><tr><td><a href="#slide040">Patterns: A Pattern Language</a> [40/46] </td></tr><tr><td><a href="#slide041">Patterns: A Timeless Way of Building</a> [41/46] </td></tr><tr><td><a href="#slide042">What if you want class names to be hidden from clients?</a> [42/46] </td></tr><tr><td><a href="#slide043">Static Factory Example</a> [43/46] </td></tr><tr><td><a href="#slide044">Function Objects: Strategy</a> [44/46] </td></tr><tr><td><a href="#slide045">Function Objects: Command</a> [45/46] </td></tr><tr><td><a href="#slide046">Function Objects: Homework 2</a> [46/46] </td></tr></table><br/><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Overview of Today's Class</a></span><span style="font-weight: normal"><a href="class-02-001.html"> [1/46] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>
            HW1: Testing
          </li>
          <li>
            HW1: Managing the code producer/consumer relationship
          </li>
          <li>
            HW1: Cohesion
          </li>
          <li>
            Better interfaces with java packages and java interfaces
            <ul>
              <li>Package (Namespace/Assembly)</li>
              <li>Class (Interface)</li>
              <li>Method (Function)</li>
            </ul>
          </li>
          <li>
            Types and subtyping
          </li>
          <li>
            HW2: Static factory classes
          </li>
          <li>
            HW2: Objects as Functions
            <ul>
              <li>Strategy Pattern</li>
              <li>Command Pattern</li>
            </ul>
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Homework 1: Solution</a></span><span style="font-weight: normal"><a href="class-02-002.html"> [2/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Let's discuss HW1, looking at my solution, which will be
          posted on COL tomorrow around noon.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Packages: Compilation Units</a></span><span style="font-weight: normal"><a href="class-02-003.html"> [3/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          A java compilation-unit (file) contains:
        </p>
        <ul xmlns="">
          <li>a package declaration (optional)</li>
          <li>zero or more import statements</li>
          <li>one or more class/interface declarations</li>
        </ul>
        <p xmlns="">
          What if a file contains a public class/interface?
        </p>
        <p xmlns="">
          What if the package declaration is absent?
        </p>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">
          If a class/interface is public, the filename must
          correspond to the class/interface name.  As a result, each
          file may contain at most one public class or interface.
        </p>
        <p xmlns="">
          If the package declaration is absent, then the classes
          belong to a unnamed <i>default package</i>.
        </p>
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Packages: Compiling with Packages</a></span><span style="font-weight: normal"><a href="class-02-004.html"> [4/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          For example, the following code declares class
          <tt>types.simplePackage.Main</tt>:
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/simplePackage/Main_java.html">file:types/simplePackage/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/simplePackage/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/simplePackage/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/simplePackage/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>simplePackage<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hello Packages!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          How do you compile it?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Packages: Compiling with Packages</a></span><span style="font-weight: normal"><a href="class-02-005.html"> [5/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          To compile the code, place it in the file
          <tt>types\simplePackage\Main.java</tt> and run the compiler:
        </p>
<pre xmlns="" xml:space="preserve">
<b>&gt; javac types\simplePackage\Main.java</b>
</pre>
        <p xmlns="">
          The compiler produces the file
          <tt>types\simplePackage\Main.class</tt>.  To execute the
          static <tt>types.simplePackage.Main.main()</tt> method, run
          the interpreter:
        </p>
<pre xmlns="" xml:space="preserve">
<b>&gt; java types.simplePackage.Main</b>
</pre>
        <p xmlns="">
          Note that the compiler, rather irritatingly, does not
          complain if the directory name and package name disagree;
          however, the JVM does.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Packages: The Classpath</a></span><span style="font-weight: normal"><a href="class-02-006.html"> [6/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The java interpreter looks for packages along its
          <tt>classpath</tt>.
        </p>
        <p xmlns="">
          Suppose <tt>types</tt> is in directory
          <tt>d:\se450\code\build\classes</tt>.  Then we can
          run <tt>Hello</tt> at any time by typing:
        </p>
<pre xmlns="" xml:space="preserve">
&gt; <b>java -classpath d:\se450\code\build\classes types.simplePackage.Main</b>
</pre>
        <p xmlns="">
          or
        </p>
<pre xmlns="" xml:space="preserve">
&gt; <b>set classpath="%classpath%;d:\se450\code\build\classes"</b>
&gt; <b>java types.simplePackage.Main</b>
</pre>
        <p xmlns="">
          Note that java will ignore classes in the current directory
          unless <b><tt>.</tt></b> is in the <tt>classpath</tt>.  If you
          are in a directory with <tt>Main.class</tt> and java
          replies
        </p>
<pre xmlns="" xml:space="preserve">
&gt; <b>java Main</b>
Exception in thread "main" java.lang.NoClassDefFoundError: Main
</pre>
        <p xmlns="">
            try:
        </p>
<pre xmlns="" xml:space="preserve">
&gt; <b>java -classpath . Main</b>
</pre>
        <p xmlns="">
          In windows, you can set your <tt>classpath</tt> variable permanently
          by adding a line at the end of <tt>c:\autoexec.bat</tt> and
          restarting your computer.  For example:
        </p>
<pre xmlns="" xml:space="preserve">
set classpath=".;d:\se450\lib\ant.jar;%classpath%"
</pre>
        <p xmlns="">
          If DOS gives you the error "Out of environment space", then
          apply the solution found here:
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://support.microsoft.com/default.aspx?scid=KB;EN-US;Q230205&amp;">http://support.microsoft.com/default.aspx?scid=KB;EN-US;Q230205&amp;</a>
        </p>
        <p xmlns="">
          In win2k, NT, XP you can also use, for example:
        </p>
<pre xmlns="" xml:space="preserve">
start |
  settings |
    control panel |
      system |
        advanced |
          environment variables |
            new | (or modify)
              Variable Name: classpath
              Variable Value: <b>.;d:\se450\lib\ant.jar;(whatever was there before)</b>
</pre>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">Packages: Fully Qualified Names</a></span><span style="font-weight: normal"><a href="class-02-007.html"> [7/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Java classes are accessed from other packages using
          <i>fully-qualified names</i>, such as
          <tt>java.awt.Component</tt> or
          <tt>types.simplePackage.Main</tt>.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">LinkedList</span></span><span style="color: #990000">();</span>
</tt></pre>

        <p xmlns="">
          One can also use bare class names in other packages by
          <i>importing</i> the relevant classes.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>LinkedList<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">LinkedList</span></span><span style="color: #990000">();</span>
</tt></pre>

        <p xmlns="">
          Import statements do nothing but help resolve names.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Packages: Package Diagrams</a></span><span style="font-weight: normal"><a href="class-02-008.html"> [8/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          A top-level package diagram typically shows all of the
          packages in a system.  Sometimes it also includes the public
          classes/interfaces within each package (usually by name
          only--no fields or methods listed).  You can then show the
          dependencies between these public portions of the packages.
        </p>
        <p xmlns="">
          Here is a small example:
        </p>
<pre xmlns="" xml:space="preserve">
    +---+                       +---+              
    | x |                       | y |              
    +---+-------------+         +---+-------------+
    |                 |         |                 |
    | +-------------+ |         | +-------------+ |
    | |&lt;&lt;interface&gt;&gt;|&lt;----+-------|Main         | |
    | |      I      | |   |     | +-------------+ |
    | +-------------+ |   |     |                 |
    |                 |   |     +-----------------+
    |  +----------+   |   |
    |  |&lt;&lt;static&gt;&gt;|&lt;------+
    |  | IFactory |   |
    |  +----------+   |
    |                 |
    +-----------------+
</pre>
        <p xmlns="">
          There are two packages, <code>x</code> and <code>y</code>.
          <code>x</code> has two public classes: <code>I</code> is an
          interface and <code>IFactory</code> has only static methods.
          <code>y</code> has one public class: <code>Main</code>.
          <code>y.Main</code> depends on <code>x.I</code> and
          <code>x.IFactory</code>.
        </p>
        <p xmlns="">
          Note that the diagram does not show "intra-package"
          dependencies, only "inter-package" dependencies; that is, we
          do not show dependencies within a package, but only between
          packages.
        </p>
        <p xmlns="">
          Here is a more abstract version:
        </p>
<pre xmlns="" xml:space="preserve">
    +---+             +---+    
    | x |             | y |    
    +---+---+         +---+---+
    |       |         |       |
    |       |&lt;--------|       |
    |       |         |       |
    +-------+         +-------+
</pre>
        <p xmlns="">
          A system document would usually also have a class diagram
          for each package, showing in more detail how the package is
          implemented.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Scope: Hiding</a></span><span style="font-weight: normal"><a href="class-02-009.html"> [9/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What is scope?
        </p>
        <p xmlns="">
          What is hiding (occlusion)?
        </p>
        <p xmlns="">
          What is visibility?
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">C</span> <span style="color: #FF0000">{</span>
  <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
  <span style="color: #009900">float</span> f<span style="color: #990000">;</span>          
  <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">m</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> f<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// field f is hidden</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> f<span style="color: #990000">;</span> i<span style="color: #990000">--;</span> i<span style="color: #990000">&gt;</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
       <span style="font-style: italic"><span style="color: #9A1900">// field i is hidden</span></span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Scope: Java Scope Rules</a></span><span style="font-weight: normal"><a href="class-02-010.html"> [10/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The dot operator (<b><tt>.</tt></b>) affects scope.
        </p>
        <p xmlns="">
          In C++, there are three operators that affect scope:
          <b><tt>.</tt></b>, <b><tt>-&gt;</tt></b> and
          <b><tt>::</tt></b>.
        </p>
        <p xmlns="">
          The names in scope on the right of the java dot operator
          depend on the compile-time type of the left expression.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">Scope: Visibility in Java</a></span><span style="font-weight: normal"><a href="class-02-011.html"> [11/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What is public visibilty?
        </p>
        <p xmlns="">
          What is private visibility?
        </p>
        <p xmlns="">
          What is package-private visibility? (<i>aka</i> default,
          package, friendly)
        </p>
        <p xmlns="">
          What is protected visibility?
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/visibility/x/A_java.html">file:types/visibility/x/A.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/visibility/x/A.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/visibility/x/A.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/visibility/x/A.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>visibility<span style="color: #990000">.</span>x<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> x0<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>             <span style="color: #009900">int</span> x1<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">protected</span></span> <span style="color: #009900">int</span> x2<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>      <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> x3<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">fx</span></span><span style="color: #990000">(</span><span style="color: #008080">A</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x0 <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x1 <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x2 <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x3
<span style="color: #000000">00010:</span>          <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x0 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x1 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x2 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x3<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> 
<span style="color: #000000">00014:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">gx</span></span><span style="color: #990000">(</span><span style="color: #008080">A</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> that<span style="color: #990000">.</span>x0 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x1 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x2 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x3<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/visibility/y/C_java.html">file:types/visibility/y/C.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/visibility/y/C.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/visibility/y/C.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/visibility/y/C.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>visibility<span style="color: #990000">.</span>y<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span>  types<span style="color: #990000">.</span>visibility<span style="color: #990000">.</span>x<span style="color: #990000">.</span>A<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">C</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">fy</span></span><span style="color: #990000">(</span><span style="color: #008080">C</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x0 <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x1 <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x2 <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x3
<span style="color: #000000">00006:</span>          <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x0 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x1 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x2 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x3<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> 
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">D</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">gy</span></span><span style="color: #990000">(</span><span style="color: #008080">A</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> that<span style="color: #990000">.</span>x0 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x1 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x2 <span style="color: #990000">+</span> that<span style="color: #990000">.</span>x3<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Scope: Nested Packages</a></span><span style="font-weight: normal"><a href="class-02-012.html"> [12/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Is there any significance to nested packages?
        </p>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">No.</p>
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Scope: Nested Classes</a></span><span style="font-weight: normal"><a href="class-02-013.html"> [13/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Is there any significance to nested classes?
        </p>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">Not if they are static.</p>
        <p xmlns="">non-static nested classes are special.</p>
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Encapsulation: Encapsulation and Abstraction</a></span><span style="font-weight: normal"><a href="class-02-014.html"> [14/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          <i>Encapsulation</i> is about hiding details -- the details
          are not accessible outside the unit of encapsulation.
        </p>
        <p xmlns="">
          Large organizations function because not everyone needs to
          know every detail all the time -- they break down when too
          many people need to know too much.
        </p>
        <p xmlns="">
          For example, <code>Math.random():double</code> computes a
          pseudo-random number, but the details are hidden.
        </p>
        <p xmlns="">
          Code provider versus client programmer.
        </p>
        <p xmlns="">
          The provider's code is <i>encapsulated</i>.
          The client sees an <i>abstraction</i>.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">Encapsulation: Provider/Consumer</a></span><span style="font-weight: normal"><a href="class-02-015.html"> [15/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          OO Design is about defining good abstractions (boundaries).
        </p>
        <p xmlns="">
          Abstractions distribute responsibilities.
        </p>
        <p xmlns="">
          Code provider versus client programmer -- there is always
          contract between the two.
        </p>
        <p xmlns="">
          Where are the contracts in Java?
        </p>
        <p xmlns="">
          Java Equality as example of informal contract:
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object)">java.lang.Object#equals(java.lang.Object)</a>
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">Encapsulation: Encapsulation in Java</a></span><span style="font-weight: normal"><a href="class-02-016.html"> [16/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Java has four levels of encapsulation:
        </p>
        <ul xmlns="">
          <li>Packages define <q>top-level</q> scopes.</li>
          <li>Classes and Interfaces are scoped within packages.</li>
          <li>Fields and methods are scoped within classes.</li>
          <li>Local variables and parameters are scoped within methods.</li>
        </ul>
        <p xmlns="">
          There is actually a bit more.  For example,
          outside of the source language, one can seal
          <code>jar</code> files so that packages are closed.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">Encapsulation: Interfaces everywhere</a></span><span style="font-weight: normal"><a href="class-02-017.html"> [17/46] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>
            The interface of a package is the names of its public
            classes and interfaces.
          </li>
          <li>
            The interface of a class (or interface) is the name and
            type of its public members.
          </li>
          <li>
            The interface of a method is its type (arguments and
            return).
          </li>
        </ul>
        <p xmlns="">
          Java uses the keyword <tt>interface</tt> to define the
          interface of an object class.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">Encapsulation: Invariants, Preconditions, and Postconditions</a></span><span style="font-weight: normal"><a href="class-02-018.html"> [18/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
	  <b>Definition:</b> the interfaces of classes are viewed as
	  contracts that specify benefits and obligations of both the
	  client and the supplier (the class itself).  (Bertrand Meyer)
	</p>
        <p xmlns="">
          We can enhance interfaces by using
          preconditions/postconditions and invariants:
        </p>
        <ol xmlns="">
        <li>
	  Precondition - must be true to make the call.  Indicates the
	  bug is in the caller.
	</li>
	<li>
	  Postcondition - must be true after the call.  Indicates the
	  bug is in the provider (or in the precondition assertion!)
	</li>
	<li>
	  Invariant - must always be true (after a successful
	  instantiation of the class, or even true for static methods
	  if there is no object of the class created).  It will be
	  true before and after each method invocation.  Indicates the
	  bug could be in either the caller or the provider.
	</li>
        </ol>
	<p xmlns="">
	  You can define these conditions as <i>constraints</i> in the
	  UML.  Just put the text describing the constraint in <code>{ }</code>.
	  There is also a more formal <i>Object Constraint
	  Language</i> available to define constraints.
	</p>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">
	  The programming language <a href="http://www.eiffel.com/eiffel/page.html" shape="rect">Eiffel</a> has
	  DBC built in.  Two classes interact via a contract.  A
	  breach of contract is a bug.  Eiffel provides the ability
	  for all assertions to be propogated to subclasses, and
	  assertions in interfaces apply to implementing classes.
	  Read this article for some more information on <a href="http://www.eiffel.com/doc/manuals/technology/contract/" shape="rect">DBC
	  in Eiffel</a>.
	</p>
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Encapsulation: Designing interfaces</a></span><span style="font-weight: normal"><a href="class-02-019.html"> [19/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What makes a good method?
        </p>
        <p xmlns="">
          What makes a good class?
        </p>
        <p xmlns="">
          What makes a good package?
        </p>
        <p xmlns="">
          Cohesion - should be describable in one short sentence.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">Encapsulation: Priniciple of Least Knowledge</a></span><span style="font-weight: normal"><a href="class-02-020.html"> [20/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The paranoia principle: <i>Hide as much as possible</i>
        </p>
        <p xmlns="">
          Said differently: don't make commitments you don't need to make.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">Types: Class as Type 1</a></span><span style="font-weight: normal"><a href="class-02-021.html"> [21/46] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/point1/Main_java.html">file:types/point1/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/point1/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/point1/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/point1/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>point1<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CartesianPoint</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">double</span> _x<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">double</span> _y<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> Color _color<span style="color: #990000">;</span> 
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #008080">Color</span> color<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     _x <span style="color: #990000">=</span> x<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>     _y <span style="color: #990000">=</span> y<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>     _color <span style="color: #990000">=</span> color<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _x<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Color</span> <span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"It's Cartesian!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _color<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     <span style="color: #008080">CartesianPoint</span> p1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>     <span style="color: #008080">CartesianPoint</span> q1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>BLUE<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          What are the types of <tt>p1</tt> and <tt>q1</tt>?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">Types: Class as Type 2</a></span><span style="font-weight: normal"><a href="class-02-022.html"> [22/46] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/point2/Main_java.html">file:types/point2/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/point2/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/point2/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/point2/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>point2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PolarPoint</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">double</span> _theta<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">double</span> _r<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> Color _color<span style="color: #990000">;</span> 
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">PolarPoint</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> theta<span style="color: #990000">,</span> <span style="color: #009900">double</span> r<span style="color: #990000">,</span> <span style="color: #008080">Color</span> color<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     _theta <span style="color: #990000">=</span> theta<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>     _r <span style="color: #990000">=</span> r<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>     _color <span style="color: #990000">=</span> color<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _r<span style="color: #990000">*</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>_theta<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _r<span style="color: #990000">*</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>_theta<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Color</span> <span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"It's Polar!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _color<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     <span style="color: #008080">PolarPoint</span> r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PolarPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          What is the type of <tt>r1</tt>?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">Types: Interface as Type 1</a></span><span style="font-weight: normal"><a href="class-02-023.html"> [23/46] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/point3/Main_java.html">file:types/point3/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/point3/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/point3/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/point3/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>point3<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Point</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CartesianPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Point <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PolarPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Point <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>     <span style="color: #008080">CartesianPoint</span> p1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>     <span style="color: #008080">CartesianPoint</span> q1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>BLUE<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>     <span style="color: #008080">PolarPoint</span> r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PolarPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">);</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>     <span style="color: #008080">Point</span> p2 <span style="color: #990000">=</span> p1<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>     <span style="color: #008080">Point</span> q2 <span style="color: #990000">=</span> q1<span style="color: #990000">;</span>
<span style="color: #000000">00022:</span>     <span style="color: #008080">Point</span> r2 <span style="color: #990000">=</span> r1<span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          What are the types of <tt>p2</tt>, <tt>q2</tt>, <tt>r2</tt>?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">Types: Interface as Type 2</a></span><span style="font-weight: normal"><a href="class-02-024.html"> [24/46] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/point4/Main_java.html">file:types/point4/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/point4/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/point4/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/point4/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>point4<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Colored</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #008080">Color</span> <span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Point</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CartesianPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Colored<span style="color: #990000">,</span> Point <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PolarPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Colored<span style="color: #990000">,</span> Point <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     <span style="color: #008080">CartesianPoint</span> p1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">);</span>
<span style="color: #000000">00020:</span>     <span style="color: #008080">CartesianPoint</span> q1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>BLUE<span style="color: #990000">);</span>
<span style="color: #000000">00021:</span>     <span style="color: #008080">PolarPoint</span> r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PolarPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">);</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>     <span style="color: #008080">Point</span> p2 <span style="color: #990000">=</span> p1<span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>     <span style="color: #008080">Point</span> q2 <span style="color: #990000">=</span> q1<span style="color: #990000">;</span>
<span style="color: #000000">00025:</span>     <span style="color: #008080">Point</span> r2 <span style="color: #990000">=</span> r1<span style="color: #990000">;</span>
<span style="color: #000000">00026:</span> 
<span style="color: #000000">00027:</span>     <span style="color: #008080">Colored</span> p3 <span style="color: #990000">=</span> p1<span style="color: #990000">;</span>
<span style="color: #000000">00028:</span>     <span style="color: #008080">Colored</span> q3 <span style="color: #990000">=</span> q1<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>     <span style="color: #008080">Colored</span> r3 <span style="color: #990000">=</span> r1<span style="color: #990000">;</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          What are the types of <tt>p3</tt>, <tt>q3</tt> and
          <tt>r3</tt>?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">Types: Naming the intersection</a></span><span style="font-weight: normal"><a href="class-02-025.html"> [25/46] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/point5/Main_java.html">file:types/point5/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/point5/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/point5/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/point5/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>point5<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Colored</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #008080">Color</span> <span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Point</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">ColoredPoint</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Colored<span style="color: #990000">,</span> Point
<span style="color: #000000">00012:</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CartesianPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> ColoredPoint <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PolarPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> ColoredPoint <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">printColoredPoint</span></span><span style="color: #990000">(</span><span style="color: #008080">ColoredPoint</span> cp<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>cp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00023:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>cp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00024:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>cp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00025:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>     <span style="font-weight: bold"><span style="color: #000000">printColoredPoint</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">));</span>
<span style="color: #000000">00028:</span>     <span style="font-weight: bold"><span style="color: #000000">printColoredPoint</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PolarPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">));</span>
<span style="color: #000000">00029:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide026">Types: Using Generic Methods</a></span><span style="font-weight: normal"><a href="class-02-026.html"> [26/46] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/point6/Main_java.html">file:types/point6/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/point6/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/point6/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/point6/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>point6<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Colored</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #008080">Color</span> <span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Point</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CartesianPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Colored<span style="color: #990000">,</span> Point <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PolarPoint</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Colored<span style="color: #990000">,</span> Point <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #990000">&lt;</span>T <span style="color: #008080">extends</span> Point <span style="color: #990000">&amp;</span> Colored<span style="color: #990000">&gt;</span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">printColoredPoint</span></span><span style="color: #990000">(</span><span style="color: #008080">T</span> cp<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>cp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00020:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>cp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00021:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>cp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00022:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #000000">printColoredPoint</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CartesianPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">));</span>
<span style="color: #000000">00025:</span>     <span style="font-weight: bold"><span style="color: #000000">printColoredPoint</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PolarPoint</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>Color<span style="color: #990000">.</span>RED<span style="color: #990000">));</span>
<span style="color: #000000">00026:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide027">Types: Declared and Actual Types</a></span><span style="font-weight: normal"><a href="class-02-027.html"> [27/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Declared type = Static type =  Compile-time type.
        </p>
        <ul xmlns=""><li>
          In java, declared type is the <q>type of the reference</q>.
        </li></ul>
        <p xmlns="">
          Actual type = Dynamic type = Run-time type.
        </p>
        <ul xmlns=""><li>
          In java, actual types are the <q>type of the object -- to
          which the reference refers</q>.
        </li></ul>
        <p xmlns="">
          Java community refers to <q>type of variable</q> versus
          <q>class of object</q>.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide028">Types: Subtyping</a></span><span style="font-weight: normal"><a href="class-02-028.html"> [28/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Objects may inhabit more than one type.
        </p>
<pre xmlns="" xml:space="preserve">
  Object x = new Integer(1);
</pre>
        <p xmlns="">
          If all of the objects in <code>D</code> are also in
          <code>B</code>, we say:
        </p>
        <ul xmlns="">
          <li><code>D</code> is a subtype of <code>B</code></li>
        </ul>
        <p xmlns="">
          This is called <i>subtype polymorphism</i>.
        </p>
        <p xmlns="">
          Common notation for theorists: <q><code>D &lt;:
          B</code></q>.
        </p>
        <p xmlns="">
          Subtype related to subset -- <i>values</i>(<code>D</code>)
          is a subset of <i>values</i>(<code>B</code>)
        </p>
        <ul xmlns="">
          <li>
            <code>Integer</code> is a subtype of <code>Object</code>.
          </li>
          <li>
            <code>Integer</code> is a subtype of <code>Comparable</code>.
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide029">Types: Many terms</a></span><span style="font-weight: normal"><a href="class-02-029.html"> [29/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Relating interfaces to interfaces (<tt>J &lt;: I</tt>)
        </p>
        <ul xmlns="">
          <li><code>J</code> is a subtype of <code>I</code></li>
          <li><code>J</code> specializes <code>I</code> (UML)</li>
          <li><code>J</code> extends <code>I</code> (java)</li>
          <li><code>J</code> inherits the interface of <code>I</code></li>
        </ul>
        <p xmlns="">
          Relating classes to interfaces  (<tt>D &lt;: I</tt>)
        </p>
        <ul xmlns="">
          <li><code>D</code> is a subtype of <code>I</code></li>
          <li><code>D</code> realizes <code>I</code> (UML)</li>
          <li><code>D</code> implements <code>I</code> (java)</li>
        </ul>
        <p xmlns="">
          Relating classes to classes  (<tt>D &lt;: B</tt>)
        </p>
        <ul xmlns="">
          <li><code>D</code> is a subtype of <code>B</code></li>
          <li><code>D</code> is a subclass of <code>B</code></li>
          <li><code>D</code> specializes <code>B</code> (UML)</li>
          <li><code>D</code> extends <code>B</code> (java)</li>
          <li><code>D</code> inherits from <code>B</code></li>
          <li><code>D</code> is derived from base class <code>B</code></li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide030">Types: Subtyping</a></span><span style="font-weight: normal"><a href="class-02-030.html"> [30/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What is subtyping in Java?  For any class or interface <tt>C</tt>:
        </p>
        <ul xmlns="">
          <li>
            <tt>C</tt> <i>subtype</i> <tt>C</tt>  <i>(reflexive)</i>
          </li>
          <li>
            <tt>C</tt> <i>subtype</i> <tt>Object</tt>  <i>(top)</i>
          </li>
          <li>
            if <tt>C</tt> <i>subtype</i> <tt>D</tt>
            and <tt>D</tt> <i>subtype</i> <tt>E</tt> then
            <tt>C</tt> <i>subtype</i> <tt>E</tt>   <i>(transitive)</i>
          </li>
          <li>
            if <tt>C extends D</tt>
            then <tt>C</tt> <i>subtype</i> <tt>D</tt>
            <i>(extends)</i>
          </li>
          <li>
            if <tt>C implements D</tt>
            then <tt>C</tt> <i>subtype</i> <tt>D</tt>
            <i>(implements)</i>
          </li>
          <li>
            if <tt>C</tt> <i>subtype</i> <tt>D</tt>
            then <tt>C[]</tt> <i>subtype</i> <tt>D[]</tt>
            <i>(array)</i>
          </li>
        </ul>
        <p xmlns="">
          What is subclassing?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide031">Types: Abstraction</a></span><span style="font-weight: normal"><a href="class-02-031.html"> [31/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          We can look at an object at progressively more abstract
          types.
        </p>
        <p xmlns="">
          Consider <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/LinkedList.html">java.util.LinkedList</a>:
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/abstractTypes/Main_java.html">file:types/abstractTypes/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/abstractTypes/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/abstractTypes/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/abstractTypes/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>abstractTypes<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="color: #008080">LinkedList</span> o1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">LinkedList</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>     java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="color: #008080">AbstractSequentialList</span> o2 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span>     java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="color: #008080">AbstractList</span> o3 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span>     java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="color: #008080">AbstractCollection</span> o4 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>     java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span><span style="color: #008080">Object</span> o5 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span>     java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="color: #008080">List</span> i1 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>     java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="color: #008080">Collection</span> i2 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span> 
<span style="color: #000000">00014:</span>     java<span style="color: #990000">.</span>io<span style="color: #990000">.</span><span style="color: #008080">Serializable</span> i3 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>     java<span style="color: #990000">.</span>lang<span style="color: #990000">.</span><span style="color: #008080">Cloneable</span> i4 <span style="color: #990000">=</span> o1<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          There are nine references to a single object.
        </p>
        <p xmlns="">
          Each reference has a different set of capabilities.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide032">Types: Principle of Substitutivity</a></span><span style="font-weight: normal"><a href="class-02-032.html"> [32/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The <i>Principle of Substitutivity</i> (aka <i>Liskov
          Substitution Principle</i>):  Subtypes should obey the
          behaviors expected by their supertypes.
        </p>          
        <p xmlns="">
          Would it be okay if <tt>StringBuilder</tt> extended
          <tt>String</tt>?
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">f</span></span><span style="color: #990000">(</span><span style="color: #008080">StringBuilder</span> b<span style="color: #990000">,</span> <span style="color: #008080">String</span> s<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  <span style="color: #008080">String</span> t1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">String</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>   <span style="font-style: italic"><span style="color: #9A1900">// copy s</span></span>
  b<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"astrophe"</span><span style="color: #990000">);</span>
  <span style="color: #008080">String</span> t2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">String</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>   <span style="font-style: italic"><span style="color: #9A1900">// copy s again</span></span>
  Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span>t1<span style="color: #990000">,</span>t2<span style="color: #990000">);</span>  <span style="font-style: italic"><span style="color: #9A1900">// t1 and t2 should be the same</span></span>
<span style="color: #FF0000">}</span>

<span style="color: #008080">StringBuilder</span> b <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"cat"</span><span style="color: #990000">);</span>          
<span style="font-weight: bold"><span style="color: #000000">f</span></span><span style="color: #990000">(</span>b<span style="color: #990000">,</span>b<span style="color: #990000">);</span>
</tt></pre>

        <p xmlns="">
          Would it be okay if <tt>String</tt> extended
          <tt>StringBuilder</tt>?
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="color: #008080">String</span> s <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">String</span></span><span style="color: #990000">();</span>
<span style="color: #008080">StringBuilder</span> b <span style="color: #990000">=</span> s<span style="color: #990000">;</span>
s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">();</span> <span style="font-style: italic"><span style="color: #9A1900">// compiler error!  message not understood!</span></span>
</tt></pre>

        <p xmlns="">
          Some dubious interfaces:
          <br xmlns="http://www.w3.org/1999/xhtml"/>
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/lang/Cloneable.html">java.lang.Cloneable</a>
          <br xmlns="http://www.w3.org/1999/xhtml"/>
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/Iterator.html">java.util.Iterator</a>.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide033">Types: Late Binding</a></span><span style="font-weight: normal"><a href="class-02-033.html"> [33/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The actual type of an object -- along with the object state
          -- determines message response.
        </p>
        <p xmlns="">
          Actual type of receiver cannot be determined statically!
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="color: #008080">Colored</span> p3<span style="color: #990000">,</span> r3<span style="color: #990000">;</span>
p3<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">();</span> <span style="font-style: italic"><span style="color: #9A1900">// prints "Cartesian"</span></span>
r3<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">();</span> <span style="font-style: italic"><span style="color: #9A1900">// prints "Polar"</span></span>
</tt></pre>

        <p xmlns="">
          The actual method is bound <i>late</i> (ie, determined at
          <i>run-time</i>).
        </p>
        <ul xmlns="">
          <li>Late Binding</li>
          <li>Dynamic Binding</li>
          <li>Dynamic Dispatch</li>
        </ul>
        <p xmlns="">
          This is implemented using virtual function tables (aka, vtables).
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide034">Types: Casting</a></span><span style="font-weight: normal"><a href="class-02-034.html"> [34/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What is a downcast, upcast, crosscast?
        </p>
        <p xmlns="">
          How are casts checked by the compiler?
        </p>
        <ul xmlns=""><li>
          What does a cast do to the static type of an expression?
        </li></ul>
        <p xmlns="">
          How are casts checked by the runtime system?
        </p>
        <ul xmlns=""><li>
          What does a cast do to the dynamic type of an object?
        </li></ul>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/casting/Main_java.html">file:types/casting/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/casting/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/casting/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/casting/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>casting<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-style: italic"><span style="color: #9A1900">// class Number {} </span></span>
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">// class Integer extends Number {} </span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900">// class Float extends Number {} </span></span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Upcasts always compile and run ok</span></span>
<span style="color: #000000">00010:</span>     <span style="color: #008080">Number</span> n1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Integer</span></span><span style="color: #990000">(</span><span style="color: #993399">42</span><span style="color: #990000">);</span>          <span style="font-style: italic"><span style="color: #9A1900">// implicit upcast</span></span>
<span style="color: #000000">00011:</span>     <span style="color: #008080">Number</span> n2 <span style="color: #990000">=</span> <span style="color: #990000">(</span>Number<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Float</span></span><span style="color: #990000">(</span><span style="color: #993399">3.14</span><span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// explicit upcast</span></span>
<span style="color: #000000">00012:</span> 
<span style="color: #000000">00013:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Explicit downcasts always compile, but may cause runtime errors</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">//  Integer i1 = n1;           // implicit downcast: compiler error</span></span>
<span style="color: #000000">00015:</span>     <span style="color: #008080">Integer</span> i2 <span style="color: #990000">=</span> <span style="color: #990000">(</span>Integer<span style="color: #990000">)</span> n1<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// explicit downcast: runtime success</span></span>
<span style="color: #000000">00016:</span>     <span style="color: #008080">Integer</span> i3 <span style="color: #990000">=</span> <span style="color: #990000">(</span>Integer<span style="color: #990000">)</span> n2<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// explicit downcast: runtime error</span></span>
<span style="color: #000000">00017:</span> 
<span style="color: #000000">00018:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Crosscasts are always disallowed by the compiler</span></span>
<span style="color: #000000">00019:</span>     <span style="font-style: italic"><span style="color: #9A1900">// So Integer cannot cast to Float</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">//  Float f1 = (Float) i2;          // crosscast: compiler error</span></span>
<span style="color: #000000">00021:</span>     <span style="color: #008080">Float</span> f2 <span style="color: #990000">=</span> <span style="color: #990000">(</span>Float<span style="color: #990000">)</span> <span style="color: #990000">(</span>Number<span style="color: #990000">)</span> i2<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// upcast+downcast: runtime error</span></span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Casting changes the declared type, but not the actual type</span></span>
<span style="color: #000000">00024:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Object n2="</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>Object<span style="color: #990000">)</span> n2<span style="color: #990000">));</span>
<span style="color: #000000">00025:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Number n2="</span> <span style="color: #990000">+</span> n2<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Float  n2="</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>Float<span style="color: #990000">)</span> n2<span style="color: #990000">));</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>

<pre xmlns="" xml:space="preserve"><tt>The rules are as follows 

  <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #FF0000">{}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">C</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #FF0000">{}</span>

Upcast goes from subtype <span style="color: #008080">to</span> supertype<span style="color: #990000">:</span> <span style="color: #990000">(</span>A<span style="color: #990000">)(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">())</span>
Downcast goes from supertype <span style="color: #008080">to</span> subtype<span style="color: #990000">:</span> <span style="color: #990000">(</span>B<span style="color: #990000">)(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">())</span>
Any other cast <span style="color: #008080">is</span> a <span style="color: #FF0000">"cross cast"</span>

At <span style="color: #008080">compile</span> time<span style="color: #990000">:</span> the cast is allowed <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> it is an upcast or <span style="color: #008080">a</span> downcast<span style="color: #990000">.</span>
The declared type of the cast expression <span style="color: #008080">is</span> changed<span style="color: #990000">:</span>

      <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">()</span>  has declared type B
  <span style="color: #990000">(</span>A<span style="color: #990000">)(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">())</span> has declared type A

<span style="color: #008080">At</span> runtime<span style="color: #990000">:</span> downcasts are checked to <span style="color: #008080">ensure</span> <span style="font-weight: bold"><span style="color: #000000">validity</span></span> <span style="color: #990000">(</span>ClassCastException <span style="color: #008080">if</span> not<span style="color: #990000">)</span>
The actual type of the object <span style="color: #008080">is</span> unchanged<span style="color: #990000">:</span>

      <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">()</span>  has actual type B
  <span style="color: #990000">(</span>A<span style="color: #990000">)(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">())</span> has actual type B
</tt></pre>
        
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">
          Output is:
        </p>
<pre xmlns="" xml:space="preserve">
Object n2=3.14
Number n2=3.14
Float  n2=3.14
</pre>        
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide035">Types: Coercion</a></span><span style="font-weight: normal"><a href="class-02-035.html"> [35/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Coercion is very different from casting.
        </p>
        <p xmlns="">
          Java uses the same syntax for both concepts.
        </p>
        <p xmlns="">
          Coercion for base types.  Casting for Object types.
        </p>
        <p xmlns="">
          Coercion changes the <i>actual type</i> of the <q>object</q>
          -- Casting changes only the <i>declared type</i>.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/types/coercion/Main_java.html">file:types/coercion/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/types/coercion/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/types/coercion/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/types/coercion/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> types<span style="color: #990000">.</span>coercion<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="color: #009900">int</span> i0 <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>     <span style="color: #009900">float</span> f0 <span style="color: #990000">=</span> i0<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">// compiles ok, runs ok (implicit up-coercion)</span></span>
<span style="color: #000000">00007:</span>     <span style="color: #009900">float</span> f1 <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">float</span><span style="color: #990000">)</span> i0<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// compiles ok, runs ok (explicit up-coercion)</span></span>
<span style="color: #000000">00008:</span> 
<span style="color: #000000">00009:</span>     <span style="color: #009900">float</span> f2 <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">.</span>42f<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">//  int i2 = f2;       // compiler error (implicit down-coercion)</span></span>
<span style="color: #000000">00011:</span>     <span style="color: #009900">int</span> i3 <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> f2<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// compiles ok, runs ok (explicit down-coercion)</span></span>
<span style="color: #000000">00012:</span> 
<span style="color: #000000">00013:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Note that coercion changes the actual value, not just the</span></span>
<span style="color: #000000">00014:</span>     <span style="font-style: italic"><span style="color: #9A1900">// declared type.</span></span>
<span style="color: #000000">00015:</span>     <span style="color: #009900">float</span> f3 <span style="color: #990000">=</span> i3<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"f2="</span> <span style="color: #990000">+</span> f2<span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"f3="</span> <span style="color: #990000">+</span> f3<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">CoercionOrdering</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">CoercionOrdering</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">showingCoercionOrder</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>     <span style="font-style: italic"><span style="color: #9A1900">// booleans and object types do not coerce</span></span>
<span style="color: #000000">00024:</span>     <span style="font-style: italic"><span style="color: #9A1900">// use ?: to convert booleans to other types</span></span>
<span style="color: #000000">00025:</span>     <span style="font-style: italic"><span style="color: #9A1900">// use ?: also for object types</span></span>
<span style="color: #000000">00026:</span>     <span style="color: #009900">boolean</span> p <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00027:</span>     <span style="color: #009900">int</span> j <span style="color: #990000">=</span> p <span style="color: #990000">?</span> <span style="color: #993399">1</span> <span style="color: #990000">:</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00028:</span>     <span style="color: #008080">Object</span> o <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>     <span style="color: #009900">int</span> k <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">==</span>o<span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #993399">0</span> <span style="color: #990000">:</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00030:</span> 
<span style="color: #000000">00031:</span>     <span style="font-style: italic"><span style="color: #9A1900">// char and short are both 16 bit, but mutually incomparable</span></span>
<span style="color: #000000">00032:</span>     <span style="color: #009900">char</span>  c <span style="color: #990000">=</span> <span style="color: #FF0000">'</span><span style="color: #CC33CC">\0</span><span style="color: #FF0000">'</span><span style="color: #990000">;</span>
<span style="color: #000000">00033:</span>     <span style="color: #009900">short</span> z <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00034:</span>           z <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">short</span><span style="color: #990000">)</span> c<span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>           c <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">char</span><span style="color: #990000">)</span> z<span style="color: #990000">;</span>
<span style="color: #000000">00036:</span>     
<span style="color: #000000">00037:</span>     <span style="font-style: italic"><span style="color: #9A1900">// number types from bottom to top</span></span>
<span style="color: #000000">00038:</span>     <span style="color: #009900">byte</span>   b <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> 
<span style="color: #000000">00039:</span>     <span style="color: #009900">short</span>  s <span style="color: #990000">=</span> b<span style="color: #990000">;</span>
<span style="color: #000000">00040:</span>     <span style="color: #009900">int</span>    i <span style="color: #990000">=</span> s<span style="color: #990000">;</span>
<span style="color: #000000">00041:</span>     <span style="color: #009900">long</span>   l <span style="color: #990000">=</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00042:</span>     <span style="color: #009900">float</span>  f <span style="color: #990000">=</span> l<span style="color: #990000">;</span>
<span style="color: #000000">00043:</span>     <span style="color: #009900">double</span> d <span style="color: #990000">=</span> f<span style="color: #990000">;</span>
<span style="color: #000000">00044:</span> 
<span style="color: #000000">00045:</span>     <span style="font-style: italic"><span style="color: #9A1900">// number types from top to bottom, losing precision</span></span>
<span style="color: #000000">00046:</span>     f <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">float</span><span style="color: #990000">)</span> d<span style="color: #990000">;</span>
<span style="color: #000000">00047:</span>     l <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">long</span><span style="color: #990000">)</span> f<span style="color: #990000">;</span>
<span style="color: #000000">00048:</span>     i <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> l<span style="color: #990000">;</span>
<span style="color: #000000">00049:</span>     s <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">short</span><span style="color: #990000">)</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00050:</span>     b <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">byte</span><span style="color: #990000">)</span> s<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00053:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">
          Output is:
        </p>
<pre xmlns="" xml:space="preserve">
f2=1.42
f3=1.0
</pre>        
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide036">Patterns: Introduction</a></span><span style="font-weight: normal"><a href="class-02-036.html"> [36/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">Goals:</p>
        <ul xmlns="">
          <li>
            Search for elements in software design that are
            reusable.
          </li>
          <li>
            Search for ways to document and generalize software design
            expertise.
          </li>
          <li>
            Provide a common vocabulary for software designers to
            communicate effectively.
          </li>
          <li>
            Facilitate learning and dissemination of software design
            expertise.
          </li>
          <li>
            Help novice designer become expert fast.
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide037">Patterns: GoF principles</a></span><span style="font-weight: normal"><a href="class-02-037.html"> [37/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          In the GoF patterns book, we see a few principles repeated
          again and again.  These principles shape the pattern design
          and intent in most of the patterns we will study.  They are:
        </p>
        <ul xmlns="">
          <li>
            <i>Program to an interface, not an implementation</i>
          </li>
          <li>
            <i>Favor object composition (delegation) over class
              inheritance</i>
          </li>
          <li>
            <i>Consider what should be variable in your design:
              encapsulate the concepts that vary</i>
          </li>
        </ul>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">
          The last one is the opposite of focusing on the cause of
          redesign.  Instead of focusing on what might force a change
          to a design, consider what you want to be able to change
          without redesign.  The focus is on encapsulating the concept
          that varies, a theme of many design patterns [GoF p29]
        </p>
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide038">Patterns: Architecture and Software Design</a></span><span style="font-weight: normal"><a href="class-02-038.html"> [38/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">There are similarity between architecture and software design:</p>
        <ul xmlns="">
          <li>
            creative process, large number of possibilities
          </li>
          <li>
            must satisfy customer needs
          </li>
          <li>
            must satisfy engineering constraints
          </li>
          <li>
            seek certain intrinsic, unquantifiable qualities
          </li>
        </ul>
        <p xmlns="">
          Christopher Alexander suggested that all buildings can be
          designed using combinations of a relative small number of
          <em>patterns</em>.
        </p>
        <p xmlns="">
          He starts out trying to understand <i>beauty</i>.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide039">Patterns: The Quality without a Name</a></span><span style="font-weight: normal"><a href="class-02-039.html"> [39/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          You know beauty when you see it, but it is hard to say
          exactly what it is.
        </p>
        <blockquote xmlns="">
          <p>
            <i>
              There is a central quality which is the root criterion of
              life and spirit in a man, a town, a building, a
              wilderness. This quality is objective and precise, but
              cannot be named.
            </i>
          </p>
          <p>
            <i>
              The search which we make for this quality, in our own
              lives, is the central search of any person, and the crux
              of any individual person's story. It is the search for
              those moments and situations when we are most alive.
            </i>
          </p>
        </blockquote>

        <blockquote><table width="100%"><tr><td><table width="100%" class="title"><tr><td><b>Alexander</b></td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://books.google.com/books?isbn=0195024028">The Timeless Way of Building</a> [<a href="http://www.amazon.com/exec/obidos/ASIN/0195024028">Amazon</a>, <a href="http://www.addall.com/New/compare.cgi?dispCurr=USD&amp;location=10000&amp;state=IL&amp;isbn=0195024028">AddAll</a>]</p>
              <p xmlns="" class="flush">
                by Christopher Alexander
                (Oxford, 1979)
              </p>
            </td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://books.google.com/books?isbn=0195019199">A Pattern Language</a> [<a href="http://www.amazon.com/exec/obidos/ASIN/0195019199">Amazon</a>, <a href="http://www.addall.com/New/compare.cgi?dispCurr=USD&amp;location=10000&amp;state=IL&amp;isbn=0195019199">AddAll</a>]</p>
              <p xmlns="" class="flush">
                by Christopher Alexander
                (Oxford, 1977)
              </p>
            </td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://c2.com/cgi/wiki?ChristopherAlexander">wiki:ChristopherAlexander</a></p></td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://patternlanguage.com/">http://patternlanguage.com/</a></p></td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://patternlanguage.com/sampleOnly/archive/ieee/ieeetext.htm">http://patternlanguage.com/sampleOnly/archive/ieee/ieeetext.htm</a></p></td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://stanford-online.stanford.edu/courses/ee380/001129-ee380-100.asx">http://stanford-online.stanford.edu/courses/ee380/001129-ee380-100.asx</a></p></td></tr></table></td></tr><tr><td><table width="100%" class="item"><tr><td><p class="flush"><a href="http://www.math.utsa.edu/sphere/salingar/Chris.text.html">http://www.math.utsa.edu/sphere/salingar/Chris.text.html</a></p></td></tr></table></td></tr></table></blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide040">Patterns: A Pattern Language</a></span><span style="font-weight: normal"><a href="class-02-040.html"> [40/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What words can be used to describe beautiful things?
        </p>
        <ul xmlns="">
          <li>
            elements: the patterns
          </li>
          <li>
            sentence: expression of design using patterns
          </li>
        </ul>
        <p xmlns="">
          Patterns are discovered, not invented.
        </p>
        <blockquote xmlns="">
          <p>
            <i>
              To reach the quality without a name we must then build a
              living pattern language as a gate.
            </i>
          </p>
          <p>
            <i>
              ... the rich and complex order of a town can grow from
              thousands of creative acts. For once we have a common
              pattern language in our town, we shall all have the
              power to make our streets and buildings live, through
              our most ordinary acts. The language, like a seed, is
              the genetic system which gives our millions of small
              acts the power to form a whole.
            </i>
          </p>
          
        </blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide041">Patterns: A Timeless Way of Building</a></span><span style="font-weight: normal"><a href="class-02-041.html"> [41/46] </a></span></td></tr></table><p> </p>
        <ul xmlns="">
          <li>
            Not primitive building blocks,
          </li>
          <li>
            Not complex, domain specific designs
          </li>
        </ul>
        <blockquote xmlns="">
          <p>
            <i>
              Each pattern describes a <em>problem</em> which occurs
              over and over again in our environment, and then describes
              the core of the <em>solution</em> to that problem, in such
              a way that you can use this solution a million times over,
              without ever doing it the same way twice.
            </i>
          </p>
        </blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide042">What if you want class names to be hidden from clients?</a></span><span style="font-weight: normal"><a href="class-02-042.html"> [42/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What if class names are not stable? (I have the shapes
          Circle and Square, but may generalize later to allow
          ellipses and rectangles.)
        </p>
        <p xmlns="">
          Consider using a static factory:
        </p>
        <ul xmlns="">
          <li>
            Make object interfaces public.
          </li>
          <li>
            Make object classes package-private.
          </li>
          <li>
            Provide a public static class (the factory), which produce
            instances of the object interfaces.
          </li>
          <li>
            Other packages use the factory, not the constructors.
          </li>
          <li>
            Factory methods can have parameters to initialize the objects.
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide043">Static Factory Example</a></span><span style="font-weight: normal"><a href="class-02-043.html"> [43/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Notable in the example is the different way invariants are
          handled.
        </p>
        <p xmlns="">
          <tt>Person</tt> checks invariants in the constructor
          (throwing exceptions from the factory method if necessary).
        </p>
        <p xmlns="">
          <tt>SSN</tt> checks invariants in the factory method.
          Exactly one instance may violate the invariants:
          <tt>SSN.INVALID</tt> may be used for persons with no SSN.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/person/SSN_java.html">file:factory/person/SSN.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/person/SSN.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/factory/person/SSN.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/factory/person/SSN.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">SSN</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Comparable<span style="color: #990000">&lt;</span>SSN<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">toLong</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">SSN</span> INVALID <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SSNObj</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"000000000"</span><span style="color: #990000">);</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/person/Person_java.html">file:factory/person/Person.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/person/Person.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/factory/person/Person.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/factory/person/Person.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Person</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Comparable<span style="color: #990000">&lt;</span>Person<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">name</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">SSN</span> <span style="font-weight: bold"><span style="color: #000000">ssn</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/person/PersonFactory_java.html">file:factory/person/PersonFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/person/PersonFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/factory/person/PersonFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/factory/person/PersonFactory.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Random<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PersonFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">PersonFactory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Random _random <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Random</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">SSN</span> <span style="font-weight: bold"><span style="color: #000000">newSSN</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> s<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> REQUIREDLENGTH <span style="color: #990000">=</span> <span style="color: #993399">9</span><span style="color: #990000">;</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span> <span style="color: #990000">==</span> s <span style="color: #990000">||</span> REQUIREDLENGTH <span style="color: #990000">!=</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">length</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00009:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     <span style="color: #009900">boolean</span> someNonZeroDigit <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00011:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>REQUIREDLENGTH<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>       <span style="color: #009900">char</span> c <span style="color: #990000">=</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">charAt</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span>
<span style="color: #000000">00013:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>Character<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isDigit</span></span><span style="color: #990000">(</span>c<span style="color: #990000">))</span>
<span style="color: #000000">00014:</span>         <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00015:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #993399">0</span> <span style="color: #990000">!=</span> Character<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">digit</span></span><span style="color: #990000">(</span>c<span style="color: #990000">,</span><span style="color: #993399">10</span><span style="color: #990000">))</span>
<span style="color: #000000">00016:</span>         someNonZeroDigit <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>someNonZeroDigit<span style="color: #990000">)</span>
<span style="color: #000000">00019:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00020:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SSNObj</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Person</span> <span style="font-weight: bold"><span style="color: #000000">newRandomPerson</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PersonObj</span></span><span style="color: #990000">(</span>Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">(</span>_random<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextInt</span></span><span style="color: #990000">()),</span>SSN<span style="color: #990000">.</span>INVALID<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Person</span> <span style="font-weight: bold"><span style="color: #000000">newPerson</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">,</span> <span style="color: #008080">String</span> ssn<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00026:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PersonObj</span></span><span style="color: #990000">(</span>name<span style="color: #990000">,</span>ssn<span style="color: #990000">);</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Person</span> <span style="font-weight: bold"><span style="color: #000000">newPerson</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">,</span> <span style="color: #008080">SSN</span> ssn<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PersonObj</span></span><span style="color: #990000">(</span>name<span style="color: #990000">,</span>ssn<span style="color: #990000">);</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> 
<span style="color: #000000">00033:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SSNObj</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> SSN <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> String _s<span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>   <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">long</span> _l<span style="color: #990000">;</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #000000">SSNObj</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> s<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>     _s <span style="color: #990000">=</span> s<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>     _l <span style="color: #990000">=</span> Long<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">parseLong</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _s<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">toLong</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _l<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span>   <span style="font-style: italic"><span style="color: #9A1900">// TODO: define equals, hashcode, compareTo</span></span>
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span><span style="color: #008080">SSN</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00044:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span> 
<span style="color: #000000">00046:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PersonObj</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Person <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>   <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> String _name<span style="color: #990000">;</span>
<span style="color: #000000">00048:</span>   <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> SSN _ssn<span style="color: #990000">;</span>
<span style="color: #000000">00049:</span>   <span style="font-weight: bold"><span style="color: #000000">PersonObj</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">,</span> <span style="color: #008080">SSN</span> ssn<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00050:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span> <span style="color: #990000">==</span> name <span style="color: #990000">||</span> <span style="color: #993399">0</span> <span style="color: #990000">==</span> name<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">trim</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">length</span></span><span style="color: #990000">())</span> 
<span style="color: #000000">00051:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00052:</span>     _name <span style="color: #990000">=</span> name<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">trim</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00053:</span>     _ssn <span style="color: #990000">=</span> ssn<span style="color: #990000">;</span>
<span style="color: #000000">00054:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span>   <span style="font-weight: bold"><span style="color: #000000">PersonObj</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">,</span> <span style="color: #008080">String</span> ssn<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00056:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">(</span>name<span style="color: #990000">,</span>PersonFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newSSN</span></span><span style="color: #990000">(</span>ssn<span style="color: #990000">));</span>
<span style="color: #000000">00057:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00058:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">name</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00059:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">SSN</span> <span style="font-weight: bold"><span style="color: #000000">ssn</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _ssn<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00060:</span>   <span style="font-style: italic"><span style="color: #9A1900">// TODO: define equals, hashcode, compareTo</span></span>
<span style="color: #000000">00061:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span><span style="color: #008080">Person</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00062:</span> <span style="color: #FF0000">}</span>    
<span style="color: #000000">00063:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/person/main/Main_java.html">file:factory/person/main/Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/person/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-public/factory/person/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-private/factory/person/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">.</span>Person<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">.</span>SSN<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>person<span style="color: #990000">.</span>PersonFactory<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     <span style="color: #008080">Person</span> p <span style="color: #990000">=</span> PersonFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newPerson</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Bob Jones"</span><span style="color: #990000">,</span><span style="color: #FF0000">"123456789"</span><span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>p<span style="color: #990000">);</span>
<span style="color: #000000">00010:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide044">Function Objects: Strategy</a></span><span style="font-weight: normal"><a href="class-02-044.html"> [44/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          We know how to do part of an algorithm, but not all.
        </p>
        <p xmlns="">
          Example: filter values in a list based on a predicate.
        </p>
        <p xmlns="">
          Example: sort values in a list based on a comparison operator.
        </p>
        <p xmlns="">
          Example: apply a function to every value in a list, creating
          a new list.
        </p>
        <p xmlns="">
          Let's look at a non-software example: <a xmlns="http://www.w3.org/1999/xhtml" href="..//links-main.html#non-software-patterns">file:links-main</a>
        </p>
        <p xmlns="">
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/Arrays.html#sort(T[],%20java.util.Comparator)">java.util.Arrays#sort(T[],%20java.util.Comparator)</a>
        <br xmlns="http://www.w3.org/1999/xhtml"/>
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator)">java.util.Collections#sort(java.util.List,%20java.util.Comparator)</a>
        <br xmlns="http://www.w3.org/1999/xhtml"/>
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/Comparator.html">java.util.Comparator</a>
        </p>
                  
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide045">Function Objects: Command</a></span><span style="font-weight: normal"><a href="class-02-045.html"> [45/46] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          We want allow clients to execute arbitrary code.
        </p>
        <p xmlns="">
          Like strategy, but we don't care what the function does.
        </p>
        <p xmlns="">
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html">java.lang.Runnable</a>
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide046">Function Objects: Homework 2</a></span><span style="font-weight: normal"><a href="class-02-046.html"> [46/46] </a></span></td></tr></table><p> </p>
        See
        <a href="../lectures/hw-02.html">here</a>.
      <hr/><p class="flush">
      Revised: 2008/09/17 18:24</p></body></html>
