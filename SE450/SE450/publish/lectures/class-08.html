<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450:  Lecture 8 
      [2008/10/28]
    </title></head><body><h1><a href="../index.html">SE450</a>:  Lecture 8 
      (Object Creation)
    </h1><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="class-08-000.html"> [0/34] </a></span></td></tr></table><p> </p><table width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Constructors: Object Construction</a> [1/34] </td></tr><tr><td><a href="#slide002">Constructors: this constructors</a> [2/34] </td></tr><tr><td><a href="#slide003">Constructors: super constructors</a> [3/34] </td></tr><tr><td><a href="#slide004">Constructors: Private constructors</a> [4/34] </td></tr><tr><td><a href="#slide005">Clone: Public classes</a> [5/34] </td></tr><tr><td><a href="#slide006">Clone: Private classes</a> [6/34] </td></tr><tr><td><a href="#slide007">Clone: Deep versus Shallow</a> [7/34] </td></tr><tr><td><a href="#slide008">Clone: clone()</a> [8/34] </td></tr><tr><td><a href="#slide009">Clone: Full examples</a> [9/34] </td></tr><tr><td><a href="#slide010">Clone: Clone is magic</a> [10/34] </td></tr><tr><td><a href="#slide011">Clone: Prototype Pattern</a> [11/34] </td></tr><tr><td><a href="#slide012">Serialization: Basics</a> [12/34] </td></tr><tr><td><a href="#slide013">Serialization: Dealing with references</a> [13/34] </td></tr><tr><td><a href="#slide014">Serialization: Transient Fields</a> [14/34] </td></tr><tr><td><a href="#slide015">Serialization: Customization</a> [15/34] </td></tr><tr><td><a href="#slide016">Serialization: Forbidding Serialization</a> [16/34] </td></tr><tr><td><a href="#slide017">Singleton: Static class</a> [17/34] </td></tr><tr><td><a href="#slide018">Singleton: (Polymorphic) Singleton</a> [18/34] </td></tr><tr><td><a href="#slide019">Singleton: Lazy Instantiation</a> [19/34] </td></tr><tr><td><a href="#slide020">Singleton: Often the singleton is public</a> [20/34] </td></tr><tr><td><a href="#slide021">Singleton: Often the singleton is public</a> [21/34] </td></tr><tr><td><a href="#slide022">Singleton: Often the singleton is public</a> [22/34] </td></tr><tr><td><a href="#slide023">Singleton: Often the singleton is public</a> [23/34] </td></tr><tr><td><a href="#slide024">Singleton: Be careful not to use a singleton it is created</a> [24/34] </td></tr><tr><td><a href="#slide025">Singleton: Cloning and serialization</a> [25/34] </td></tr><tr><td><a href="#slide026">Enumerations: Type-safe Enumeration</a> [26/34] </td></tr><tr><td><a href="#slide027">Enumerations: Enumeration with polymorphic methods</a> [27/34] </td></tr><tr><td><a href="#slide028">Factory: Shapes</a> [28/34] </td></tr><tr><td><a href="#slide029">Factory: Static Factory Method</a> [29/34] </td></tr><tr><td><a href="#slide030">Factory: Benefit</a> [30/34] </td></tr><tr><td><a href="#slide031">Factory: Static Factory Class</a> [31/34] </td></tr><tr><td><a href="#slide032">Factory: Polymorphic Factory Method</a> [32/34] </td></tr><tr><td><a href="#slide033">Factory: Polymorphic Factory Class</a> [33/34] </td></tr><tr><td><a href="#slide034">Flyweighting a factory: Keeping object references unique</a> [34/34] </td></tr></table><br/><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Constructors: Object Construction</a></span><span style="font-weight: normal"><a href="class-08-001.html"> [1/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/subclass/constructor/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/subclass/constructor/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsubclass/constructor/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesubclass/constructor/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> subclass<span style="color: #990000">.</span>constructor<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">X</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">X</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">O</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>     System<span style="color: #990000">.</span>err<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"&lt;O Initializer&gt;"</span><span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #000000">O</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>     System<span style="color: #990000">.</span>err<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"&lt;O Constructor&gt;"</span><span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">X</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> O <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     System<span style="color: #990000">.</span>err<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"&lt;X Initializer&gt;"</span><span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #000000">X</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>     System<span style="color: #990000">.</span>err<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"&lt;X Constructor&gt;"</span><span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>   
<span style="color: #000000">00025:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <a href="http://www-106.ibm.com/developerworks/java/library/j-jtp0618.html">Don't let the "this" reference escape during construction</a>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Constructors: this constructors</a></span><span style="font-weight: normal"><a href="class-08-002.html"> [2/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/subclass/ex8/M_java.html"><tt xmlns="">this</tt> constructors</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/subclass/ex8/M.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsubclass/ex8/M.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesubclass/ex8/M.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> subclass<span style="color: #990000">.</span>ex8<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">M</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">C</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">()</span>      <span style="color: #FF0000">{</span>System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"A()"</span><span style="color: #990000">);</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"B()"</span><span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"B(int)"</span><span style="color: #990000">);</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">C</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> B <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #000000">C</span></span><span style="color: #990000">()</span>      <span style="color: #FF0000">{</span>System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"C()"</span><span style="color: #990000">);</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Constructors: super constructors</a></span><span style="font-weight: normal"><a href="class-08-003.html"> [3/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/subclass/ex7/M_java.html"><tt xmlns="">super</tt> constructors</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/subclass/ex7/M.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsubclass/ex7/M.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesubclass/ex7/M.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> subclass<span style="color: #990000">.</span>ex7<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">M</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">C</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"A(int)"</span><span style="color: #990000">);</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"B(int)"</span><span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">C</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> B <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>   <span style="font-style: italic"><span style="color: #9A1900">// The following will not compile!</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">//  C() {System.out.println("C");}</span></span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #000000">C</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"C"</span><span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Constructors: Private constructors</a></span><span style="font-weight: normal"><a href="class-08-004.html"> [4/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          What good are private constructors?
        </p>
        <p xmlns="">
          What good are protected/package-private constructors?
        </p>
        <p xmlns="">
          If constructors are protected, can you be sure no one
          outside the package can build objects of your class?
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Clone: Public classes</a></span><span style="font-weight: normal"><a href="class-08-005.html"> [5/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/factory/A_java.html">file:A.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/factory/A.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/factory/A.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/factory/A.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>factory<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">protected</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00004:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00005:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/factory/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/factory/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/factory/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/factory/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>factory<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> clone<span style="color: #990000">.</span>factory<span style="color: #990000">.</span>A<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #008080">implements</span> Cloneable <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>     <span style="color: #008080">B</span> x <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00011:</span>     <span style="color: #008080">A</span> y <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00012:</span>     <span style="color: #008080">B</span> z <span style="color: #990000">=</span> <span style="color: #990000">(</span>B<span style="color: #990000">)</span> x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00013:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Clone: Private classes</a></span><span style="font-weight: normal"><a href="class-08-006.html"> [6/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/factory/I_java.html">file:I.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/factory/I.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/factory/I.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/factory/I.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>factory<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">I</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00003:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/factory/IFactory_java.html">file:IFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/factory/IFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/factory/IFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/factory/IFactory.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>factory<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">IFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">IFactory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">I</span> <span style="font-weight: bold"><span style="color: #000000">newI</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> 
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> I <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">Clone: Deep versus Shallow</a></span><span style="font-weight: normal"><a href="class-08-007.html"> [7/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/deepVshallow/A_java.html">file:A.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/deepVshallow/A.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/deepVshallow/A.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/deepVshallow/A.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>deepVshallow<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Cloneable <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _i<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> A _a<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #008080">A</span> a<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _i <span style="color: #990000">=</span> i<span style="color: #990000">;</span> _a <span style="color: #990000">=</span> a<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">)</span>      <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">(</span>i<span style="color: #990000">,</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> 
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">shallow_copy</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span>_i<span style="color: #990000">,</span> _a<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> 
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">shallow_clone</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">shallow_equals</span></span><span style="color: #990000">(</span><span style="color: #008080">Object</span> o<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">())))</span>
<span style="color: #000000">00019:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>     <span style="color: #008080">A</span> that <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> o<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>_i <span style="color: #990000">==</span> that<span style="color: #990000">.</span>_i<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span>_a <span style="color: #990000">==</span> that<span style="color: #990000">.</span>_a<span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span> 
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">deep_copy</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span>_i<span style="color: #990000">,</span> <span style="color: #990000">(</span>_a<span style="color: #990000">==</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span> <span style="color: #990000">:</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_copy</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00026:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">deep_clone</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>     <span style="color: #008080">A</span> result <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00030:</span>     result<span style="color: #990000">.</span>_a <span style="color: #990000">=</span> <span style="color: #990000">(</span>_a<span style="color: #990000">==</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span> <span style="color: #990000">:</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00031:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> result<span style="color: #990000">;</span>
<span style="color: #000000">00032:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span> 
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">deep_equals</span></span><span style="color: #990000">(</span><span style="color: #008080">Object</span> o<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">())))</span>
<span style="color: #000000">00036:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>     <span style="color: #008080">A</span> that <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> o<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>_i <span style="color: #990000">==</span> that<span style="color: #990000">.</span>_i<span style="color: #990000">)</span>
<span style="color: #000000">00039:</span>       <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">((</span>_a<span style="color: #990000">==</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #990000">(</span>that<span style="color: #990000">.</span>_a<span style="color: #990000">==</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #990000">:</span> _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_equals</span></span><span style="color: #990000">(</span>that<span style="color: #990000">.</span>_a<span style="color: #990000">));</span>
<span style="color: #000000">00040:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/deepVshallow/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/deepVshallow/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/deepVshallow/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/deepVshallow/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>deepVshallow<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     <span style="color: #008080">A</span> w <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">));</span>
<span style="color: #000000">00005:</span>     <span style="color: #008080">A</span> v <span style="color: #990000">=</span> w<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>     <span style="color: #008080">A</span> x <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shallow_copy</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>     <span style="color: #008080">A</span> y <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_copy</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>     <span style="color: #008080">A</span> z <span style="color: #990000">=</span> <span style="color: #990000">(</span>A<span style="color: #990000">)</span> w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shallow_clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span> 
<span style="color: #000000">00010:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w==v: "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w <span style="color: #990000">==</span> v<span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00011:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w==x: "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w <span style="color: #990000">==</span> x<span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00012:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w==y: "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w <span style="color: #990000">==</span> y<span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00013:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w==z: "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w <span style="color: #990000">==</span> z<span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00014:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.equals(v): "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>v<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00015:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.equals(x): "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>x<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00016:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.equals(y): "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00017:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.equals(z): "</span> <span style="color: #990000">+</span> <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>z<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00018:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.shallow_equals(v): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00019:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shallow_equals</span></span><span style="color: #990000">(</span>v<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00020:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.shallow_equals(x): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00021:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shallow_equals</span></span><span style="color: #990000">(</span>x<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00022:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.shallow_equals(y): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00023:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shallow_equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00024:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.shallow_equals(z): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00025:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shallow_equals</span></span><span style="color: #990000">(</span>z<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00026:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.deep_equals(v): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00027:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_equals</span></span><span style="color: #990000">(</span>v<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00028:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.deep_equals(x): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00029:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_equals</span></span><span style="color: #990000">(</span>x<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00030:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.deep_equals(y): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00031:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00032:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"w.deep_equals(z): "</span> <span style="color: #990000">+</span>
<span style="color: #000000">00033:</span>       <span style="color: #990000">((</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">deep_equals</span></span><span style="color: #990000">(</span>z<span style="color: #990000">))</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">));</span>
<span style="color: #000000">00034:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Clone: clone()</a></span><span style="font-weight: normal"><a href="class-08-008.html"> [8/34] </a></span></td></tr></table><p> </p>
	<p xmlns="">
	  The intent is that</p>

<pre xmlns="" xml:space="preserve"><tt>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #990000">!=</span> x

x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClass</span></span><span style="color: #990000">()</span>

x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)</span>
</tt></pre>

        <p xmlns="">
          The last intent is not a requirement, but is generally true.
	</p>
	<p xmlns="">
	  By convention, you obtain the returned object by calling
	  <code>super.clone()</code>.  If all superclasses do this,
	  then <code>x.clone().getClass() == x.getClass()</code> will
	  be true. 
	</p>
        <p xmlns="">
          <code>Object</code> doesn't implement <code>Cloneable</code>
          itself.  (<code>Object.clone</code> is protected.)
        </p>
        <p xmlns="">
          The <code>Cloneable</code> interface is meant to be a
          <i>mixin interface</i>, however it doesn't do a very good
          job of this.
        </p>
	<p xmlns="">
	  Parts of Java that support cloning:
        </p>
        <ul xmlns="">
          <li>
            the empty <code>Cloneable</code> interface
            (note the misspelling)
          </li>
          <li>	    
            The <code>Object.clone</code> method (or your superclass's 
            clone method)
          </li>
          <li>	    
            <code>CloneNotSupportedException</code>, to signal the
            clone method shouldn't have been called.
          </li>
        </ul>
	<p xmlns="">
	  You can:
        </p>
        <ul xmlns="">
          <li>
            Support clone (implement <code>Cloneable</code> and declare
            <code>clone()</code> to throw no exceptions).
          </li>
          <li>
            Conditionally support clone (implement
            <code>Clonable</code>, but may throw
            <code>CloneNotSupportedException</code>).  This is the
            case for a container class whose contents may or may not
            be clonable.
          </li>
          <li>
            Allow subclasses to support clone (do not implement
            <code>Clonable</code>; do nothing, or override
            <code>clone</code> to do the right thing for your class)
          </li>
          <li>
            Forbid clone (do not implement <code>Clonable</code>;
            override <code>clone</code> to always throw
            <code>CloneNotSupportedException</code>)
          </li>
        </ul>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Clone: Full examples</a></span><span style="font-weight: normal"><a href="class-08-009.html"> [9/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          To disallow cloning, make you class <code>final</code> and
          do not override <code>clone()</code>.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{</span> <span style="color: #990000">...</span> <span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          If your class is non-final and public, you either need to
          expect that a subclass will implement clone, or disallow
          cloning:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="color: #FF0000">{</span>
  <span style="color: #990000">...</span>
  <span style="font-weight: bold"><span style="color: #0000FF">protected</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CloneNotSupportedException</span></span><span style="color: #990000">();</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          To implement cloning:
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/stack/IntegerStack_java.html">file:IntegerStack.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/stack/IntegerStack.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/stack/IntegerStack.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/stack/IntegerStack.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>stack<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">IntegerStack</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Cloneable <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span><span style="color: #990000">[]</span> _buffer<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _top<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">IntegerStack</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> maxContents<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>     _buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="color: #009900">int</span><span style="color: #990000">[</span>maxContents<span style="color: #990000">];</span>
<span style="color: #000000">00008:</span>     _top <span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> val<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>     _buffer<span style="color: #990000">[++</span>_top<span style="color: #990000">]</span> <span style="color: #990000">=</span> val<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">pop</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _buffer<span style="color: #990000">[</span>_top<span style="color: #990000">--];</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>     <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>       <span style="color: #008080">IntegerStack</span> result <span style="color: #990000">=</span> <span style="color: #990000">(</span>IntegerStack<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00019:</span>       result<span style="color: #990000">.</span>_buffer <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">[])</span> _buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00020:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> result<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span><span style="color: #008080">CloneNotSupportedException</span> e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>       <span style="font-style: italic"><span style="color: #9A1900">// cannot happen</span></span>
<span style="color: #000000">00023:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">RuntimeException</span></span><span style="color: #990000">(</span>e<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="color: #FF0000">}</span> 
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Clone: Clone is magic</a></span><span style="font-weight: normal"><a href="class-08-010.html"> [10/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          An alternative is to use a copy method or copy constructor,
          but these do have the same behavior with respect to
          subclassing.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/magic/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/magic/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicclone/magic/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateclone/magic/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> clone<span style="color: #990000">.</span>magic<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     <span style="color: #008080">B</span> x <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">(</span><span style="color: #993399">42</span><span style="color: #990000">,</span><span style="color: #993399">27</span><span style="color: #990000">);</span>
<span style="color: #000000">00005:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span>x<span style="color: #990000">));</span>
<span style="color: #000000">00007:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">copy</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00008:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">A</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Cloneable <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>   <span style="color: #009900">int</span> _i<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _i <span style="color: #990000">=</span> i<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span>   
<span style="color: #000000">00016:</span>   <span style="font-style: italic"><span style="color: #9A1900">// A copy constructor</span></span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span><span style="color: #008080">A</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _i <span style="color: #990000">=</span> that<span style="color: #990000">.</span>_i<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   
<span style="color: #000000">00019:</span>   <span style="font-style: italic"><span style="color: #9A1900">// A copy method</span></span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">copy</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">A</span></span><span style="color: #990000">(</span>_i<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> 
<span style="color: #000000">00022:</span>   <span style="font-style: italic"><span style="color: #9A1900">// The clone method</span></span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> CloneNotSupportedException <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00025:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"A("</span><span style="color: #990000">+</span>_i<span style="color: #990000">+</span><span style="color: #FF0000">")"</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> 
<span style="color: #000000">00029:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> A <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>   <span style="color: #009900">int</span> _j<span style="color: #990000">;</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">B</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span> _j <span style="color: #990000">=</span> j<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"B("</span><span style="color: #990000">+</span>_i<span style="color: #990000">+</span><span style="color: #FF0000">","</span><span style="color: #990000">+</span>_j<span style="color: #990000">+</span><span style="color: #FF0000">")"</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p xmlns="">
          Output is:
        </p>
<pre xmlns="" xml:space="preserve">
B(42,27)
A(42)
A(42)
B(42,27)
</pre>        
      </td></tr></table><p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">Clone: Prototype Pattern</a></span><span style="font-weight: normal"><a href="class-08-011.html"> [11/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          For mutable objects, one might consider implementing a
          factory by cloning prototype objects, rather than calling a
          constructor each time.
        </p>
        <p xmlns="">
          Here is a static factory using constructors:
          <a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/person">dir:factory/person</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/person">source</a>]
        </p>
        <p xmlns="">
          Here it is refactored to use prototypes:
          <a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/clone/prototype">dir:clone/prototype</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/clone/prototype">source</a>]
        </p>
        <p xmlns="">
          In most cases, the constructor version is preferable in Java.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Serialization: Basics</a></span><span style="font-weight: normal"><a href="class-08-012.html"> [12/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          An object which implements the <code>Serializable</code>
          interface can be written and read from an
          <code>OutputStream</code> and <code>InputStream</code>.
        </p>
        <p xmlns="">
          These stream objects must be wrapped inside either an
          <code>ObjectOutputStream</code> or
          <code>ObjectInputStream</code>.
        </p>
        <p xmlns="">
          These classes contain methods
          <code>writeObject(Object):void</code> and
          <code>readObject():Object</code>.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/serialization/Main1_java.html">file:Main1.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/serialization/Main1.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicserialization/Main1.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateserialization/Main1.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> serialization<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main1</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> args<span style="color: #990000">[])</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>       ObjectOutputStream os
<span style="color: #000000">00008:</span>         <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ObjectOutputStream</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileOutputStream</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out.dat"</span><span style="color: #990000">));</span>
<span style="color: #000000">00009:</span>       os<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeObject</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Entry</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Save Me"</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">));</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span>       ObjectInputStream is
<span style="color: #000000">00012:</span>         <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ObjectInputStream</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileInputStream</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out.dat"</span><span style="color: #990000">));</span>
<span style="color: #000000">00013:</span>       <span style="color: #008080">Object</span> o <span style="color: #990000">=</span> is<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readObject</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00014:</span>       
<span style="color: #000000">00015:</span>       <span style="color: #008080">Entry</span> e <span style="color: #990000">=</span> <span style="color: #990000">(</span>Entry<span style="color: #990000">)</span> o<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Entry restored from file is: "</span> <span style="color: #990000">+</span> e<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00017:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span><span style="color: #008080">Exception</span> e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> e<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">printStackTrace</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Entry</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Serializable <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> serialVersionUID <span style="color: #990000">=</span> <span style="color: #993399">2008L</span><span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> message <span style="color: #990000">=</span>  <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> messageNumber <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00025:</span>   
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Entry</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> message<span style="color: #990000">,</span> <span style="color: #009900">int</span> messageNumber<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>message <span style="color: #990000">=</span> message<span style="color: #990000">;</span>
<span style="color: #000000">00028:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>messageNumber <span style="color: #990000">=</span> messageNumber<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getMessage</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> message<span style="color: #990000">;</span>
<span style="color: #000000">00032:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getMessageNumber</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> messageNumber<span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> message <span style="color: #990000">+</span>  <span style="color: #FF0000">" "</span> <span style="color: #990000">+</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">(</span>messageNumber<span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Serialization: Dealing with references</a></span><span style="font-weight: normal"><a href="class-08-013.html"> [13/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Objects will usually contain references to other objects.
        </p>
        <p xmlns="">
          Serialization writes out all referenced objects (and any
          objects they reference).
        </p>
        <p xmlns="">
          Effectively, it writes out the whole graphs of objects.
        </p>
        <p xmlns="">
          All referenced classes must be serializable for this to
          work.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/serialization/Main2_java.html">file:Main2.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/serialization/Main2.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicserialization/Main2.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateserialization/Main2.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> serialization<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main2</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> args<span style="color: #990000">[])</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>       <span style="color: #008080">Person</span> person <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Person</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Matt"</span><span style="color: #990000">,</span> <span style="color: #993399">30</span><span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>       <span style="color: #008080">PersonEntry</span> entry <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PersonEntry</span></span><span style="color: #990000">(</span>person<span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>       ObjectOutputStream os
<span style="color: #000000">00010:</span>         <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ObjectOutputStream</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileOutputStream</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out.dat"</span><span style="color: #990000">));</span>
<span style="color: #000000">00011:</span>       os<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeObject</span></span><span style="color: #990000">(</span>entry<span style="color: #990000">);</span>
<span style="color: #000000">00012:</span>       ObjectInputStream is
<span style="color: #000000">00013:</span>         <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ObjectInputStream</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileInputStream</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out.dat"</span><span style="color: #990000">));</span>
<span style="color: #000000">00014:</span>       <span style="color: #008080">Object</span> o <span style="color: #990000">=</span> is<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readObject</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00015:</span>       <span style="color: #008080">PersonEntry</span> entry2 <span style="color: #990000">=</span> <span style="color: #990000">(</span>PersonEntry<span style="color: #990000">)</span> o<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Entry restored from file is"</span> <span style="color: #990000">+</span> entry2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00017:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span><span style="color: #008080">Exception</span> e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> e<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">printStackTrace</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">PersonEntry</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Serializable <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> serialVersionUID <span style="color: #990000">=</span> <span style="color: #993399">2008L</span><span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Person</span> person <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> personNumber <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00025:</span>   
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">PersonEntry</span></span><span style="color: #990000">(</span><span style="color: #008080">Person</span> person<span style="color: #990000">,</span> <span style="color: #009900">int</span> personNumber<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>person <span style="color: #990000">=</span> person<span style="color: #990000">;</span>
<span style="color: #000000">00028:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>personNumber <span style="color: #990000">=</span> personNumber<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Person</span> <span style="font-weight: bold"><span style="color: #000000">getPerson</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> person<span style="color: #990000">;</span>
<span style="color: #000000">00032:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getPersonNumber</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> personNumber<span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> person<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span>  <span style="color: #FF0000">" Number "</span> <span style="color: #990000">+</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">(</span>personNumber<span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> 
<span style="color: #000000">00041:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Person</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Serializable <span style="color: #FF0000">{</span>
<span style="color: #000000">00042:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> name <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> age <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00044:</span>   
<span style="color: #000000">00045:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Person</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">,</span> <span style="color: #009900">int</span> age<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00046:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>name <span style="color: #990000">=</span> name<span style="color: #990000">;</span>
<span style="color: #000000">00047:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>age <span style="color: #990000">=</span> age<span style="color: #990000">;</span>
<span style="color: #000000">00048:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00049:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00050:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> name<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getAge</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00053:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> age<span style="color: #990000">;</span>
<span style="color: #000000">00054:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00056:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"Name: "</span> <span style="color: #990000">+</span> name <span style="color: #990000">+</span> <span style="color: #FF0000">" Age: "</span> <span style="color: #990000">+</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">(</span>age<span style="color: #990000">);</span>
<span style="color: #000000">00057:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00058:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00059:</span> 
<span style="color: #000000">00060:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Serialization: Transient Fields</a></span><span style="font-weight: normal"><a href="class-08-014.html"> [14/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          If fields reference a non-serializable object, declare those
          fields <code>transient</code>.
        </p>
        <p xmlns="">
          Transient fields are not written when the object is
          serialized (written).
        </p>
        <p xmlns="">
          Transient fields are set to <code>null</code> when the
          object is deserialized (read).
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">Serialization: Customization</a></span><span style="font-weight: normal"><a href="class-08-015.html"> [15/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Control over which refered objects are stored and how they
          are reconstructed.
        </p>
        <p xmlns="">
          Implement the <code>Externalizable</code> interface. This
          interface allows you to provide the methods
          <code>writeExternal(ObjectOutput):void</code> and
          <code>readExternal(ObjectOutput)</code>.
        </p>
        <p xmlns="">
          You must provide a no-argument constructor as this is called
          when <code>readExternal()</code> is used to reconstruct
          objects.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/serialization/Person2_java.html">file:Person2.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/serialization/Person2.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicserialization/Person2.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateserialization/Person2.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> serialization<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.*;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Person2</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Externalizable <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> serialVersionUID <span style="color: #990000">=</span> <span style="color: #993399">2008L</span><span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">String</span> name <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> age <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Person2</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Person2</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">,</span> <span style="color: #009900">int</span> age<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>name <span style="color: #990000">=</span> name<span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>age <span style="color: #990000">=</span> age<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getName</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getAge</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> age<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"Name: "</span> <span style="color: #990000">+</span> name <span style="color: #990000">+</span> <span style="color: #FF0000">" Age: "</span> <span style="color: #990000">+</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">(</span>age<span style="color: #990000">);</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">writeExternal</span></span><span style="color: #990000">(</span><span style="color: #008080">ObjectOutput</span> out<span style="color: #990000">)</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>     out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeObject</span></span><span style="color: #990000">(</span>name<span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>     out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeInt</span></span><span style="color: #990000">(</span>age<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">readExternal</span></span><span style="color: #990000">(</span><span style="color: #008080">ObjectInput</span> in<span style="color: #990000">)</span>
<span style="color: #000000">00020:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException<span style="color: #990000">,</span> ClassNotFoundException
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     name <span style="color: #990000">=</span> <span style="color: #990000">(</span>String<span style="color: #990000">)</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readObject</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>     age <span style="color: #990000">=</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readInt</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">Serialization: Forbidding Serialization</a></span><span style="font-weight: normal"><a href="class-08-016.html"> [16/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Mark your class as <code>final</code> and do not implement
          <code>Serializable</code>.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">Singleton: Static class</a></span><span style="font-weight: normal"><a href="class-08-017.html"> [17/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/staticClass/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/staticClass/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/staticClass/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/staticClass/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>staticClass<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>   
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">S</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> i<span style="color: #990000">++;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/staticClass/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/staticClass/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/staticClass/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/staticClass/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>staticClass<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>staticClass<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">Singleton: (Polymorphic) Singleton</a></span><span style="font-weight: normal"><a href="class-08-018.html"> [18/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/state/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/state/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/state/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/state/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>state<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">S</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> SState _state<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"linux"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"os.name"</span><span style="color: #990000">)))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>       _state <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SLinux</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>       _state <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SOther</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _state<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> 
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">SState</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> SState <span style="color: #FF0000">{</span> 
<span style="color: #000000">00018:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">++</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> SState <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">--</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/state/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/state/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/state/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/state/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>state<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>state<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Singleton: Lazy Instantiation</a></span><span style="font-weight: normal"><a href="class-08-019.html"> [19/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/lazy/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/lazy/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/lazy/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/lazy/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>lazy<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">S</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> SState _state<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_state <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"linux"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"os.name"</span><span style="color: #990000">)))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>         _state <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SLinux</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>         _state <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SOther</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00011:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _state<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00014:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">SState</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> SState <span style="color: #FF0000">{</span> 
<span style="color: #000000">00020:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">++</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> SState <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00025:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">--</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/lazy/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/lazy/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/lazy/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/lazy/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>lazy<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>lazy<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          In dynamically initialized languages, lazy instantiation is
          usually silly.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">Singleton: Often the singleton is public</a></span><span style="font-weight: normal"><a href="class-08-020.html"> [20/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">S</span> instance <span style="color: #990000">=</span> 
<span style="color: #000000">00004:</span>     <span style="color: #990000">(</span><span style="color: #FF0000">"linux"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"os.name"</span><span style="color: #990000">)))</span> <span style="color: #990000">?</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SLinux</span></span><span style="color: #990000">()</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SOther</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> S <span style="color: #FF0000">{</span> 
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">++</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> S <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">--</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>pub<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="color: #008080">S</span> s <span style="color: #990000">=</span> S<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          If you make the singleton field public, then it should be
          final.
        </p>
        <p xmlns="">
          If a field is final, then it must be assigned in the
          initializer.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">Singleton: Often the singleton is public</a></span><span style="font-weight: normal"><a href="class-08-021.html"> [21/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub2/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub2/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub2/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub2/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">S</span> instance <span style="color: #990000">=</span> SFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newS</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">S</span> <span style="font-weight: bold"><span style="color: #000000">newS</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"linux"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"os.name"</span><span style="color: #990000">)))</span>
<span style="color: #000000">00009:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SLinux</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00011:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SOther</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> S <span style="color: #FF0000">{</span> 
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">++</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> S <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">--</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub2/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub2/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub2/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub2/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub2<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>pub2<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="color: #008080">S</span> s <span style="color: #990000">=</span> S<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Sometimes you can't do everything in an initializer
          expression.  In this case, you may need a static method.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">Singleton: Often the singleton is public</a></span><span style="font-weight: normal"><a href="class-08-022.html"> [22/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub3/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub3/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub3/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub3/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub3<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">S</span> <span style="font-weight: bold"><span style="color: #000000">newS</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"linux"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"os.name"</span><span style="color: #990000">)))</span>
<span style="color: #000000">00005:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SLinux</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00007:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SOther</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">S</span> instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">newS</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> S <span style="color: #FF0000">{</span> 
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">++</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> S <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">--</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub3/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub3/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub3/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub3/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub3<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>pub3<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="color: #008080">S</span> s <span style="color: #990000">=</span> S<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          It's a bit more natural using an abstract class.
        </p>
        <p xmlns="">
          (I dislike java's restrictions on static members in
          interfaces.)
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">Singleton: Often the singleton is public</a></span><span style="font-weight: normal"><a href="class-08-023.html"> [23/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub4/S_java.html">file:S.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub4/S.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub4/S.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub4/S.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub4<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> S _instance<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"linux"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"os.name"</span><span style="color: #990000">)))</span>
<span style="color: #000000">00006:</span>       _instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SLinux</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00008:</span>       _instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SOther</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">S</span> <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _instance<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> S <span style="color: #FF0000">{</span> 
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">++</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> S <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">--</span>i<span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/pub4/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/pub4/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/pub4/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/pub4/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>pub4<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> singleton<span style="color: #990000">.</span>pub4<span style="color: #990000">.</span>S<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="color: #008080">S</span> s <span style="color: #990000">=</span> S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00007:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          You can also use a public method rather than a public field.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">Singleton: Be careful not to use a singleton it is created</a></span><span style="font-weight: normal"><a href="class-08-024.html"> [24/34] </a></span></td></tr></table><p> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/singleton/classloading/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/singleton/classloading/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicsingleton/classloading/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatesingleton/classloading/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> singleton<span style="color: #990000">.</span>classloading<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900"> * This example shows that you need to be careful to ensure that</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900"> * singletons are not accessed before they are created!</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">S</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> S _instance<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> numInstances<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">S</span> <span style="font-weight: bold"><span style="color: #000000">getInstance</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_instance <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>       _instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">S</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00013:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _instance<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>   
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">S</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     S<span style="color: #990000">.</span>numInstances<span style="color: #990000">++;</span>
<span style="color: #000000">00019:</span>     B<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">doNothing</span></span><span style="color: #990000">();</span>  <span style="font-style: italic"><span style="color: #9A1900">// B is loaded here, during A's constructor</span></span>
<span style="color: #000000">00020:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">B</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>   <span style="font-style: italic"><span style="color: #9A1900">// B caches the only instance of S</span></span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">S</span> a <span style="color: #990000">=</span> S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getInstance</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">doNothing</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> 
<span style="color: #000000">00029:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getInstance</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> B<span style="color: #990000">.</span>a<span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// false!</span></span>
<span style="color: #000000">00032:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>S<span style="color: #990000">.</span>numInstances<span style="color: #990000">);</span>         <span style="font-style: italic"><span style="color: #9A1900">// 2!</span></span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">Singleton: Cloning and serialization</a></span><span style="font-weight: normal"><a href="class-08-025.html"> [25/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Dissallow cloning in singleton classes.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SLinux</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> S <span style="color: #FF0000">{</span>
  <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">readResolve</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>ObjectStreamException <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> SObject<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">();</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">SOther</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> S <span style="color: #FF0000">{</span>
  <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Object</span> <span style="font-weight: bold"><span style="color: #000000">readResolve</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>ObjectStreamException <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> SObject<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">();</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          <code>readResolve()</code> is called after an object is
          deserialized.
        </p>
        <p xmlns="">
          Normally <code>readResolve()</code> cleans up the object a
          little and returns <code>this</code>, but here we want it to
          throw away the deserialized object.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide026">Enumerations: Type-safe Enumeration</a></span><span style="font-weight: normal"><a href="class-08-026.html"> [26/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          See <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/j2se/1.5.0/docs/guide/language/enums.html">http://java.sun.com/j2se/1.5.0/docs/guide/language/enums.html</a>
        </p>
        <p xmlns="">
          Enums are <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/lang/Comparable.html">java.lang.Comparable</a> and
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/io/Serializable.html">java.io.Serializable</a>.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration2/Card_java.html">file:Card.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration2/Card.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration2/Card.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration2/Card.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Card</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">enum</span> Rank <span style="color: #FF0000">{</span> DEUCE<span style="color: #990000">,</span> THREE<span style="color: #990000">,</span> FOUR<span style="color: #990000">,</span> FIVE<span style="color: #990000">,</span> SIX<span style="color: #990000">,</span>
<span style="color: #000000">00008:</span>       SEVEN<span style="color: #990000">,</span> EIGHT<span style="color: #990000">,</span> NINE<span style="color: #990000">,</span> TEN<span style="color: #990000">,</span> JACK<span style="color: #990000">,</span> QUEEN<span style="color: #990000">,</span> KING<span style="color: #990000">,</span> ACE <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span>   
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">enum</span> Suit <span style="color: #FF0000">{</span> CLUBS<span style="color: #990000">,</span> DIAMONDS<span style="color: #990000">,</span> HEARTS<span style="color: #990000">,</span> SPADES <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> rank<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Suit</span> suit<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Card</span></span><span style="color: #990000">(</span><span style="color: #008080">Rank</span> rank<span style="color: #990000">,</span> <span style="color: #008080">Suit</span> suit<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>rank <span style="color: #990000">=</span> rank<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>suit <span style="color: #990000">=</span> suit<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Rank</span> <span style="font-weight: bold"><span style="color: #000000">rank</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> rank<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Suit</span> <span style="font-weight: bold"><span style="color: #000000">suit</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> suit<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> rank <span style="color: #990000">+</span> <span style="color: #FF0000">" of "</span> <span style="color: #990000">+</span> suit<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">List&lt;Card&gt;</span> protoDeck <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Card<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00024:</span>   
<span style="color: #000000">00025:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Initialize prototype deck</span></span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">Suit</span> suit <span style="color: #990000">:</span> Suit<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">values</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00028:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">Rank</span> rank <span style="color: #990000">:</span> Rank<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">values</span></span><span style="color: #990000">())</span>
<span style="color: #000000">00029:</span>         protoDeck<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Card</span></span><span style="color: #990000">(</span>rank<span style="color: #990000">,</span> suit<span style="color: #990000">));</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>   
<span style="color: #000000">00032:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">List&lt;Card&gt;</span> <span style="font-weight: bold"><span style="color: #000000">newDeck</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Card<span style="color: #990000">&gt;(</span>protoDeck<span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// Return copy of prototype deck</span></span>
<span style="color: #000000">00034:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration2/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration2/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration2/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration2/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Collections<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> 
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> args<span style="color: #990000">[])</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>     <span style="color: #009900">int</span> numHands <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">parseInt</span></span><span style="color: #990000">(</span>args<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]);</span>
<span style="color: #000000">00011:</span>     <span style="color: #009900">int</span> cardsPerHand <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">parseInt</span></span><span style="color: #990000">(</span>args<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]);</span>
<span style="color: #000000">00012:</span>     <span style="color: #008080">List&lt;Card&gt;</span> deck  <span style="color: #990000">=</span> Card<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newDeck</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00013:</span>     Collections<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">shuffle</span></span><span style="color: #990000">(</span>deck<span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> numHands<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
<span style="color: #000000">00015:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">deal</span></span><span style="color: #990000">(</span>deck<span style="color: #990000">,</span> cardsPerHand<span style="color: #990000">));</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">List&lt;Card&gt; deal(List&lt;Card&gt;</span> deck<span style="color: #990000">,</span> <span style="color: #009900">int</span> n<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     <span style="color: #009900">int</span> deckSize <span style="color: #990000">=</span> deck<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00020:</span>     <span style="color: #008080">List&lt;Card&gt;</span> handView <span style="color: #990000">=</span> deck<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">subList</span></span><span style="color: #990000">(</span>deckSize<span style="color: #990000">-</span>n<span style="color: #990000">,</span> deckSize<span style="color: #990000">);</span>
<span style="color: #000000">00021:</span>     <span style="color: #008080">List&lt;Card&gt;</span> hand <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Card<span style="color: #990000">&gt;(</span>handView<span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>     handView<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clear</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> hand<span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Here are Java 1.4 versions:
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration/Suit_java.html">file:Suit.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration/Suit.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration/Suit.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration/Suit.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Arrays<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Collections<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> 
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">// Ordinal-based typesafe enum (From Bloch)</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">// No need to override equals, since only one instance of each suit.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that _instanceNum and _name are instance fields.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that cNumInstances is a class field.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that the order of the constant definitions is important.</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that VALUES is an immutable collection.</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900">// Java arrays are always mutable :-(</span></span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Suit</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Comparable<span style="color: #990000">&lt;</span>Suit<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Number of instances</span></span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> cNumInstances <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Ordinal for this instance</span></span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> _instanceNum<span style="color: #990000">;</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Name of Suit</span></span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String _name<span style="color: #990000">;</span>
<span style="color: #000000">00025:</span> 
<span style="color: #000000">00026:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Private constructor: All instances created in the class</span></span>
<span style="color: #000000">00027:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Suit</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>     _name <span style="color: #990000">=</span> name<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>     _instanceNum <span style="color: #990000">=</span> Suit<span style="color: #990000">.</span>cNumInstances<span style="color: #990000">++;</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> 
<span style="color: #000000">00032:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _name<span style="color: #990000">;</span>
<span style="color: #000000">00034:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> 
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span><span style="color: #008080">Suit</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>_instanceNum <span style="color: #990000">-</span> that<span style="color: #990000">.</span>_instanceNum<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span> 
<span style="color: #000000">00040:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Suit</span> CLUBS <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Suit</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"clubs"</span><span style="color: #990000">);</span>
<span style="color: #000000">00041:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Suit</span> DIAMONDS <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Suit</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"diamonds"</span><span style="color: #990000">);</span>
<span style="color: #000000">00042:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Suit</span> HEARTS <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Suit</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"hearts"</span><span style="color: #990000">);</span>
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Suit</span> SPADES <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Suit</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"spades"</span><span style="color: #990000">);</span>
<span style="color: #000000">00044:</span> 
<span style="color: #000000">00045:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">List&lt;Suit&gt;</span> VALUES<span style="color: #990000">;</span>
<span style="color: #000000">00046:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>     Suit<span style="color: #990000">[]</span> values <span style="color: #990000">=</span> <span style="color: #FF0000">{</span> CLUBS<span style="color: #990000">,</span> DIAMONDS<span style="color: #990000">,</span> HEARTS<span style="color: #990000">,</span> SPADES <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00048:</span>     VALUES <span style="color: #990000">=</span> Collections<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">unmodifiableList</span></span><span style="color: #990000">(</span>Arrays<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">asList</span></span><span style="color: #990000">(</span>values<span style="color: #990000">));</span>
<span style="color: #000000">00049:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00051:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration/Rank_java.html">file:Rank.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration/Rank.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration/Rank.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration/Rank.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Arrays<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Collections<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> 
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">// Ordinal-based typesafe enum (From Bloch)</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">// No need to override equals, since only one instance of each rank.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that _instanceNum and _name are instance fields.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that cNumInstances is a class field.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that the order of the constant definitions is important.</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">// Note that VALUES is an immutable collection.</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900">// Java arrays are always mutable :-(</span></span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Rank</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Comparable<span style="color: #990000">&lt;</span>Rank<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Number of instances</span></span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> cNumInstances <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Ordinal for this instance</span></span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> _instanceNum<span style="color: #990000">;</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Name of Rank</span></span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String _name<span style="color: #990000">;</span>
<span style="color: #000000">00025:</span> 
<span style="color: #000000">00026:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Private constructor: All instances created in the class</span></span>
<span style="color: #000000">00027:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>     _name <span style="color: #990000">=</span> name<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>     _instanceNum <span style="color: #990000">=</span> Rank<span style="color: #990000">.</span>cNumInstances<span style="color: #990000">++;</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> 
<span style="color: #000000">00032:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _name<span style="color: #990000">;</span>
<span style="color: #000000">00034:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> 
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span><span style="color: #008080">Rank</span> that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>_instanceNum <span style="color: #990000">-</span> that<span style="color: #990000">.</span>_instanceNum<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span> 
<span style="color: #000000">00040:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getValue</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span> <span style="color: #990000">==</span> ACE_HIGH<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00042:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00043:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _instanceNum <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> 
<span style="color: #000000">00048:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> ACE_LOW <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"ace"</span><span style="color: #990000">);</span>
<span style="color: #000000">00049:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> TWO <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"two"</span><span style="color: #990000">);</span>
<span style="color: #000000">00050:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> THREE <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"three"</span><span style="color: #990000">);</span>
<span style="color: #000000">00051:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> FOUR <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"four"</span><span style="color: #990000">);</span>
<span style="color: #000000">00052:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> FIVE <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"five"</span><span style="color: #990000">);</span>
<span style="color: #000000">00053:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> SIX <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"six"</span><span style="color: #990000">);</span>
<span style="color: #000000">00054:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> SEVEN <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"seven"</span><span style="color: #990000">);</span>
<span style="color: #000000">00055:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> EIGHT <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"eight"</span><span style="color: #990000">);</span>
<span style="color: #000000">00056:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> NINE <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"nine"</span><span style="color: #990000">);</span>
<span style="color: #000000">00057:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> TEN <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"ten"</span><span style="color: #990000">);</span>
<span style="color: #000000">00058:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> JACK <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"jack"</span><span style="color: #990000">);</span>
<span style="color: #000000">00059:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> QUEEN <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"queen"</span><span style="color: #990000">);</span>
<span style="color: #000000">00060:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> KING <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"king"</span><span style="color: #990000">);</span>
<span style="color: #000000">00061:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Rank</span> ACE_HIGH <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rank</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"ace"</span><span style="color: #990000">);</span>
<span style="color: #000000">00062:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">List&lt;Rank&gt;</span> VALUES<span style="color: #990000">;</span>
<span style="color: #000000">00063:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00064:</span>     Rank<span style="color: #990000">[]</span> values <span style="color: #990000">=</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00065:</span>       ACE_LOW<span style="color: #990000">,</span> TWO<span style="color: #990000">,</span> THREE<span style="color: #990000">,</span> FOUR<span style="color: #990000">,</span> FIVE<span style="color: #990000">,</span> SIX<span style="color: #990000">,</span> SEVEN<span style="color: #990000">,</span> EIGHT<span style="color: #990000">,</span> NINE<span style="color: #990000">,</span> TEN<span style="color: #990000">,</span> JACK<span style="color: #990000">,</span> QUEEN<span style="color: #990000">,</span> KING<span style="color: #990000">,</span> ACE_HIGH
<span style="color: #000000">00066:</span>     <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00067:</span>     VALUES <span style="color: #990000">=</span> Collections<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">unmodifiableList</span></span><span style="color: #990000">(</span>Arrays<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">asList</span></span><span style="color: #990000">(</span>values<span style="color: #990000">));</span>
<span style="color: #000000">00068:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00069:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00070:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration/Card_java.html">file:Card.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration/Card.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration/Card.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration/Card.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Collections<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> 
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">// Typesafe enum (From Bloch)</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Card</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Rank of Card</span></span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> Rank _rank<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span> 
<span style="color: #000000">00014:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Suit of Card</span></span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> Suit _suit<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>   <span style="font-style: italic"><span style="color: #9A1900">// Private constructor: All instances created in the class</span></span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Card</span></span><span style="color: #990000">(</span><span style="color: #008080">Rank</span> rank<span style="color: #990000">,</span> <span style="color: #008080">Suit</span> suit<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     _rank <span style="color: #990000">=</span> rank<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>     _suit <span style="color: #990000">=</span> suit<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> 
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _rank <span style="color: #990000">+</span> <span style="color: #FF0000">" of "</span> <span style="color: #990000">+</span> _suit<span style="color: #990000">;</span>
<span style="color: #000000">00025:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> 
<span style="color: #000000">00027:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareRank</span></span><span style="color: #990000">(</span><span style="color: #008080">Card</span> c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _rank<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span>c<span style="color: #990000">.</span>_rank<span style="color: #990000">);</span>
<span style="color: #000000">00029:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span> 
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareSuit</span></span><span style="color: #990000">(</span><span style="color: #008080">Card</span> c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _suit<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span>c<span style="color: #990000">.</span>_suit<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> 
<span style="color: #000000">00035:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Rank</span> <span style="font-weight: bold"><span style="color: #000000">getRank</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _rank<span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span> 
<span style="color: #000000">00039:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getRankValue</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _rank<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getValue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00041:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span> 
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Suit</span> <span style="font-weight: bold"><span style="color: #000000">getSuit</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _suit<span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span> 
<span style="color: #000000">00047:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">List&lt;Card&gt;</span> VALUES<span style="color: #990000">;</span>
<span style="color: #000000">00048:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00049:</span>     <span style="color: #008080">List&lt;Card&gt;</span> values <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Card<span style="color: #990000">&gt;(</span><span style="color: #993399">56</span><span style="color: #990000">);</span>
<span style="color: #000000">00050:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">Suit</span> s <span style="color: #990000">:</span> Suit<span style="color: #990000">.</span>VALUES<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00051:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">Rank</span> r <span style="color: #990000">:</span> Rank<span style="color: #990000">.</span>VALUES<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00052:</span>         values<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Card</span></span><span style="color: #990000">(</span>r<span style="color: #990000">,</span> s<span style="color: #990000">));</span>
<span style="color: #000000">00053:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00054:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span>     VALUES <span style="color: #990000">=</span> Collections<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">unmodifiableList</span></span><span style="color: #990000">(</span>values<span style="color: #990000">);</span>
<span style="color: #000000">00056:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00057:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00058:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide027">Enumerations: Enumeration with polymorphic methods</a></span><span style="font-weight: normal"><a href="class-08-027.html"> [27/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Recall the code we had for expression trees:
          <a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/composite/four/ExprFactory_java.html">file:ExprFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/composite/four/ExprFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publiccomposite/four/ExprFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatecomposite/four/ExprFactory.html">doc-private</a>]
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration2/Op_java.html">file:Op.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration2/Op.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration2/Op.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration2/Op.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">enum</span> Op <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #000000">ADD</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"+"</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x <span style="color: #990000">+</span> y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #000000">SUB</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"-"</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x <span style="color: #990000">-</span> y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #000000">MUL</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"*"</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x <span style="color: #990000">*</span> y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #000000">DIV</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"/"</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x <span style="color: #990000">/</span> y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00008:</span> 
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String _name<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Op</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _name <span style="color: #990000">=</span> name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">);</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration2/ExprFactory_java.html">file:ExprFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration2/ExprFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration2/ExprFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration2/ExprFactory.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ExprFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">ExprFactory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Expr</span> <span style="font-weight: bold"><span style="color: #000000">newConst</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Const</span></span><span style="color: #990000">(</span>v<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Expr</span> <span style="font-weight: bold"><span style="color: #000000">newPlus</span></span><span style="color: #990000">(</span><span style="color: #008080">Expr</span> l<span style="color: #990000">,</span> <span style="color: #008080">Expr</span> r<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BinOp</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span> Op<span style="color: #990000">.</span>ADD<span style="color: #990000">,</span> r<span style="color: #990000">);</span>
<span style="color: #000000">00010:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Expr</span> <span style="font-weight: bold"><span style="color: #000000">newMinus</span></span><span style="color: #990000">(</span><span style="color: #008080">Expr</span> l<span style="color: #990000">,</span> <span style="color: #008080">Expr</span> r<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BinOp</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span> Op<span style="color: #990000">.</span>SUB<span style="color: #990000">,</span> r<span style="color: #990000">);</span>
<span style="color: #000000">00013:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Expr</span> <span style="font-weight: bold"><span style="color: #000000">newMult</span></span><span style="color: #990000">(</span><span style="color: #008080">Expr</span> l<span style="color: #990000">,</span> <span style="color: #008080">Expr</span> r<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BinOp</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span> Op<span style="color: #990000">.</span>MUL<span style="color: #990000">,</span> r<span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Expr</span> <span style="font-weight: bold"><span style="color: #000000">newQuot</span></span><span style="color: #990000">(</span><span style="color: #008080">Expr</span> l<span style="color: #990000">,</span> <span style="color: #008080">Expr</span> r<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BinOp</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span> Op<span style="color: #990000">.</span>DIV<span style="color: #990000">,</span> r<span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Here is the Java 1.4 version:
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/enumeration/Op_java.html">file:Op.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/enumeration/Op.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicenumeration/Op.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateenumeration/Op.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> enumeration<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Op</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String _name<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #000000">Op</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> name<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _name <span style="color: #990000">=</span> name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">);</span>
<span style="color: #000000">00009:</span> 
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Op</span> ADD <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">OpAdd</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Op</span> SUB <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">OpSub</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Op</span> MUL <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">OpMul</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #008080">Op</span> DIV <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">OpDiv</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">OpAdd</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Op <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #000000">OpAdd</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>  <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"+"</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x<span style="color: #990000">+</span>y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">OpSub</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Op <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #000000">OpSub</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>  <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"-"</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x<span style="color: #990000">-</span>y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">OpMul</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Op <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #000000">OpMul</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>  <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"*"</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x<span style="color: #990000">*</span>y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">OpDiv</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Op <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #000000">OpDiv</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>  <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"/"</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x<span style="color: #990000">/</span>y<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide028">Factory: Shapes</a></span><span style="font-weight: normal"><a href="class-08-028.html"> [28/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The simplest version exports the concrete class names.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape1/Shape_java.html">file:Shape.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape1/Shape.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape1/Shape.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape1/Shape.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Shape</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">);</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape1/Circle_java.html">file:Circle.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape1/Circle.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape1/Circle.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape1/Circle.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Circle</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00005:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape1/Square_java.html">file:Square.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape1/Square.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape1/Square.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape1/Square.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Square</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00005:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00006:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape1/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape1/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape1/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape1/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">.</span>Shape<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">.</span>Square<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape1<span style="color: #990000">.</span>Circle<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>     Shape<span style="color: #990000">[]</span> a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Shape<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00008:</span>     a<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>     a<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Square</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide029">Factory: Static Factory Method</a></span><span style="font-weight: normal"><a href="class-08-029.html"> [29/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          A factory allows the concrete class names to remain hidden.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape2/Shape_java.html">file:Shape.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape2/Shape.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape2/Shape.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape2/Shape.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Shape</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">);</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Circle</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Square</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape2/ShapeFactory_java.html">file:ShapeFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape2/ShapeFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape2/ShapeFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape2/ShapeFactory.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape2<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ShapeFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">ShapeFactory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Shape</span> <span style="font-weight: bold"><span style="color: #000000">newInstance</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> selector<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"Circle"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>selector<span style="color: #990000">))</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"Square"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>selector<span style="color: #990000">))</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Square</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape2/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape2/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape2/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape2/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape2<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape2<span style="color: #990000">.</span>Shape<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape2<span style="color: #990000">.</span>ShapeFactory<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     Shape<span style="color: #990000">[]</span> a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Shape<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00007:</span>     a<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> ShapeFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newInstance</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Circle"</span><span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>     a<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> ShapeFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newInstance</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Square"</span><span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide030">Factory: Benefit</a></span><span style="font-weight: normal"><a href="class-08-030.html"> [30/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          Changing names does not affect client code.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape3/Shape_java.html">file:Shape.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape3/Shape.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape3/Shape.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape3/Shape.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape3<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Shape</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">);</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Ellipse</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Rectangle</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape3/ShapeFactory_java.html">file:ShapeFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape3/ShapeFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape3/ShapeFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape3/ShapeFactory.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape3<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ShapeFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">ShapeFactory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Shape</span> <span style="font-weight: bold"><span style="color: #000000">newInstance</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> selector<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"Ellipse"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>selector<span style="color: #990000">))</span>   <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Ellipse</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"Circle"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>selector<span style="color: #990000">))</span>    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Ellipse</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"Rectangle"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>selector<span style="color: #990000">))</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="color: #FF0000">"Square"</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>selector<span style="color: #990000">))</span>    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape3/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape3/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape3/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape3/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape3<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape3<span style="color: #990000">.</span>Shape<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape3<span style="color: #990000">.</span>ShapeFactory<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     Shape<span style="color: #990000">[]</span> a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Shape<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00007:</span>     a<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> ShapeFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newInstance</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Circle"</span><span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>     a<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> ShapeFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newInstance</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Square"</span><span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide031">Factory: Static Factory Class</a></span><span style="font-weight: normal"><a href="class-08-031.html"> [31/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          An alternative is to use multiple factory methods.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape4/Shape_java.html">file:Shape.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape4/Shape.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape4/Shape.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape4/Shape.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape4<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Shape</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">);</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Ellipse</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #000000">Ellipse</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> radius1<span style="color: #990000">,</span> <span style="color: #009900">int</span> radius2<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Rectangle</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> height<span style="color: #990000">,</span> <span style="color: #009900">int</span> width<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span><span style="color: #008080">Graphics</span> g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape4/ShapeFactory_java.html">file:ShapeFactory.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape4/ShapeFactory.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape4/ShapeFactory.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape4/ShapeFactory.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape4<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ShapeFactory</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">ShapeFactory</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Shape</span> <span style="font-weight: bold"><span style="color: #000000">newEllipse</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> radius1<span style="color: #990000">,</span> <span style="color: #009900">int</span> radius2<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Ellipse</span></span><span style="color: #990000">(</span>radius1<span style="color: #990000">,</span> radius2<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Shape</span> <span style="font-weight: bold"><span style="color: #000000">newCircle</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> radius<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Ellipse</span></span><span style="color: #990000">(</span>radius<span style="color: #990000">,</span> radius<span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Shape</span> <span style="font-weight: bold"><span style="color: #000000">newRectangle</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> height<span style="color: #990000">,</span> <span style="color: #009900">int</span> width<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span>height<span style="color: #990000">,</span> width<span style="color: #990000">);</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Shape</span> <span style="font-weight: bold"><span style="color: #000000">newSquare</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span>height<span style="color: #990000">,</span> height<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/shape4/main/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/shape4/main/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/shape4/main/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/shape4/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>shape4<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape4<span style="color: #990000">.</span>Shape<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> factory<span style="color: #990000">.</span>shape4<span style="color: #990000">.</span>ShapeFactory<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     Shape<span style="color: #990000">[]</span> a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Shape<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">];</span>
<span style="color: #000000">00007:</span>     a<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> ShapeFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newCircle</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>     a<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]</span> <span style="color: #990000">=</span> ShapeFactory<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">newSquare</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide032">Factory: Polymorphic Factory Method</a></span><span style="font-weight: normal"><a href="class-08-032.html"> [32/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          The object created depends upon the actual type of the
          creator.
        </p>
        <p xmlns="">
          This is called <q>Factory Method</q> by GoF.
        </p>
        <p xmlns="">
          The polymorphic factory method pattern is used to connect
          two hierarchies.  A good example is
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/Collection.html">java.util.Collection</a> and 
          <a xmlns="http://www.w3.org/1999/xhtml" href="http://java.sun.com/javase/6/docs/api/java/util/Iterator.html">java.util.Iterator</a>.
        </p>
        <p xmlns="">
          Here is a silly example, using triples rather than general collections:
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/factorymethod/Main_java.html">file:Main.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/factorymethod/Main.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/factorymethod/Main.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/factorymethod/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>factorymethod<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span> <span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     <span style="color: #008080">Triple&lt;String&gt;</span> t1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> FieldTriple<span style="color: #990000">&lt;</span>String<span style="color: #990000">&gt;(</span><span style="color: #FF0000">"dog"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"cat"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"pig"</span><span style="color: #990000">);</span>
<span style="color: #000000">00005:</span>     <span style="color: #008080">Triple&lt;String&gt;</span> t2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayTriple<span style="color: #990000">&lt;</span>String<span style="color: #990000">&gt;(</span><span style="color: #FF0000">"daisy"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"rose"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"tulip"</span><span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">String</span> s <span style="color: #990000">:</span> t1<span style="color: #990000">)</span>
<span style="color: #000000">00007:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #008080">String</span> s <span style="color: #990000">:</span> t2<span style="color: #990000">)</span>
<span style="color: #000000">00009:</span>       System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>
<span style="color: #000000">00010:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/factory/factorymethod/Triple_java.html">file:Triple.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/factory/factorymethod/Triple.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicfactory/factorymethod/Triple.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privatefactory/factorymethod/Triple.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> factory<span style="color: #990000">.</span>factorymethod<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Iterator<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">Triple</span><span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Iterable<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">FieldTriple</span><span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Triple<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> E _one<span style="color: #990000">;</span> E _two<span style="color: #990000">;</span> E _three<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">FieldTriple</span></span><span style="color: #990000">(</span><span style="color: #008080">E</span> one<span style="color: #990000">,</span> <span style="color: #008080">E</span> two<span style="color: #990000">,</span> <span style="color: #008080">E</span> three<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     _one <span style="color: #990000">=</span> one<span style="color: #990000">;</span> _two <span style="color: #990000">=</span> two<span style="color: #990000">;</span> _three <span style="color: #990000">=</span> three<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Iterator&lt;E&gt;</span> <span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TheIterator</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">TheIterator</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Iterator<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _i<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _i <span style="color: #990000">&lt;</span> <span style="color: #993399">3</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">E</span> <span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       _i<span style="color: #990000">++;</span>
<span style="color: #000000">00017:</span>       <span style="font-weight: bold"><span style="color: #0000FF">switch</span></span> <span style="color: #990000">(</span>_i<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>         <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">1</span><span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _one<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>         <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">2</span><span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _two<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>         <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">3</span><span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _three<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">NoSuchElementException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">UnsupportedOperationException</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="font-style: italic"><span style="color: #9A1900">// Arrays do not play nicely with generics, so use ArrayList</span></span>
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ArrayTriple</span><span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Triple<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> ArrayList<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> _a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">ArrayTriple</span></span><span style="color: #990000">(</span><span style="color: #008080">E</span> one<span style="color: #990000">,</span> <span style="color: #008080">E</span> two<span style="color: #990000">,</span> <span style="color: #008080">E</span> three<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span>one<span style="color: #990000">);</span> _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span>two<span style="color: #990000">);</span> _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">,</span>three<span style="color: #990000">);</span>
<span style="color: #000000">00032:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Iterator&lt;E&gt;</span> <span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TheIterator</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span>   
<span style="color: #000000">00035:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">TheIterator</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Iterator<span style="color: #990000">&lt;</span>E<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _i <span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _i <span style="color: #990000">&lt;</span> <span style="color: #993399">2</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">E</span> <span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>       _i<span style="color: #990000">++;</span>
<span style="color: #000000">00040:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_i <span style="color: #990000">&lt;=</span> <span style="color: #993399">2</span><span style="color: #990000">)</span>
<span style="color: #000000">00041:</span>         <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>_i<span style="color: #990000">);</span>
<span style="color: #000000">00042:</span>       <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
<span style="color: #000000">00043:</span>         <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">NoSuchElementException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00044:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">UnsupportedOperationException</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide033">Factory: Polymorphic Factory Class</a></span><span style="font-weight: normal"><a href="class-08-033.html"> [33/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          This is a Polymorphic version of the Static Factory Class
          described erlier.
        </p>
        <p xmlns="">
          For example, an abstract factory is used to create GUI
          widgets appropriate for linux (on linux machine) or windows
          (on a windows machine).
        </p>
        <p xmlns="">
          Abstract Factories are almost always Singletons.
        </p>
        <p xmlns="">
          This is called <q>Abstract Factory</q> by GoF.
        </p>
      <p> </p><table width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide034">Flyweighting a factory: Keeping object references unique</a></span><span style="font-weight: normal"><a href="class-08-034.html"> [34/34] </a></span></td></tr></table><p> </p>
        <p xmlns="">
          It is sometimes an irritation to have more than one copy of
          an immutable object.
        </p>
        <p xmlns="">
          If we only had one copy of each object, for example, we
          could use <code>==</code> instead of <code>equals</code>.
        </p>
        <p xmlns="">
          This is sometimes refered to as a <i>hash cons</i>, or
          <i>hash consing</i> (LISP terminology).
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a xmlns="http://www.w3.org/1999/xhtml" href="../code/html/flyweight/Data_java.html">file:Data.java</a> [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/src/flyweight/Data.java">source</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-publicflyweight/Data.html">doc-public</a>] [<a xmlns="http://www.w3.org/1999/xhtml" href="../code/doc-privateflyweight/Data.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> flyweight<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>HashMap<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Data</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Data</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> HashMap<span style="color: #990000">&lt;</span>Integer<span style="color: #990000">,</span>Video<span style="color: #990000">&gt;</span> _hashmap <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> HashMap<span style="color: #990000">&lt;</span>Integer<span style="color: #990000">,</span>Video<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">hash3</span></span> <span style="color: #990000">(</span><span style="color: #008080">Object</span> key1<span style="color: #990000">,</span> <span style="color: #008080">Object</span> key2<span style="color: #990000">,</span> <span style="color: #008080">Object</span> key3<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> key1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hashCode</span></span> <span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #993399">5</span> <span style="color: #990000">*</span> key2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hashCode</span></span> <span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #993399">13</span> <span style="color: #990000">*</span> key3<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hashCode</span></span> <span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Creates and manages flyweight objects. Ensures that flyweights</span></span>
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">   * are shared properly.  When a client requests a flyweight, the</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Flyweight Factory object supplies an existing instance or</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900">   * creates one, if none exists.</span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">Video</span> <span style="font-weight: bold"><span style="color: #000000">getVideo</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> title<span style="color: #990000">,</span> <span style="color: #009900">int</span> year<span style="color: #990000">,</span> <span style="color: #008080">String</span> director<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>  <span style="color: #990000">(</span>title <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00020:</span>        <span style="color: #990000">||</span> <span style="color: #990000">(</span>director <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00021:</span>        <span style="color: #990000">||</span> <span style="color: #990000">(</span>year <span style="color: #990000">&lt;=</span> <span style="color: #993399">1800</span><span style="color: #990000">)</span>
<span style="color: #000000">00022:</span>        <span style="color: #990000">||</span> <span style="color: #990000">(</span>year <span style="color: #990000">&gt;=</span> <span style="color: #993399">5000</span><span style="color: #990000">))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00024:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>     title <span style="color: #990000">=</span> title<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">trim</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00026:</span>     director <span style="color: #990000">=</span> director<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">trim</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00027:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>  <span style="color: #990000">(</span><span style="color: #FF0000">""</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>title<span style="color: #990000">))</span>
<span style="color: #000000">00028:</span>        <span style="color: #990000">||</span> <span style="color: #990000">(</span><span style="color: #FF0000">""</span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>director<span style="color: #990000">)))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00030:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>     <span style="color: #008080">Integer</span> key <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">hash3</span></span><span style="color: #990000">(</span>title<span style="color: #990000">,</span> year<span style="color: #990000">,</span> director<span style="color: #990000">);</span>
<span style="color: #000000">00032:</span>     <span style="color: #008080">Video</span> v <span style="color: #990000">=</span> <span style="color: #990000">(</span>Video<span style="color: #990000">)</span> _hashmap<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>key<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>   <span style="color: #990000">(</span>v <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00034:</span>         <span style="color: #990000">||</span> <span style="color: #990000">!(</span>v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">title</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>title<span style="color: #990000">))</span>
<span style="color: #000000">00035:</span>         <span style="color: #990000">||</span> <span style="color: #990000">(</span>v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">year</span></span><span style="color: #990000">()</span> <span style="color: #990000">!=</span> year<span style="color: #990000">)</span>
<span style="color: #000000">00036:</span>         <span style="color: #990000">||</span> <span style="color: #990000">!(</span>v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">title</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>title<span style="color: #990000">)))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>       v <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">VideoObj</span></span><span style="color: #990000">(</span>title<span style="color: #990000">,</span> year<span style="color: #990000">,</span> director<span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>       _hashmap<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">put</span></span><span style="color: #990000">(</span>key<span style="color: #990000">,</span> v<span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">;</span>
<span style="color: #000000">00041:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span> <span style="color: #FF0000">}</span>  
<span style="color: #000000">00043:</span> 
<span style="color: #000000">00044:</span> </tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <hr/><p class="flush">
      Revised: 2008/03/11 14:51</p></body></html>
